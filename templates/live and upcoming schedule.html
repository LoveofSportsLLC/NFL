<head>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.css" />
  <script type="text/javascript" charset="utf8"
    src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.js"></script>
  <!-- PopperJS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>
  <!-- Bootstrap-Select CSS -->
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/css/bootstrap-select.min.css">
  <!-- Bootstrap-Select JS -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/js/bootstrap-select.min.js"></script>
  <title>NFL Week Overview</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>

<h1>NFL Week Overview</h1>
<div class="container-fluid">
  <div class="row">
    <div class="col py-2 border bg-light p-3 rounded w-50">
      <div class="d-flex flex-row-reverse rounded-3 ">
        <div class="input-group-text">Select a Season:</div>
        <div class="d-inline-flex flex-column w-100">
          <button class="btn btn-outline-secondary dropdown-toggle dropdown-end w-100 position-relative" type="button"
            id="dropdownMenuButton1" data-bs-toggle="dropdown" data-bs-auto-close="true">
            <p class="text-center" id="selected-season">-Placeholder-</p>
          </button>
          <div class="dropdown-menu dropdown-menu-end px-4 position-absolute" aria-labelledby="dropdownMenuButton1"
            style="overflow-y: auto; height: auto; max-height: 200px;">
            <input id="SeasonInput" class="form-control" type="text" placeholder="Filter by Year and Season">
            <ul id="season-dropdown" class="dropdown-menu-content">
              <!-- Options will be dynamically populated from the database -->
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="col py-2 border bg-light p-3 rounded w-50">
      <div class="d-flex flex-row-reverse rounded-3 ">
        <div class="input-group-text">Select Team:</div>
        <div class="d-inline-flex flex-column w-100">
          <button class="btn btn-outline-secondary dropdown-toggle dropdown-end w-100 position-relative" type="button"
            id="dropdownMenuButton2" data-bs-toggle="dropdown" data-bs-auto-close="true">
            <p class="text-center" id="selected-team">-Placeholder-</p>
          </button>
          <div class="dropdown-menu dropdown-menu-end px-4 position-absolute" aria-labelledby="dropdownMenuButton2"
            style="overflow-y: auto; height: auto; max-height: 300px;">
            <input id="TeamInput" class="form-control" type="text" placeholder="Show Player Details by Team">
            <ul id="team-dropdown" class="dropdown-menu-content">
              <!-- Options will be dynamically populated from the database -->
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

 

  <script>
   
  // Organize games by date
  data.forEach(game => {
    let date = new Date(game.gamegame.scheduled.$date);
    let dateString = date.toISOString().split('T')[0]; // format as YYYY-MM-DD

    if (!datewiseData[dateString]) {
      datewiseData[dateString] = []; // Create array if it doesn't exist
    }

    datewiseData[dateString].push(game); // Push game to appropriate array
  });

  // Display games
  Object.keys(datewiseData).forEach(dateString => {
    let dateDiv = document.createElement('div');
    dateDiv.className = 'col-12 my-3 pl-0';
    dateDiv.innerHTML = `<h4>${new Date(dateString).toDateString()}</h4>`;

    datewiseData[dateString].forEach(game => {
      let gameDiv = document.createElement('div');
      gameDiv.className = 'card mb-4';

      let gameHTML = `
      <h5 class="card-header">${game.awayteam.name} VS ${game.hometeam.name}</h5>
      <div class="card-body">
        <!-- Add more details as needed -->
      </div>
    `;

      gameDiv.innerHTML = gameHTML;
      dateDiv.appendChild(gameDiv);
    });

    gameContainer.appendChild(dateDiv);
  });
    
    
    // Get data when page loads
    window.onload = getGameData;

    setInterval(function(){ fetch("/livegames")
  .then(response => response.json())
  .then(data => {
    // Update your page using data
  }); 
}, 60000);
  <script type="text/javascript" async="" src="https://www.googletagmanager.com/gtag/js?id=G-876WTBN7ZH&amp;cx=c&amp;_slc=1"></script>
  <script async="" src="https://www.google-analytics.com/analytics.js"></script>
  <script async="" src="/uscommon/widgetloader" n="USW"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="script.js"></script>
  </script>
