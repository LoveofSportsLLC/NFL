(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(nf.Dialog=b(c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Dialog=b(require("jquery")))}else{nf.Dialog=b(a.$)}}}(this,function(b){b(document).ready(function(){b("#nf-ok-dialog").modal({scrollableContentStyle:"scrollable",handler:{close:function(){b("#nf-ok-dialog-content").empty()}}});b("#nf-yes-no-dialog").modal({scrollableContentStyle:"scrollable",handler:{close:function(){b("#nf-yes-no-dialog-content").empty();b("#nf-yes-no-dialog").modal("setButtonModel",[])}}})});var a={showOkDialog:function(c){c=b.extend({headerText:"",dialogContent:""},c);var d=b("<p></p>").append(c.dialogContent);b("#nf-ok-dialog-content").append(d).append("</br>");b("#nf-ok-dialog").modal("setButtonModel",[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){b("#nf-ok-dialog").modal("hide");if(typeof c.okHandler==="function"){c.okHandler.call(this)}}}}]);b("#nf-ok-dialog").modal("setHeaderText",c.headerText).modal("show")},showYesNoDialog:function(c){c=b.extend({headerText:"",dialogContent:"",yesText:"Yes",noText:"No"},c);var d=b("<p></p>").append(c.dialogContent);b("#nf-yes-no-dialog-content").append(d);b("#nf-yes-no-dialog").modal("setButtonModel",[{buttonText:c.yesText,color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){b("#nf-yes-no-dialog").modal("hide");if(typeof c.yesHandler==="function"){c.yesHandler.call(this)}}}},{buttonText:c.noText,color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){b("#nf-yes-no-dialog").modal("hide");if(typeof c.noHandler==="function"){c.noHandler.call(this)}}}}]);b("#nf-yes-no-dialog").modal("setHeaderText",c.headerText).modal("show")},showDisconnectedFromClusterMessage:function(c){a.showOkDialog({headerText:"Cluster Connection",dialogContent:"This node is currently not connected to the cluster. Any modifications to the data flow made here will not replicate across the cluster.",okHandler:function(){if(typeof c==="function"){c.call(this)}}})},showConnectedToClusterMessage:function(c){a.showOkDialog({headerText:"Cluster Connection",dialogContent:"This node just joined the cluster. Any modifications to the data flow made here will replicate across the cluster.",okHandler:function(){if(typeof c==="function"){c.call(this)}}})}};return a}));
(function(a,b){if(typeof define==="function"&&define.amd){define([],function(){return(nf.AuthorizationStorage=b())})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.AuthorizationStorage=b())}else{nf.AuthorizationStorage=b()}}}(this,function(){var b="Access-Token-Expiration";var a=new RegExp("Request-Token=([^;]+)");return{getRequestToken:function(){var c=null;var d=a.exec(document.cookie);if(d){c=d[1]}return c},getToken:function(){return sessionStorage.getItem(b)},hasToken:function(){var c=this.getToken();return typeof c==="string"},removeToken:function(){sessionStorage.removeItem(b)},setToken:function(c){sessionStorage.setItem(b,c)}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define([],function(){return(nf.Storage=b())})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Storage=b())}else{nf.Storage=b()}}}(this,function(){var h=false;var g=86400000;var f=g*2;var b=function(i){return typeof i==="undefined"};var e=function(i){return i===null};var d=function(i){return !b(i)&&!e(i)};var c=function(k){if(d(k.expires)){var i=new Date(k.expires);var j=new Date();return i.valueOf()<j.valueOf()}else{return false}};var a=function(i){try{var j=JSON.parse(localStorage.getItem(i));if(d(j)){return j}else{return null}}catch(k){return null}};return{init:function(){for(var k=0;k<localStorage.length;k++){try{var j=localStorage.key(k);this.getItem(j)}catch(l){}}},acknowledgeDisconnection:function(){h=true},resetDisconnectionAcknowledgement:function(){h=false},isDisconnectionAcknowledged:function(){return h},setItem:function(j,l,i){i=d(i)?i:new Date().valueOf()+f;var k={expires:i,item:l};localStorage.setItem(j,JSON.stringify(k))},hasItem:function(i){return a(i)!==null},getItem:function(i){var j=a(i);if(j===null){return null}if(c(j)){this.removeItem(i);return null}if(d(j.item)){return j.item}else{return null}},getItemExpiration:function(i){var j=a(i);if(j===null){return null}if(d(j.expires)){return j.expires}else{return null}},removeItem:function(i){localStorage.removeItem(i)}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","d3","nf.AuthorizationStorage","lodash","moment"],function(f,e,c,d,g){return(nf.Common=b(f,e,c,d,g))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Common=b(require("jquery"),require("d3"),require("nf.AuthorizationStorage"),require("lodash"),require("moment")))}else{nf.Common=b(a.$,a.d3,a.nf.AuthorizationStorage,a._,a.moment)}}}(this,function(f,e,b,c,h){f(document).ready(function(){var i="images/bg-error.png";f("<img/>").attr("src",i).on("load",function(){f("div.message-pane").css("background-image",i)});f(document).on("mouseenter","span.link",function(){f(this).addClass("link-over")}).on("mouseleave","span.link",function(){f(this).removeClass("link-over")});f(document).on("click","div.nf-checkbox",function(){var l=f(this);var k=l.hasClass("checkbox-unchecked");var j=l.hasClass("disabled");if(j){return}if(k){l.removeClass("checkbox-unchecked").addClass("checkbox-checked")}else{l.removeClass("checkbox-checked").addClass("checkbox-unchecked")}l.trigger("change",{isChecked:k})});f(document).on("click",".nf-checkbox-label",function(j){f(j.target).parent().find(".nf-checkbox").click()});f(document).ajaxStart(function(){f("div.loading-container").addClass("ajax-loading")}).ajaxStop(function(){f("div.loading-container").removeClass("ajax-loading")});if(b.hasToken()){f("#user-logout-container").css("display","block");g.scheduleTokenRefresh()}f("#user-logout").on("click",function(){f.ajax({type:"DELETE",url:"../nifi-api/access/logout",}).done(function(){b.removeToken();window.location="../nifi/logout"}).fail(nfErrorHandler.handleAjaxError)});f("#user-home").on("click",function(){if(top!==window){parent.window.location="../nifi/"}else{window.location="../nifi/"}})});var d=null;var a=[{text:"view the user interface",value:"flow",description:"Allows users to view the user interface"},{text:"access the controller",value:"controller",description:"Allows users to view/modify the controller including Management Controller Services, Reporting Tasks, Registry Clients, Parameter Providers and nodes in the cluster"},{text:"access parameter contexts",value:"parameter-contexts",description:"Allows users to view/modify Parameter Contexts"},{text:"query provenance",value:"provenance",description:"Allows users to submit a Provenance Search and request Event Lineage"},{text:"access restricted components",value:"restricted-components",description:"Allows users to create/modify restricted components assuming other permissions are sufficient"},{text:"access all policies",value:"policies",description:"Allows users to view/modify the policies for all components"},{text:"access users/user groups",value:"tenants",description:"Allows users to view/modify the users and user groups"},{text:"retrieve site-to-site details",value:"site-to-site",description:"Allows other NiFi instances to retrieve Site-To-Site details of this NiFi"},{text:"view system diagnostics",value:"system",description:"Allows users to view System Diagnostics"},{text:"proxy user requests",value:"proxy",description:"Allows proxy machines to send requests on the behalf of others"},{text:"access counters",value:"counters",description:"Allows users to view/modify Counters"}];var g={ANONYMOUS_USER_TEXT:"Anonymous user",config:{sensitiveText:"Sensitive value set",tooltipConfig:{style:{classes:"nifi-tooltip"},show:{solo:true,effect:function(i){f(this).slideDown(100)}},hide:{effect:function(i){f(this).slideUp(100)}},position:{at:"top center",my:"bottom center"}}},SUPPORTS_SVG:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,currentUser:undefined,sortVersion:function(j,t){if(j===t){return 0}var p=j.split(/-/);var u=t.split(/-/);if(p.length>=1&&u.length>=1){var r=p[0].split(/\./);var o=u[0].split(/\./);if(r.length>=1&&o.length>=1){var m=Math.min(r.length,o.length);for(var n=0;n<m;n++){var s=parseInt(r[n],10);var l=parseInt(o[n],10);if(isNaN(s)&&isNaN(l)){continue}else{if(isNaN(s)){return -1}else{if(isNaN(l)){return 1}}}if(s!==l){return s-l}}if(r.length===o.length){if(p.length===u.length){var q=g.substringAfterFirst(j,p[0]);var k=g.substringAfterFirst(t,u[0]);return q===k?0:q>k?1:-1}else{return u.length-p.length}}else{return r.length-o.length}}else{if(r.length>=1){return 1}else{if(o.length>=1){return -1}else{return 0}}}}else{if(p.length>=1){return 1}else{if(u.length>=1){return -1}else{return 0}}}},sortType:function(i,l){var j=function(o,m){var p=g.formatBundle(o.bundle);var n=g.formatBundle(m.bundle);return p===n?0:p>n?1:-1};var k=function(t,s){if(i.columnId==="version"){var r=g.isDefinedAndNotNull(t.bundle[i.columnId])?t.bundle[i.columnId]:"";var p=g.isDefinedAndNotNull(s.bundle[i.columnId])?s.bundle[i.columnId]:"";var n=g.sortVersion(r,p);return n===0?j(t,s):n}else{if(i.columnId==="type"){var q=g.substringAfterLast(t[i.columnId],".");var o=g.substringAfterLast(s[i.columnId],".");return q===o?0:q>o?1:-1}else{var m=g.isDefinedAndNotNull(t[i.columnId])?t[i.columnId]:"";var u=g.isDefinedAndNotNull(s[i.columnId])?s[i.columnId]:"";return m===u?j(t,s):m>u?1:-1}}};l.sort(k,i.sortAsc)},typeFormatter:function(n,j,m,l,i){var k="";if(i.restricted===true){k+='<div class="view-usage-restriction fa fa-shield"></div><span class="hidden row-id">'+g.escapeHtml(i.id)+"</span>"}else{k+='<div class="fa"></div>'}k+=g.escapeHtml(m);return k},genericValueFormatter:function(m,j,l,k,i){return g.escapeHtml(l)},typeBundleFormatter:function(m,j,l,k,i){return g.escapeHtml(g.formatBundle(i.bundle))},typeVersionFormatter:function(n,j,m,l,i){var k="";if(g.isDefinedAndNotNull(i.bundle)){k+=('<div style="float: left;">'+g.escapeHtml(i.bundle.version)+"</div>")}else{k+='<div style="float: left;">unversioned</div>'}if(!g.isEmpty(i.controllerServiceApis)){k+='<div class="controller-service-apis fa fa-list" title="Compatible Controller Service" style="margin-left: 4px;"></div><span class="hidden row-id">'+g.escapeHtml(i.id)+"</span>"}k+='<div class="clear"></div>';return k},instanceTypeFormatter:function(m,j,l,k,i){if(!i.permissions.canRead){return""}return g.escapeHtml(g.formatType(i.component))},instanceBundleFormatter:function(m,j,l,k,i){if(!i.permissions.canRead){return""}return g.typeBundleFormatter(m,j,l,k,i.component)},getVersionControlTooltip:function(i){return i.stateExplanation},formatClassName:function(i){return g.substringAfterLast(i.type,".")},formatType:function(i){var j=g.formatClassName(i);if(i.bundle.version!=="unversioned"){j+=(" "+i.bundle.version)}return j},formatBundle:function(i){var j="";if(i.group!=="default"){j=i.group+" - "}return j+i.artifact},setCurrentUser:function(i){g.currentUser=i},scheduleTokenRefresh:function(){if(d!==null){clearInterval(d)}var i=g.MILLIS_PER_MINUTE;var j=function(){var o=b.getToken();if(o!==null){var l=parseInt(o,10)*g.MILLIS_PER_SECOND;var n=new Date(l);var m=new Date();var k=n.valueOf()-m.valueOf()-(30*g.MILLIS_PER_SECOND);if(k<i){if(f("#current-user").text()!==g.ANONYMOUS_USER_TEXT&&!f("#anonymous-user-alert").is(":visible")){f("#anonymous-user-alert").show().qtip(f.extend({},g.config.tooltipConfig,{content:"Your session will expire soon. Please log in again to avoid being automatically logged out.",position:{my:"top right",at:"bottom left"}}))}}}};j();d=setInterval(j,i)},setAnonymousUserLabel:function(){var i=f("#anonymous-user-alert");if(i.data("qtip")){i.qtip("api").destroy(true)}i.show().qtip(f.extend({},g.config.tooltipConfig,{content:"You are accessing with limited authority. Log in or request an account to access with additional authority granted to you by an administrator.",position:{my:"top right",at:"bottom left"}}));f("#current-user").text(g.ANONYMOUS_USER_TEXT).show()},getSessionExpiration:function(j){var k=null;var i=g.getJwtPayload(j);if(i){k=i.exp}return k},getDefaultExpiration:function(){var j=new Date();var i=j.getTime()+43200000;var k=Math.round(i/1000);return k.toString()},getJwtPayload:function(j){if(g.isDefinedAndNotNull(j)){var i=j.split(/\./);if(i.length!==3){return""}var l=f.base64.atob(i[1]);var k=JSON.parse(l);if(g.isDefinedAndNotNull(k)){return k}else{return null}}return null},canVersionFlows:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.canVersionFlows===true}else{return false}},canAccessProvenance:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.provenancePermissions.canRead===true}else{return false}},canAccessRestrictedComponents:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.restrictedComponentsPermissions.canWrite===true}else{return false}},canAccessComponentRestrictions:function(j){if(g.isDefinedAndNotNull(g.currentUser)){if(g.currentUser.restrictedComponentsPermissions.canWrite===true){return true}var i=function(m){if(g.isEmpty(g.currentUser.componentRestrictionPermissions)){return false}var l=false;f.each(g.currentUser.componentRestrictionPermissions,function(n,o){if(o.requiredPermission.id===m.id){if(o.permissions.canWrite===true){l=true;return false}}});return l};var k=true;if(g.isEmpty(j)){k=false}else{f.each(j,function(l,m){if(!i(m.requiredPermission)){k=false;return false}})}return k}else{return false}},canAccessCounters:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.countersPermissions.canRead===true}else{return false}},canModifyCounters:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.countersPermissions.canRead===true&&g.currentUser.countersPermissions.canWrite===true}else{return false}},canAccessTenants:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.tenantsPermissions.canRead===true}else{return false}},canModifyTenants:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.tenantsPermissions.canRead===true&&g.currentUser.tenantsPermissions.canWrite===true}else{return false}},canModifyParameterContexts:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.parameterContextPermissions.canRead===true&&g.currentUser.parameterContextPermissions.canWrite===true}else{return false}},canAccessPolicies:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.policiesPermissions.canRead===true}else{return false}},canModifyPolicies:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.policiesPermissions.canRead===true&&g.currentUser.policiesPermissions.canWrite===true}else{return false}},canAccessController:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.controllerPermissions.canRead===true}else{return false}},canModifyController:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.controllerPermissions.canRead===true&&g.currentUser.controllerPermissions.canWrite===true}else{return false}},canAccessSystem:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.systemPermissions.canRead===true}else{return false}},addHoverEffect:function(i,k,j){f(document).on("mouseenter",i,function(){f(this).removeClass(k).addClass(j)}).on("mouseleave",i,function(){f(this).removeClass(j).addClass(k)});return f(i).addClass(k)},toggleScrollable:function(i){if(f(i).is(":visible")){if(i.offsetHeight<i.scrollHeight||i.offsetWidth<i.scrollWidth){f(i).addClass("scrollable")}else{f(i).removeClass("scrollable")}}},determineContrastColor:function(i){if(parseInt(i,16)>16777215/1.5){return"#000000"}return"#ffffff"},updateLogoutLink:function(){if(b.hasToken()){f("#user-logout-container").css("display","block")}else{f("#user-logout-container").css("display","none")}},isContentViewConfigured:function(){var i=f("#nifi-content-viewer-url").text();return !g.isBlank(i)},populateField:function(j,i){if(g.isUndefined(i)||g.isNull(i)){return f("#"+j).addClass("unset").text("No value set")}else{if(i===""){return f("#"+j).addClass("blank").text("Empty string set")}else{return f("#"+j).text(i)}}},clearField:function(i){return f("#"+i).removeClass("unset blank").text("")},cleanUpTooltips:function(i,j){i.find(j).each(function(){var l=f(this);if(l.data("qtip")){var k=l.qtip("api");k.destroy(true)}})},formatPropertyTooltip:function(j,l){var m=[];if(g.isDefinedAndNotNull(j)){if(!g.isBlank(j.description)){m.push(g.escapeHtml(j.description))}if(!g.isBlank(j.defaultValue)){m.push("<b>Default value:</b> "+g.escapeHtml(j.defaultValue))}if(!g.isBlank(j.supportsEl)){m.push("<b>Expression language scope:</b> "+g.escapeHtml(j.expressionLanguageScope))}if(!g.isBlank(j.sensitive)){m.push("<b>Sensitive property:</b> "+g.escapeHtml(j.sensitive))}if(!g.isBlank(j.identifiesControllerService)){var i=g.formatType({type:j.identifiesControllerService,bundle:j.identifiesControllerServiceBundle});var k=g.formatBundle(j.identifiesControllerServiceBundle);m.push("<b>Requires Controller Service:</b> "+g.escapeHtml(i+" from "+k))}}if(g.isDefinedAndNotNull(l)){if(!g.isEmpty(l.previousValues)){var n=[];f.each(l.previousValues,function(p,o){n.push("<li>"+g.escapeHtml(o.previousValue)+" - "+g.escapeHtml(o.timestamp)+" ("+g.escapeHtml(o.userIdentity)+")</li>")});m.push('<b>History:</b><ul class="property-info">'+n.join("")+"</ul>")}}if(m.length>0){return m.join("<br/><br/>")}else{return null}},formatWhitespaceTooltip:function(){return g.escapeHtml("The specified value contains leading and/or trailing whitespace character(s). This could produce unexpected results if it was not intentional.")},LEAD_TRAIL_WHITE_SPACE_REGEX:/^[ \s]+|[ \s]+$/,hasLeadTrailWhitespace:function(i){if(g.isBlank(i)){return false}return g.LEAD_TRAIL_WHITE_SPACE_REGEX.test(i)},formatProperty:function(i,j){return'<div><span class="label">'+g.formatValue(i)+": </span>"+g.formatValue(j)+"</div>"},formatValue:function(i){if(g.isDefinedAndNotNull(i)){if(i===""){return'<span class="blank" style="font-size: 13px; padding-top: 2px;">Empty string set</span>'}else{return g.escapeHtml(i)}}else{return'<span class="unset" style="font-size: 13px; padding-top: 2px;">No value set</span>'}},escapeHtml:(function(){var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2f;"};return function(j){if(g.isDefinedAndNotNull(j)){return String(j).replace(/[&<>"'\/]/g,function(k){return i[k]})}else{return""}}}()),formatNewLines:function(i){if(g.isDefinedAndNotNull(i)){return i.replaceAll(/[\n]/g,"<br>")}else{return""}},isSensitiveProperty:function(i){if(g.isDefinedAndNotNull(i)){return i.sensitive===true}else{return false}},isRequiredProperty:function(i){if(g.isDefinedAndNotNull(i)){return i.required===true}else{return false}},isDynamicProperty:function(i){if(g.isDefinedAndNotNull(i)){return i.dynamic===true}else{return false}},getAllowableValues:function(i){if(g.isDefinedAndNotNull(i)){return i.allowableValues}else{return null}},supportsEl:function(i){if(g.isDefinedAndNotNull(i)){return i.supportsEl===true}else{return false}},formatUnorderedList:function(j){if(f.isArray(j)){var i=f('<ul class="result"></ul>');f.each(j,function(l,m){var k=f("<li></li>").appendTo(i);if(m instanceof jQuery){k.append(m)}else{k.text(m)}});return i}else{return null}},substringAfterLast:function(m,l){var j="";var k=m.lastIndexOf(l);if(k>=0){var i=k+l.length;if(i<m.length){j=m.substr(i)}}return j},substringAfterFirst:function(m,l){var j="";var k=m.indexOf(l);if(k>=0){var i=k+l.length;if(i<m.length){j=m.substr(i)}}return j},substringBeforeLast:function(l,k){var i="";var j=l.lastIndexOf(k);if(j>=0){i=l.substr(0,j)}return i},substringBeforeFirst:function(l,k){var i="";var j=l.indexOf(k);if(j>=0){i=l.substr(0,j)}return i},setCursor:function(j,i){if(i){f("#"+j).addClass("pointer")}else{f("#"+j).removeClass("pointer")}},MILLIS_PER_DAY:86400000,MILLIS_PER_HOUR:3600000,MILLIS_PER_MINUTE:60000,MILLIS_PER_SECOND:1000,loadBalanceStrategyOptions:[{text:"Do not load balance",value:"DO_NOT_LOAD_BALANCE",description:"Do not load balance FlowFiles between nodes in the cluster."},{text:"Partition by attribute",value:"PARTITION_BY_ATTRIBUTE",description:"Determine which node to send a given FlowFile to based on the value of a user-specified FlowFile Attribute. All FlowFiles that have the same value for said Attribute will be sent to the same node in the cluster."},{text:"Round robin",value:"ROUND_ROBIN",description:"FlowFiles will be distributed to nodes in the cluster in a Round-Robin fashion. However, if a node in the cluster is not able to receive data as fast as other nodes, that node may be skipped in one or more iterations in order to maximize throughput of data distribution across the cluster."},{text:"Single node",value:"SINGLE_NODE",description:"All FlowFiles will be sent to the same node. Which node they are sent to is not defined."}],loadBalanceCompressionOptions:[{text:"Do not compress",value:"DO_NOT_COMPRESS",description:"FlowFiles will not be compressed"},{text:"Compress attributes only",value:"COMPRESS_ATTRIBUTES_ONLY",description:"FlowFiles' attributes will be compressed, but the FlowFiles' contents will not be"},{text:"Compress attributes and content",value:"COMPRESS_ATTRIBUTES_AND_CONTENT",description:"FlowFiles' attributes and content will be compressed"}],formatDuration:function(l){l=l<1?0:l;var n=l/g.MILLIS_PER_DAY;n=n>=1?parseInt(n,10):0;l%=g.MILLIS_PER_DAY;var i=l/g.MILLIS_PER_HOUR;i=i>=1?parseInt(i,10):0;l%=g.MILLIS_PER_HOUR;var j=l/g.MILLIS_PER_MINUTE;j=j>=1?parseInt(j,10):0;l%=g.MILLIS_PER_MINUTE;var m=l/g.MILLIS_PER_SECOND;m=m>=1?parseInt(m,10):0;l=Math.floor(l%g.MILLIS_PER_SECOND);var k=g.pad(i,2,"0")+":"+g.pad(j,2,"0")+":"+g.pad(m,2,"0")+"."+g.pad(l,3,"0");if(n>0){return n+" days and "+k}else{return k}},formatPredictedDuration:function(i){if(i===0){return"now"}return h.duration(i,"ms").humanize()},BYTES_IN_KILOBYTE:1024,BYTES_IN_MEGABYTE:1048576,BYTES_IN_GIGABYTE:1073741824,BYTES_IN_TERABYTE:1099511627776,formatDataSize:function(j){var i=parseFloat(j/g.BYTES_IN_TERABYTE);if(i>1){return i.toFixed(2)+" TB"}i=parseFloat(j/g.BYTES_IN_GIGABYTE);if(i>1){return i.toFixed(2)+" GB"}i=parseFloat(j/g.BYTES_IN_MEGABYTE);if(i>1){return i.toFixed(2)+" MB"}i=parseFloat(j/g.BYTES_IN_KILOBYTE);if(i>1){return i.toFixed(2)+" KB"}return parseFloat(j).toFixed(2)+" bytes"},formatInteger:function(j){var i=j+"";var k=/(\d+)(\d{3})/;while(k.test(i)){i=i.replace(k,"$1,$2")}return g.escapeHtml(i)},formatFloat:function(i){if(g.isUndefinedOrNull(i)){return 0+""}return i.toFixed(2)+""},pad:function(l,j,k){var i=l+"";while(i.length<j){i=k+i}return i},formatDateTime:function(i){return g.pad(i.getMonth()+1,2,"0")+"/"+g.pad(i.getDate(),2,"0")+"/"+g.pad(i.getFullYear(),2,"0")+" "+g.pad(i.getHours(),2,"0")+":"+g.pad(i.getMinutes(),2,"0")+":"+g.pad(i.getSeconds(),2,"0")+"."+g.pad(i.getMilliseconds(),3,"0")},parseDateTime:function(m){if(!g.isDefinedAndNotNull(m)){return new Date()}if(m==="No value set"){return new Date()}if(m==="Empty string set"){return new Date()}var t=m.split(/ /);if(t.length!==3){return new Date()}var j=t[0].split(/\//);var i=t[1].split(/:/);if(j.length!==3||i.length!==3){return new Date()}var o=parseInt(j[2],10);var n=parseInt(j[0],10)-1;var p=parseInt(j[1],10);var q=parseInt(i[0],10);var l=parseInt(i[1],10);var s=i[2].split(/\./);var r=parseInt(s[0],10);var k=0;if(s.length===2){k=parseInt(s[1],10)}return new Date(o,n,p,q,l,r,k)},parseDuration:function(i){var j=i.split(/:/);if(j.length!==3){return 0}var k=j[2].split(/\./);if(k.length===2){return new Date(1970,0,1,parseInt(j[0],10),parseInt(j[1],10),parseInt(k[0],10),parseInt(k[1],10)).getTime()}else{return new Date(1970,0,1,parseInt(j[0],10),parseInt(j[1],10),parseInt(j[2],10),0).getTime()}},parseSize:function(k){var l=k.split(/ /);var j=parseFloat(l[0].replace(/,/g,""));var i=l[1];if(i==="KB"){return j*1024}else{if(i==="MB"){return j*1024*1024}else{if(i==="GB"){return j*1024*1024*1024}else{if(i==="TB"){return j*1024*1024*1024*1024}else{return j}}}}},parseCount:function(k){var j=k.split(/ /,1);if(j.length!==1){return 0}var i=parseInt(j[0].replace(/,/g,""),10);if(isNaN(i)){return 0}return i},isDefinedAndNotNull:function(i){return !g.isUndefined(i)&&!g.isNull(i)},isUndefinedOrNull:function(i){return g.isUndefined(i)||g.isNull(i)},isUndefined:function(i){return typeof i==="undefined"},isBlank:function(i){return g.isUndefined(i)||g.isNull(i)||f.trim(i)===""},isNull:function(i){return i===null},isEmpty:function(i){return f.isArray(i)?i.length===0:true},doBulletinsDiffer:function(k,l){if(f.isArray(k)&&f.isArray(l)){if(k.length===l.length){for(var j=0;j<k.length;j++){if(k[j].id!==l[j].id||k[j].canRead!==l[j].canRead){return true}}}else{return true}}else{if(f.isArray(k)||f.isArray(l)){return true}}return false},getFormattedBulletins:function(j){var i=[];f.each(j,function(l,m){if(m.canRead===true){var k=m.bulletin;var p="";if(g.isDefinedAndNotNull(k.nodeAddress)){p="-&nbsp;"+g.escapeHtml(k.nodeAddress)+"&nbsp;-&nbsp;"}var o=f("<pre></pre>").css({"white-space":"pre-wrap"}).text(k.message);var n=f("<div>"+g.escapeHtml(k.timestamp)+"&nbsp;"+p+"&nbsp;<b>"+g.escapeHtml(k.level)+"</b>&nbsp;</div>").append(o);i.push(n)}});return i},getFormattedServiceApis:function(j){var i=[];f.each(j,function(m,n){var k=g.formatType({type:n.type,bundle:n.bundle});var l=g.formatBundle(n.bundle);i.push(f("<div></div>").text(k+" from "+l))});return i},getFormattedGarbageCollections:function(j){j.sort(function(l,k){return k.collectionCount-l.collectionCount});var i=[];f.each(j,function(m,k){var l=f('<span style="font-weight: bold;"></span>').text(k.name);var n=f("<span></span>").text(" - "+k.collectionCount+" times ("+k.collectionTime+")");var o=f("<div></div>").append(l).append(n);i.push(o)});return i},isGlobalPolicy:function(i){return g.getPolicyTypeListing(i)!==null},getPolicyTypeListing:function(i){return a.find(function(j){return i===j.value})},getComponentName:function(i){return i.permissions.canRead===true?i.component.name:i.id},getComboOptionText:function(i,k){var j=i.find(function(l){return l.value===k});return g.isDefinedAndNotNull(j)?j.text:undefined},throttle:function(i,j){return c.throttle(i,j)},getKeyValue:function(j,i){return i.split(".").reduce(function(l,k){return(typeof l===undefined||l===null)?l:(typeof l[k]=="function")?l[k]():l[k]},j)},isMultiLine:function(i){const j=/\n/.exec(i);if(j){return true}return false},sortParameterContextsAlphabeticallyBasedOnAuthorization:function(m){var j=m.filter(function(n){return n.permissions.canRead});var k=m.filter(function(n){return !n.permissions.canRead});var i=j.sort(function(o,n){if(o.component.name<n.component.name){return -1}if(o.component.name>n.component.name){return 1}return 0});var l=k.sort(function(o,n){if(o.id<n.id){return -1}if(o.id>n.id){return 1}return 0});return i.concat(l)}};return g}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Dialog","nf.Common","nf.AuthorizationStorage"],function(e,d,f,c){return(nf.ErrorHandler=b(e,d,f,c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ErrorHandler=b(require("jquery"),require("nf.Dialog"),require("nf.Common"),require("nf.AuthorizationStorage")))}else{nf.ErrorHandler=b(a.$,a.nf.Dialog,a.nf.Common,a.nf.AuthorizationStorage)}}}(this,function(d,c,e,b){var a={handleAjaxError:function(k,f,g){if(f==="canceled"){b.removeToken();if(d("#splash").is(":visible")){d("#message-title").text("Session Expired");d("#message-content").text("Your session has expired. Please reload to log in again.");d("#message-pane").show()}else{c.showOkDialog({headerText:"Session Expired",dialogContent:"Your session has expired. Please press Ok to log in again.",okHandler:function(){window.location="../nifi/"}})}return}var i=k.getResponseHeader("WWW-Authenticate");var j=new RegExp("^Bearer.*$");if(j.test(i)){b.removeToken()}if(d("#splash").is(":visible")){if(k.status===401){d("#message-title").text("Unauthorized")}else{if(k.status===403){d("#message-title").text("Insufficient Permissions")}else{if(k.status===409){d("#message-title").text("Invalid State")}else{if(k.status===413){d("#message-title").text("Payload Too Large")}else{d("#message-title").text("An unexpected error has occurred")}}}}if(d.trim(k.responseText)===""){d("#message-content").text("Please check the logs.")}else{d("#message-content").text(k.responseText)}d("#message-pane").show();return}if(k.status===400||k.status===404||k.status===409||k.status==413||k.status===503){c.showOkDialog({headerText:"Error",dialogContent:e.escapeHtml(k.responseText)})}else{if(k.status===403){c.showOkDialog({headerText:"Insufficient Permissions",dialogContent:e.escapeHtml(k.responseText)})}else{if(k.status<99||k.status===12007||k.status===12029){var h="Please ensure the application is running and check the logs for any errors.";if(e.isDefinedAndNotNull(f)){if(f==="timeout"){h="Request has timed out. Please ensure the application is running and check the logs for any errors."}else{if(f==="abort"){h="Request has been aborted."}else{if(f==="No Transport"){h="Request transport mechanism failed. Please ensure the host where the application is running is accessible."}}}}d("#message-title").text("Unable to communicate with NiFi");d("#message-content").text(h)}else{if(k.status===401){d("#message-title").text("Unauthorized");if(d.trim(k.responseText)===""){d("#message-content").text("Authentication is required to use this NiFi.")}else{d("#message-content").text(k.responseText)}}else{if(k.status===500){d("#message-title").text("An unexpected error has occurred");if(d.trim(k.responseText)===""){d("#message-content").text("An error occurred communicating with the application core. Please check the logs and fix any configuration issues before restarting.")}else{d("#message-content").text(k.responseText)}}else{if(k.status===200||k.status===201){d("#message-title").text("Parse Error");if(d.trim(k.responseText)===""){d("#message-content").text("Unable to interpret response from NiFi.")}else{d("#message-content").text(k.responseText)}}else{d("#message-title").text(k.status+": Unexpected Response");d("#message-content").text("An unexpected error has occurred. Please check the logs.")}}}}d("#message-pane").show()}}},handleConfigurationUpdateAjaxError:function(i,f,g){if(i.status===400){var j=i.responseText.split("\n");var h;if(j.length===1){h=d("<span></span>").text(j[0])}else{h=e.formatUnorderedList(j)}c.showOkDialog({dialogContent:h,headerText:"Configuration Error"})}else{a.handleAjaxError(i,f,g)}}};return a}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(nf.UniversalCapture=b(c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.UniversalCapture=b(require("jquery")))}else{nf.UniversalCapture=b(a.$)}}}(this,function(b){b(document).ready(function(c){c(window).on("keydown",function(d){var i=d.ctrlKey||d.metaKey;if(!i&&d.keyCode===27){var g=c("div.value-combo");if(g.is(":visible")&&g.parent().hasClass("combo-editor")){return}if(c("div.property-detail").is(":visible")){a.removeAllPropertyDetailDialogs();d.stopImmediatePropagation();d.preventDefault()}else{var h=c(d.target);if(h.length){var j=c(".cancellable");if(j.length){var e=null;var f=null;c.each(j,function(k,m){var l=c(m);var n=l.css("zIndex");if(l.is(":visible")&&(n!==null&&typeof n!=="undefined")){n=parseInt(n,10);if(e===null||n>e){e=n;f=l}}});if(f!==null){if(f.hasClass("modal")){f.modal("hide")}else{f.hide()}d.stopImmediatePropagation();d.preventDefault();return}}if(top!==window){if(typeof parent.nf!=="undefined"&&typeof parent.nf.Shell!=="undefined"){parent.$("#shell-close-button").click();d.stopImmediatePropagation();d.preventDefault();return}}}}}else{if(i){if(d.keyCode===82){d.preventDefault()}}else{if(!c("input, textarea").is(":focus")&&(d.keyCode==8||d.keyCode===46)){d.preventDefault()}}}})});var a={removeAllPropertyDetailDialogs:function(){var c=b("body").find("div.property-detail");c.find("div.nf-editor").nfeditor("destroy");c.find("div.value-combo").combo("destroy");c.hide().remove()}};return a}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.AuthorizationStorage"],function(d,c){return(nf.AjaxSetup=b(d,c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.AjaxSetup=b(require("jquery"),require("nf.AuthorizationStorage")))}else{nf.AjaxSetup=b(a.$,a.nf.AuthorizationStorage)}}}(this,function(b,a){b(document).ready(function(c){c.ajaxSetup({beforeSend:function(e){var d=a.getRequestToken();if(d!==null){e.setRequestHeader("Request-Token",d)}}})})}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common"],function(c,d){return(nf.Client=b(c,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Client=b(require("jquery"),require("nf.Common")))}else{nf.Client=b(a.$,a.nf.Common)}}}(this,function(b,c){var a=null;return{init:function(){return b.ajax({type:"GET",url:"../nifi-api/flow/client-id",}).done(function(d){a=d})},getRevision:function(e){return{clientId:a,version:e.revision.version}},isNewerRevision:function(f,d){if(c.isDefinedAndNotNull(f)){var g=f.revision;var e=d.revision;return e.version>=g.version}else{return true}}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.Shell","nf.Dialog","nf.Storage","nf.Client"],function(g,h,c,f,e,d){return(nf.CustomUi=b(g,h,c,f,e,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.CustomUi=b(require("jquery"),require("nf.Common"),require("nf.Shell"),require("nf.Dialog"),require("nf.Storage"),require("nf.Client")))}else{nf.CustomUi=b(a.$,a.nf.Common,a.nf.Shell,a.nf.Dialog,a.nf.Storage,a.nf.Client)}}}(this,function(e,f,a,d,c,b){return{showCustomUi:function(g,i,h){return e.Deferred(function(j){e("#shell-close-button");var k=b.getRevision(g);var l={id:g.id,revision:k.version,clientId:k.clientId,editable:h,disconnectedNodeAcknowledged:c.isDisconnectionAcknowledged()};a.showPage(".."+i+"?"+e.param(l),false).done(function(){j.resolve()})}).promise()}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(nf.ClusterSummary=b(c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ClusterSummary=b(require("jquery")))}else{nf.ClusterSummary=b(a.$)}}}(this,function(e){var d=false;var c=false;var f=false;var b=false;var a={urls:{clusterSummary:"../nifi-api/flow/cluster/summary"}};return{loadClusterSummary:function(){return e.ajax({type:"GET",url:a.urls.clusterSummary,dataType:"json"}).done(function(g){var h=g;var i=h.clusterSummary;if(d===true){if(f!==i.connectedToCluster){b=true}}else{if(i.clustered&&!i.connectedToCluster){b=true}}c=i.clustered;f=i.connectedToCluster;d=true})},isClustered:function(){return c===true},isConnectedToCluster:function(){return f===true},didConnectedStateChange:function(){var g=b;b=false;return g}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.UniversalCapture","nf.Dialog","nf.ErrorHandler","nf.CustomUi","nf.ClusterSummary","nf.CanvasUtils"],function(g,h,j,f,i,e,c,d){return(nf.ProcessorDetails=b(g,h,j,f,i,e,c,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ProcessorDetails=b(require("jquery"),require("nf.Common"),require("nf.UniversalCapture"),require("nf.Dialog"),require("nf.ErrorHandler"),require("nf.CustomUi"),require("nf.ClusterSummary"),require("nf.CanvasUtils")))}else{nf.ProcessorDetails=b(a.$,a.nf.Common,a.nf.UniversalCapture,a.nf.Dialog,a.nf.ErrorHandler,a.nf.CustomUi,a.nf.ClusterSummary,a.nf.CanvasUtils)}}}(this,function(e,b,f,d,g,h,i,c){var a;var j=function(q){var s=e('<span class="relationship-name-value hidden"></span>').text(q.name);var p=e('<div class="processor-terminate-relationship nf-checkbox disabled"></div>');var r=e('<div class="relationship-name nf-checkbox-label ellipsis"></div>').text("terminate");if(q.autoTerminate===true){p.addClass("checkbox-checked")}else{p.addClass("checkbox-unchecked")}var n=e('<div class="processor-terminate-relationship-container"></div>').append(p).append(r);var u=e('<div class="processor-retry-relationship nf-checkbox disabled"></div>');var o=e('<div class="relationship-name nf-checkbox-label ellipsis"></div>').text("retry");if(q.retry===true){u.addClass("checkbox-checked")}else{u.addClass("checkbox-unchecked")}var l=e('<div class="processor-retry-relationship-container"></div>').append(u).append(o);var t=e("<div></div>").text(q.name);var k=e('<div class="processor-relationship-container"></div>').append(t).append(n).append(l).append(s).appendTo("#read-only-auto-action-relationship-names");if(!b.isBlank(q.description)){var m=e('<div class="relationship-description"></div>').text(q.description);k.append(m)}return k};return{init:function(k){a=k;e("#processor-details-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"Settings",tabContentId:"details-standard-settings-tab-content"},{name:"Scheduling",tabContentId:"details-scheduling-tab-content"},{name:"Properties",tabContentId:"details-processor-properties-tab-content"},{name:"Relationships",tabContentId:"details-processor-relationships-tab-content"},{name:"Comments",tabContentId:"details-processor-comments-tab-content"}],select:function(){f.removeAllPropertyDetailDialogs();if(e(this).text()==="Properties"){e("#read-only-processor-properties").propertytable("resetTableSize")}}});e("#processor-details").modal({headerText:"Processor Details",scrollableContentStyle:"scrollable",handler:{close:function(){e("#read-only-auto-action-relationship-names").empty();e("#read-only-processor-properties").propertytable("clear");b.clearField("read-only-processor-id");b.clearField("read-only-processor-type");b.clearField("read-only-processor-name");b.clearField("read-only-concurrently-schedulable-tasks");b.clearField("read-only-scheduling-period");b.clearField("read-only-penalty-duration");b.clearField("read-only-yield-duration");b.clearField("read-only-run-duration");b.clearField("read-only-bulletin-level");b.clearField("read-only-execution-node");b.clearField("read-only-execution-status");b.clearField("read-only-processor-comments");e("#processor-details").removeData("processorDetails");e("#processor-details").removeData("processorHistory");if(a.supportsStatusBar){e("#processor-details-status-bar").statusbar("disconnect")}},open:function(){b.toggleScrollable(e("#"+this.find(".tab-container").attr("id")+"-content").get(0))}}});if(a.supportsStatusBar){e("#processor-details-status-bar").statusbar("processor")}e("#read-only-processor-properties").propertytable(Object.assign({supportsGoTo:a.supportsGoTo,readOnly:true},c&&{getParameterContext:function(l){return c.getParameterContext()}}))},showDetails:function(m,n){var l=e.ajax({type:"GET",url:"../nifi-api/processors/"+encodeURIComponent(n),dataType:"json"}).done(function(p){if(b.isDefinedAndNotNull(p.component)){var r=p.component;e("#processor-details").data("processorDetails",r);e("#processor-details").modal("setSubtitle",b.formatType(r));b.populateField("read-only-processor-id",r.id);b.populateField("read-only-processor-type",b.formatType(r));b.populateField("read-only-processor-bundle",b.formatBundle(r.bundle));b.populateField("read-only-processor-name",r.name);b.populateField("read-only-concurrently-schedulable-tasks",r.config.concurrentlySchedulableTaskCount);b.populateField("read-only-scheduling-period",r.config.schedulingPeriod);b.populateField("read-only-penalty-duration",r.config.penaltyDuration);b.populateField("read-only-yield-duration",r.config.yieldDuration);b.populateField("read-only-run-duration",b.formatDuration(r.config.runDurationMillis));b.populateField("read-only-bulletin-level",r.config.bulletinLevel);b.populateField("read-only-processor-comments",r.config.comments);var o=true;var t=r.config.schedulingStrategy;if(t==="CRON_DRIVEN"){t="CRON driven"}else{t="Timer driven"}b.populateField("read-only-scheduling-strategy",t);if(o===true){e("#read-only-run-schedule").show()}else{e("#read-only-run-schedule").hide()}var s=r.config.executionNode;if(s==="ALL"){s="All nodes"}else{if(s==="PRIMARY"){s="Primary node only"}}b.populateField("read-only-execution-node",s);e("#read-only-execution-node-options").show();if(!b.isEmpty(r.relationships)){e.each(r.relationships,function(u,v){j(v)});var q=(function(){var u=e("#read-only-auto-action-relationship-names").find("div.nf-checkbox.processor-retry-relationship.checkbox-checked").length?true:false;if(u){e("#details-processor-relationships-tab-content .settings-right").show()}else{e("#details-processor-relationships-tab-content .settings-right").hide()}});q()}else{e("#read-only-auto-action-relationship-names").append('<div class="unset">This processor has no relationships.</div>')}if(b.isDefinedAndNotNull(r.config.backoffMechanism)){if(r.config.backoffMechanism==="PENALIZE_FLOWFILE"){e(".details-backoff-policy-setting #penalizeFlowFile").prop("checked",true)}else{if(r.config.backoffMechanism==="YIELD_PROCESSOR"){e(".details-backoff-policy-setting #yieldEntireProcessor").prop("checked",true)}}}if(b.isDefinedAndNotNull(r.config.maxBackoffPeriod)){e(".details-max-backoff-setting #details-max-backoff-period").text(r.config.maxBackoffPeriod)}if(b.isDefinedAndNotNull(r.config.retryCount)){e(".details-retry-count-setting #details-retry-attempt-count").text(r.config.retryCount)}}});var k=e.ajax({type:"GET",url:"../nifi-api/flow/history/components/"+encodeURIComponent(n),dataType:"json"}).done(function(o){var p=o.componentHistory;e("#processor-details").data("processorHistory",p)});e.when(l,k).done(function(t,x){var u=t[0];var o=u.component;var w=x[0];var r=w.componentHistory;var v;e("#read-only-processor-properties").propertytable("setGroupId",o.parentGroupId).propertytable("loadProperties",o.config.properties,o.config.descriptors,r.propertyHistory);var s=[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#processor-details").modal("hide")}}}];if(top===window&&b.isDefinedAndNotNull(h)&&b.isDefinedAndNotNull(o.config.customUiUrl)&&o.config.customUiUrl!==""){s.push({buttonText:"Advanced",clazz:"fa fa-cog button-icon",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){e("#processor-details").modal("hide");h.showCustomUi(u,o.config.customUiUrl,false)}}})}if(a.supportsStatusBar&&b.isDefinedAndNotNull(a.nfCanvasUtils)){var y=b.getFormattedBulletins(u.bulletins);var q=b.formatUnorderedList(y);e("#processor-details-status-bar").statusbar("observe",{processor:o.id,bulletins:q});v=a.nfCanvasUtils.getSelectionById(o.id);if(b.isDefinedAndNotNull(a.nfActions)&&a.nfCanvasUtils.isProcessor(v)&&a.nfCanvasUtils.canModify(v)){var p=function(){var z=e("#processor-details-tabs").find(".selected-tab").text();e("#processor-configuration-tabs").find('.tab:contains("'+z+'")').trigger("click");e("#processor-details").modal("hide");e("#processor-details-status-bar").statusbar("showButtons")};e("#processor-details-status-bar").statusbar("buttons",[{buttonHtml:'<i class="fa fa-stop stop-configure-icon" aria-hidden="true"></i><span>Stop & Configure</span>',clazz:"button button-icon auto-width",color:{hover:"#C7D2D7",base:"transparent",text:"#004849"},disabled:function(){return !a.nfCanvasUtils.isStoppable(v)},handler:{click:function(){e("#processor-details-status-bar").statusbar("hideButtons");a.nfActions.stopAndConfigure(v,p)}}},{buttonText:"Configure",clazz:"fa fa-cog button-icon",color:{hover:"#C7D2D7",base:"transparent",text:"#004849"},disabled:function(){return a.nfCanvasUtils.isStoppable(v)},handler:{click:function(){e("#processor-details-status-bar").statusbar("hideButtons");a.nfActions.showConfiguration(v,p)}}}])}}e("#processor-details").modal("setButtonModel",s).modal("show");e("#processor-details div.relationship-name").ellipsis()}).fail(g.handleAjaxError)}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","Slick","d3","nf.Client","nf.Dialog","nf.Storage","nf.Common","nf.CanvasUtils","nf.ControllerServices","nf.ErrorHandler","nf.FilteredDialogCommon","nf.ReportingTask","nf.FlowAnalysisRule","nf.Shell","nf.ComponentState","nf.ComponentVersion","nf.PolicyManagement","nf.ParameterProvider"],function(h,o,r,t,m,i,l,n,e,k,g,s,d,q,c,f,p,j){return(nf.Settings=b(h,o,r,t,m,i,l,n,e,k,g,s,d,q,c,f,p,j))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Settings=b(require("jquery"),require("Slick"),require("d3"),require("nf.Client"),require("nf.Dialog"),require("nf.Storage"),require("nf.Common"),require("nf.CanvasUtils"),require("nf.ControllerServices"),require("nf.ErrorHandler"),require("nf.FilteredDialogCommon"),require("nf.ReportingTask"),require("nf.FlowAnalysisRule"),require("nf.Shell"),require("nf.ComponentState"),require("nf.ComponentVersion"),require("nf.PolicyManagement"),require("nf.ParameterProvider")))}else{nf.Settings=b(a.$,a.Slick,a.d3,a.nf.Client,a.nf.Dialog,a.nf.Storage,a.nf.Common,a.nf.CanvasUtils,a.nf.ControllerServices,a.nf.ErrorHandler,a.nf.FilteredDialogCommon,a.nf.ReportingTask,a.nf.FlowAnalysisRule,a.nf.Shell,a.nf.ComponentState,a.nf.ComponentVersion,a.nf.PolicyManagement,a.nf.ParameterProvider)}}}(this,function(aq,z,Q,E,Y,s,R,K,G,Z,w,ab,at,o,aB,V,L,r){var ac={urls:{api:"../nifi-api",controllerConfig:"../nifi-api/controller/config",reportingTaskTypes:"../nifi-api/flow/reporting-task-types",createReportingTask:"../nifi-api/controller/reporting-tasks",reportingTasks:"../nifi-api/flow/reporting-tasks",flowAnalysisRuleTypes:"../nifi-api/flow/flow-analysis-rule-types",createFlowAnalysisRule:"../nifi-api/controller/flow-analysis-rules",flowAnalysisRules:"../nifi-api/controller/flow-analysis-rules",registries:"../nifi-api/controller/registry-clients",createParameterProvider:"../nifi-api/controller/parameter-providers",parameterProviderTypes:"../nifi-api/flow/parameter-provider-types",parameterProviders:"../nifi-api/flow/parameter-providers",registryTypes:"../nifi-api/controller/registry-types",currentUser:"../nifi-api/flow/current-user"}};var p={autosizeColsMode:z.GridAutosizeColsMode.LegacyForceFit,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var ak=function(){return aq("#controller-services-table")};var aA=function(aD){var aC=[];if(R.isDefinedAndNotNull(aD.maxTimerDrivenThreadCount)&&!aq.isNumeric(aD.maxTimerDrivenThreadCount)){aC.push("Maximum Timer Driven Thread Count must be an integer value")}if(aC.length>0){Y.showOkDialog({dialogContent:R.formatUnorderedList(aC),headerText:"Configuration Error"});return false}else{return true}};var N=function(aC){var aE=u();if(aA(aE)){var aD={revision:E.getRevision({revision:{version:aC}}),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:aE};aq.ajax({type:"PUT",url:ac.urls.controllerConfig,data:JSON.stringify(aD),dataType:"json",contentType:"application/json"}).done(function(aF){Y.showOkDialog({headerText:"Settings",dialogContent:"Settings successfully applied."});aq("#settings-save").off("click").on("click",function(){N(aF.revision.version)})}).fail(Z.handleConfigurationUpdateAjaxError)}};var j=function(){};var u=function(){var aC={};aC.maxTimerDrivenThreadCount=aq("#maximum-timer-driven-thread-count-field").val();return aC};var M=function(aE,aD){if(aD.searchString===""){return true}try{var aH=new RegExp(aD.searchString,"i")}catch(aG){return false}var aF=aE.label.search(aH)>=0;var aC=aE.tags.search(aH)>=0;return aF||aC};var B=function(aE,aC){var aD=[];aq.each(aE,function(aH,aI){aD.push(aI)});var aF=aC.toLowerCase();var aG=true;aq.each(aD,function(aH,aI){if(aF.indexOf(aI)===-1){aG=false;return false}});return aG};var i=function(aC){return aC.restricted===false||R.canAccessComponentRestrictions(aC.explicitRestrictions)};var P=function(aG,aD,aF,aE,aC){if(!aC.permissions.canRead){return'<span class="blank">'+R.escapeHtml(aC.id)+"</span>"}return R.escapeHtml(aC.component.name)};var I=function(aC,aE){var aD=function(aM,aL){if(aM.permissions.canRead&&aL.permissions.canRead){if(aC.columnId==="moreDetails"){var aI=0;if(!R.isEmpty(aM.bulletins)){aI=aM.bulletins.length}var aF=0;if(!R.isEmpty(aL.bulletins)){aF=aL.bulletins.length}return aI-aF}else{if(aC.columnId==="type"){var aJ=R.isDefinedAndNotNull(aM.component[aC.columnId])?R.substringAfterLast(aM.component[aC.columnId],"."):"";var aH=R.isDefinedAndNotNull(aL.component[aC.columnId])?R.substringAfterLast(aL.component[aC.columnId],"."):"";return aJ===aH?0:aJ>aH?1:-1}else{if(aC.columnId==="state"){var aK;if(aM.component.validationStatus==="VALIDATING"){aK="Validating"}else{if(aM.component.validationStatus==="INVALID"){aK="Invalid"}else{aK=R.isDefinedAndNotNull(aM.component[aC.columnId])?aM.component[aC.columnId]:""}}var aO;if(aL.component.validationStatus==="VALIDATING"){aO="Validating"}else{if(aL.component.validationStatus==="INVALID"){aO="Invalid"}else{aO=R.isDefinedAndNotNull(aL.component[aC.columnId])?aL.component[aC.columnId]:""}}return aK===aO?0:aK>aO?1:-1}else{var aG=R.isDefinedAndNotNull(aM.component[aC.columnId])?aM.component[aC.columnId]:"";var aN=R.isDefinedAndNotNull(aL.component[aC.columnId])?aL.component[aC.columnId]:"";return aG===aN?0:aG>aN?1:-1}}}}else{if(!aM.permissions.canRead&&!aL.permissions.canRead){return 0}if(aM.permissions.canRead){return 1}else{return -1}}};aE.sort(aD,aC.sortAsc)};var c=function(){return aq("#reporting-task-type-filter").val()};var y=function(){return aq("#parameter-provider-type-filter").val()};var d=function(){var aD=aq("#reporting-task-types-table").data("gridInstance");if(R.isDefinedAndNotNull(aD)){var aC=aD.getData();aC.setFilterArgs({searchString:c()});aC.refresh();aq("#new-reporting-task-dialog").modal("refreshButtons");if(aC.getLength()>0){w.choseFirstRow(aD)}}};var k=function(){var aD=aq("#parameter-provider-types-table").data("gridInstance");if(R.isDefinedAndNotNull(aD)){var aC=aD.getData();aC.setFilterArgs({searchString:y()});aC.refresh();aq("#new-parameter-provider-dialog").modal("refreshButtons");if(aC.getLength()>0){w.choseFirstRow(aD)}}};var ax=function(){aq("#reporting-task-type-description").attr("title","").text("");aq("#reporting-task-type-name").attr("title","").text("");aq("#reporting-task-type-bundle").attr("title","").text("");aq("#selected-reporting-task-name").text("");aq("#selected-reporting-task-type").text("").removeData("bundle");aq("#reporting-task-description-container").hide()};var q=function(){aq("#parameter-provider-type-description").attr("title","").text("");aq("#parameter-provider-type-name").attr("title","").text("");aq("#parameter-provider-type-bundle").attr("title","").text("");aq("#selected-parameter-provider-name").text("");aq("#selected-parameter-provider-type").text("").removeData("bundle");aq("#parameter-provider-description-container").hide()};var t=function(){ax();var aC=aq("#reporting-task-types-table").data("gridInstance");aC.resetActiveCell()};var ap=function(){q();var aC=aq("#parameter-provider-types-table").data("gridInstance");aC.resetActiveCell()};var af=function(aK,aF){var aI=M(aK,aF);var aE=true;if(aI){var aJ=aq("#reporting-task-tag-cloud").tagcloud("getSelectedTags");var aH=aJ.length>0;if(aH){aE=B(aJ,aK.tags)}}var aG=true;if(aI&&aE){var aC=aq("#reporting-task-bundle-group-combo").combo("getSelectedOption");if(R.isDefinedAndNotNull(aC)&&aC.value!==""){aG=(aK.bundle.group===aC.value)}}var aD=aI&&aE&&aG;if(aD===false&&aq("#selected-reporting-task-type").text()===aK.type){t()}return aD};var az=function(aK,aF){var aI=M(aK,aF);var aE=true;if(aI){var aJ=aq("#parameter-provider-tag-cloud").tagcloud("getSelectedTags");var aH=aJ.length>0;if(aH){aE=B(aJ,aK.tags)}}var aG=true;if(aI&&aE){var aC=aq("#parameter-provider-bundle-group-combo").combo("getSelectedOption");if(R.isDefinedAndNotNull(aC)&&aC.value!==""){aG=(aK.bundle.group===aC.value)}}var aD=aI&&aE&&aG;if(aD===false&&aq("#selected-parameter-provider-type").text()===aK.type){ap()}return aD};var l=function(){var aD=aq("#selected-reporting-task-type").text();var aC=aq("#selected-reporting-task-type").data("bundle");if(aD===""){Y.showOkDialog({headerText:"Settings",dialogContent:"The type of reporting task to create must be selected."})}else{al(aD,aC)}};var ad=function(){var aC=aq("#selected-parameter-provider-type").text();var aD=aq("#selected-selected-parameter-type").data("bundle");if(aC===""){Y.showOkDialog({headerText:"Settings",dialogContent:"The type of parameter provider to create must be selected."})}else{X(aC,aD)}};var al=function(aC,aE){var aF={revision:E.getRevision({revision:{version:0}}),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:{type:aC,bundle:aE}};var aD=aq.ajax({type:"POST",url:ac.urls.createReportingTask,data:JSON.stringify(aF),dataType:"json",contentType:"application/json"}).done(function(aH){var aJ=aq("#reporting-tasks-table").data("gridInstance");var aG=aJ.getData();aG.addItem(aq.extend({type:"ReportingTask",bulletins:[]},aH));aG.reSort();aJ.invalidate();var aI=aG.getRowById(aH.id);w.choseRow(aJ,aI);aJ.scrollRowIntoView(aI)}).fail(Z.handleAjaxError);aq("#new-reporting-task-dialog").modal("hide");return aD};var H=function(){aq.ajax({type:"GET",url:ac.urls.currentUser,dataType:"json"}).done(function(aC){R.setCurrentUser(aC)})};var am=function(){var aC=aq("#new-registry-type-combo").combo("getSelectedOption");var aD={revision:E.getRevision({revision:{version:0}}),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:{name:aq("#new-registry-name").val(),description:aq("#new-registry-description").val(),type:aC.value}};var aE=aq.ajax({type:"POST",url:ac.urls.registries,data:JSON.stringify(aD),dataType:"json",contentType:"application/json"}).done(function(aI){var aF=aq("#registries-table").data("gridInstance");var aG=aF.getData();aG.addItem(aq.extend({type:"Registry"},aI));aG.reSort();aF.invalidate();var aH=aG.getRowById(aI.id);w.choseRow(aF,aH);aF.scrollRowIntoView(aH);H();aq("#registry-configuration-dialog").modal("hide");aq("#new-registry-client-dialog").modal("hide")}).fail(Z.handleConfigurationUpdateAjaxError);return aE};var X=function(aF,aC){var aD={revision:E.getRevision({revision:{version:0}}),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:{type:aF,bundle:aC}};var aE=aq.ajax({type:"POST",url:ac.urls.createParameterProvider,data:JSON.stringify(aD),dataType:"json",contentType:"application/json"}).done(function(aH){var aI=aq("#parameter-providers-table").data("gridInstance");var aG=aI.getData();aG.addItem(aq.extend({type:"ParameterProvider",bulletins:[]},aH));aG.reSort();aI.invalidate();var aJ=aG.getRowById(aH.id);w.choseRow(aI,aJ);aI.scrollRowIntoView(aJ)}).fail(Z.handleAjaxError);aq("#new-parameter-provider-dialog").modal("hide");return aE};var v=function(aH){var aE=aq("#registries-table").data("gridInstance");var aF=aE.getData();var aD=aq("#registry-properties").propertytable("marshalProperties");var aI=aF.getItemById(aH);var aG={revision:E.getRevision(aI),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:{id:aH,name:aq("#registry-name-config").val(),description:aq("#registry-description-config").val()}};if(aq.isEmptyObject(aD)===false){aG.component["properties"]=aD}var aC=aq.ajax({type:"PUT",url:aI.uri,data:JSON.stringify(aG),dataType:"json",contentType:"application/json"}).done(function(aJ){aF.updateItem(aJ.id,aq.extend({type:"Registry"},aJ));aq("#registry-configuration-dialog").modal("hide")}).fail(Z.handleConfigurationUpdateAjaxError);return aC};var S=function(){var aD=[{id:"type",name:"Type",field:"label",formatter:R.typeFormatter,sortable:true,resizable:true},{id:"version",name:"Version",field:"version",formatter:R.typeVersionFormatter,sortable:true,resizable:true},{id:"tags",name:"Tags",field:"tags",sortable:true,resizable:true,formatter:R.genericValueFormatter}];var aC=new z.Data.DataView({inlineFilters:false});aC.setItems([]);aC.setFilterArgs({searchString:c()});aC.setFilter(af);R.sortType({columnId:"type",sortAsc:true},aC);var aG=new z.Grid("#reporting-task-types-table",aC,aD,p);aG.setSelectionModel(new z.RowSelectionModel());aG.registerPlugin(new z.AutoTooltips());aG.setSortColumn("type",true);aG.onSort.subscribe(function(aI,aH){R.sortType({columnId:aH.sortCol.field,sortAsc:aH.sortAsc},aC)});aG.onSelectedRowsChanged.subscribe(function(aM,aJ){if(aq.isArray(aJ.rows)&&aJ.rows.length===1){var aL=aJ.rows[0];var aH=aG.getDataItem(aL);if(R.isDefinedAndNotNull(aH)){aq("#reporting-task-description-container").show();if(R.isBlank(aH.description)){aq("#reporting-task-type-description").attr("title","").html('<span class="unset">No description specified</span>')}else{aq("#reporting-task-type-description").width(aq("#reporting-task-description-container").innerWidth()-1).html(aH.description).ellipsis()}var aI=R.formatBundle(aH.bundle);var aK=R.formatType(aH);aq("#reporting-task-type-name").text(aK).attr("title",aK);aq("#reporting-task-type-bundle").text(aI).attr("title",aI);aq("#selected-reporting-task-name").text(aH.label);aq("#selected-reporting-task-type").text(aH.type).data("bundle",aH.bundle);aq("#new-reporting-task-dialog").modal("refreshButtons")}}});aG.onDblClick.subscribe(function(aJ,aI){var aH=aG.getDataItem(aI.row);if(i(aH)){al(aH.type,aH.bundle)}});aG.onViewportChanged.subscribe(function(aI,aH){R.cleanUpTooltips(aq("#reporting-task-types-table"),"div.view-usage-restriction")});aC.onRowCountChanged.subscribe(function(aI,aH){aG.updateRowCount();aG.render();aq("#displayed-reporting-task-types").text(aH.current)});aC.onRowsChanged.subscribe(function(aI,aH){aG.invalidateRows(aH.rows);aG.render()});aC.syncGridSelection(aG,true);aq("#reporting-task-types-table").data("gridInstance",aG).on("mouseenter","div.slick-cell",function(aK){var aL=aq(this).find("div.view-usage-restriction");if(aL.length&&!aL.data("qtip")){var aJ=aq(this).find("span.row-id").text();var aI=aC.getItemById(aJ);if(aI.restricted===true){var aM=aq("<div></div>");if(R.isBlank(aI.usageRestriction)){aM.append(aq('<p style="margin-bottom: 3px;"></p>').text("Requires the following permissions:"))}else{aM.append(aq('<p style="margin-bottom: 3px;"></p>').text(aI.usageRestriction+" Requires the following permissions:"))}var aH=[];if(R.isDefinedAndNotNull(aI.explicitRestrictions)){aq.each(aI.explicitRestrictions,function(aN,aP){var aO=aP.requiredPermission;aH.push("'"+aO.label+"' - "+R.escapeHtml(aP.explanation))})}else{aH.push("Access to restricted components regardless of restrictions.")}aM.append(R.formatUnorderedList(aH));aL.qtip(aq.extend({},R.config.tooltipConfig,{content:aM,position:{container:aq("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});var aF=R.getPolicyTypeListing("restricted-components");aq.ajax({type:"GET",url:ac.urls.reportingTaskTypes,dataType:"json"}).done(function(aI){var aN=0;var aK=[];var aH=new Set();var aM=new Map();var aL=new Map();aC.beginUpdate();aq.each(aI.reportingTaskTypes,function(aO,aP){if(aP.restricted===true){if(R.isDefinedAndNotNull(aP.explicitRestrictions)){aq.each(aP.explicitRestrictions,function(aQ,aS){var aR=aS.requiredPermission;if(!aL.has(aR.id)){aL.set(aR.id,aR.label)}if(!aM.has(aR.id)){aM.set(aR.id,[])}aM.get(aR.id).push({type:R.formatType(aP),bundle:R.formatBundle(aP.bundle),explanation:R.escapeHtml(aS.explanation)})})}else{if(!aL.has(aF.value)){aL.set(aF.value,aF.text)}if(!aM.has(aF.value)){aM.set(aF.value,[])}aM.get(aF.value).push({type:R.formatType(aP),bundle:R.formatBundle(aP.bundle),explanation:R.escapeHtml(aP.usageRestriction)})}}aH.add(aP.bundle.group);aC.addItem({id:aN+++"",label:R.substringAfterLast(aP.type,"."),type:aP.type,bundle:aP.bundle,description:R.escapeHtml(aP.description),restricted:aP.restricted,usageRestriction:R.escapeHtml(aP.usageRestriction),explicitRestrictions:aP.explicitRestrictions,tags:aP.tags.join(", ")});aq.each(aP.tags,function(aR,aQ){aK.push(aQ.toLowerCase())})});aC.endUpdate();aC.reSort();aG.invalidate();K.addComponentRestrictions(aM,aL);aq("#total-reporting-task-types, #displayed-reporting-task-types").text(aI.reportingTaskTypes.length);aq("#reporting-task-tag-cloud").tagcloud({tags:aK,select:d,remove:d});var aJ=[{text:"all groups",value:""}];aH.forEach(function(aO){aJ.push({text:aO,value:aO})});aq("#reporting-task-bundle-group-combo").combo({options:aJ,select:d})}).fail(Z.handleAjaxError);var aE=[aq.ui.keyCode.UP,aq.ui.keyCode.PAGE_UP,aq.ui.keyCode.DOWN,aq.ui.keyCode.PAGE_DOWN];aq("#reporting-task-type-filter").off("keyup").on("keyup",function(aK){var aJ=aK.keyCode?aK.keyCode:aK.which;if(aq.inArray(aJ,aE)!==-1){return}if(aJ===aq.ui.keyCode.ENTER){var aH=aG.getSelectedRows();if(aH.length>0){var aI=aG.getDataItem(aH[0]);if(i(aI)){l()}}}else{d()}});w.addKeydownListener("#reporting-task-type-filter",aG,aG.getData());aq("#new-reporting-task-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Add Reporting Task",buttons:[{buttonText:"Add",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},disabled:function(){var aH=aG.getSelectedRows();if(aH.length>0){var aI=aG.getDataItem(aH[0]);return i(aI)===false}else{return aG.getData().getLength()===0}},handler:{click:function(){l()}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){aq(this).modal("hide")}}}],handler:{close:function(){ax();aq("#reporting-task-type-filter").val("");aq("#reporting-task-tag-cloud").tagcloud("clearSelectedTags");aq("#reporting-task-bundle-group-combo").combo("setSelectedOption",{value:""});d();var aH=aq("#reporting-task-types-table").data("gridInstance");aH.setSelectedRows([]);aH.resetActiveCell()},resize:function(){aq("#reporting-task-type-description").width(aq("#reporting-task-description-container").innerWidth()-1).text(aq("#reporting-task-type-description").attr("title")).ellipsis()}}})};var U=function(){var aF=[{id:"type",name:"Type",field:"label",formatter:R.typeFormatter,sortable:true,resizable:true},{id:"version",name:"Version",field:"version",formatter:R.typeVersionFormatter,sortable:true,resizable:true},{id:"tags",name:"Tags",field:"tags",sortable:true,resizable:true,formatter:R.genericValueFormatter}];var aC=new z.Data.DataView({inlineFilters:false});aC.setItems([]);aC.setFilterArgs({searchString:y()});aC.setFilter(az);R.sortType({columnId:"type",sortAsc:true},aC);var aG=new z.Grid("#parameter-provider-types-table",aC,aF,p);aG.setSelectionModel(new z.RowSelectionModel());aG.registerPlugin(new z.AutoTooltips());aG.setSortColumn("type",true);aG.onSort.subscribe(function(aI,aH){R.sortType({columnId:aH.sortCol.field,sortAsc:aH.sortAsc},aC)});aG.onSelectedRowsChanged.subscribe(function(aK,aI){if(aq.isArray(aI.rows)&&aI.rows.length===1){var aM=aI.rows[0];var aL=aG.getDataItem(aM);if(R.isDefinedAndNotNull(aL)){aq("#parameter-provider-description-container").show();if(R.isBlank(aL.description)){aq("#parameter-provider-type-description").attr("title","").html('<span class="unset">No description specified</span>')}else{aq("#parameter-provider-type-description").width(aq("#parameter-provider-description-container").innerWidth()-1).html(aL.description).ellipsis()}var aH=R.formatBundle(aL.bundle);var aJ=R.formatType(aL);aq("#parameter-provider-type-name").text(aJ).attr("title",aJ);aq("#parameter-provider-type-bundle").text(aH).attr("title",aH);aq("#selected-parameter-provider-name").text(aL.label);aq("#selected-parameter-provider-type").text(aL.type).data("bundle",aL.bundle);aq("#new-parameter-provider-dialog").modal("refreshButtons")}}});aG.onDblClick.subscribe(function(aI,aH){var aJ=aG.getDataItem(aH.row);if(i(aJ)){X(aJ.type,aJ.bundle)}});aG.onViewportChanged.subscribe(function(aI,aH){R.cleanUpTooltips(aq("#parameter-provider-types-table"),"div.view-usage-restriction")});aC.onRowCountChanged.subscribe(function(aI,aH){aG.updateRowCount();aG.render();aq("#displayed-parameter-provider-types").text(aH.current)});aC.onRowsChanged.subscribe(function(aI,aH){aG.invalidateRows(aH.rows);aG.render()});aC.syncGridSelection(aG,true);aq("#parameter-provider-types-table").data("gridInstance",aG).on("mouseenter","div.slick-cell",function(aK){var aL=aq(this).find("div.view-usage-restriction");if(aL.length&&!aL.data("qtip")){var aJ=aq(this).find("span.row-id").text();var aI=aC.getItemById(aJ);if(aI.restricted===true){var aM=aq("<div></div>");if(R.isBlank(aI.usageRestriction)){aM.append(aq('<p style="margin-bottom: 3px;"></p>').text("Requires the following permissions:"))}else{aM.append(aq('<p style="margin-bottom: 3px;"></p>').text(aI.usageRestriction+" Requires the following permissions:"))}var aH=[];if(R.isDefinedAndNotNull(aI.explicitRestrictions)){aq.each(aI.explicitRestrictions,function(aN,aP){var aO=aP.requiredPermission;aH.push("'"+aO.label+"' - "+R.escapeHtml(aP.explanation))})}else{aH.push("Access to restricted components regardless of restrictions.")}aM.append(R.formatUnorderedList(aH));aL.qtip(aq.extend({},R.config.tooltipConfig,{content:aM,position:{container:aq("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});var aE=R.getPolicyTypeListing("restricted-components");aq.ajax({type:"GET",url:ac.urls.parameterProviderTypes,dataType:"json"}).done(function(aI){var aN=0;var aK=[];var aH=new Set();var aM=new Map();var aL=new Map();aC.beginUpdate();aq.each(aI.parameterProviderTypes,function(aO,aP){if(aP.restricted===true){if(R.isDefinedAndNotNull(aP.explicitRestrictions)){aq.each(aP.explicitRestrictions,function(aQ,aS){var aR=aS.requiredPermission;if(!aL.has(aR.id)){aL.set(aR.id,aR.label)}if(!aM.has(aR.id)){aM.set(aR.id,[])}aM.get(aR.id).push({type:R.formatType(aP),bundle:R.formatBundle(aP.bundle),explanation:R.escapeHtml(aS.explanation)})})}else{if(!aL.has(aE.value)){aL.set(aE.value,aE.text)}if(!aM.has(aE.value)){aM.set(aE.value,[])}aM.get(aE.value).push({type:R.formatType(aP),bundle:R.formatBundle(aP.bundle),explanation:R.escapeHtml(aP.usageRestriction)})}}aH.add(aP.bundle.group);aC.addItem({id:aN+++"",label:R.substringAfterLast(aP.type,"."),type:aP.type,bundle:aP.bundle,description:R.escapeHtml(aP.description),restricted:aP.restricted,usageRestriction:R.escapeHtml(aP.usageRestriction),explicitRestrictions:aP.explicitRestrictions,tags:aP.tags.join(", ")});aq.each(aP.tags,function(aR,aQ){aK.push(aQ.toLowerCase())})});aC.endUpdate();aC.reSort();aG.invalidate();K.addComponentRestrictions(aM,aL);aq("#total-parameter-provider-types, #displayed-parameter-provider-types").text(aI.parameterProviderTypes.length);aq("#parameter-provider-tag-cloud").tagcloud({tags:aK,select:k,remove:k});var aJ=[{text:"all groups",value:""}];aH.forEach(function(aO){aJ.push({text:aO,value:aO})});aq("#parameter-provider-bundle-group-combo").combo({options:aJ,select:k})}).fail(Z.handleAjaxError);var aD=[aq.ui.keyCode.UP,aq.ui.keyCode.PAGE_UP,aq.ui.keyCode.DOWN,aq.ui.keyCode.PAGE_DOWN];aq("#parameter-provider-type-filter").off("keyup").on("keyup",function(aK){var aJ=aK.keyCode?aK.keyCode:aK.which;if(aq.inArray(aJ,aD)!==-1){return}if(aJ===aq.ui.keyCode.ENTER){var aH=aG.getSelectedRows();if(aH.length>0){var aI=aG.getDataItem(aH[0]);if(i(aI)){ad()}}}else{k()}});w.addKeydownListener("#parameter-provider-type-filter",aG,aG.getData());aq("#new-parameter-provider-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Add Parameter Provider",buttons:[{buttonText:"Add",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},disabled:function(){var aH=aG.getSelectedRows();if(aH.length>0){var aI=aG.getDataItem(aH[0]);return i(aI)===false}else{return aG.getData().getLength()===0}},handler:{click:function(){ad()}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){aq(this).modal("hide")}}}],handler:{close:function(){q();aq("#parameter-provider-type-filter").val("");aq("#parameter-provider-tag-cloud").tagcloud("clearSelectedTags");aq("#parameter-provider-bundle-group-combo").combo("setSelectedOption",{value:""});k();var aH=aq("#parameter-provider-types-table").data("gridInstance");aH.setSelectedRows([]);aH.resetActiveCell()},resize:function(){aq("#parameter-provider-type-description").width(aq("#parameter-provider-description-container").innerWidth()-1).text(aq("#parameter-provider-type-description").attr("title")).ellipsis()}}})};var an=function(){S();var aG=function(aQ,aO,aL,aJ,aI){if(!aI.permissions.canRead){return""}var aP='<div title="View Details" class="pointer view-reporting-task fa fa-info-circle"></div>';aP+='<div title="View Documentation" class="pointer reporting-task-usage fa fa-book"></div>';var aM=!R.isBlank(aI.component.comments);var aN=!R.isEmpty(aI.component.validationErrors);var aK=!R.isEmpty(aI.bulletins);if(aM){aP+='<div class="pointer has-comments fa fa-comment"></div>'}if(aN){aP+='<div class="pointer has-errors fa fa-warning" ></div>'}if(aK){aP+='<div class="has-bulletins fa fa-sticky-note-o"></div>'}if(aM||aN||aK){aP+='<span class="hidden row-id">'+R.escapeHtml(aI.component.id)+"</span>"}return aP};var aH=function(aQ,aP,aO,aK,aI){var aM="",aN="";if(aI.status.validationStatus==="VALIDATING"){aM="validating fa fa-spin fa-circle-notch";aN="Validating"}else{if(aI.status.validationStatus==="INVALID"){aM="invalid fa fa-warning";aN="Invalid"}else{if(aI.status.runStatus==="STOPPED"){aN="Stopped";aM="fa fa-stop stopped"}else{if(aI.status.runStatus==="RUNNING"){aN="Running";aM="fa fa-play running"}else{aN="Disabled";aM="icon icon-enable-false disabled"}}}}var aL="";if(R.isDefinedAndNotNull(aI.status.activeThreadCount)&&aI.status.activeThreadCount>0){aL="("+aI.status.activeThreadCount+")"}var aJ='<div layout="row"><div class="'+aM+'"></div>';return aJ+'<div class="status-text">'+R.escapeHtml(aN)+'</div><div style="float: left; margin-left: 4px;">'+R.escapeHtml(aL)+"</div></div>"};var aF=function(aR,aP,aN,aM,aI){var aQ="";var aJ=aI.permissions.canWrite;var aL=aI.permissions.canRead;var aO=aI.operatePermissions.canWrite||aJ;var aK=aI.status.runStatus==="STOPPED";if(aI.status.runStatus==="RUNNING"){if(aO){aQ+='<div title="Stop" class="pointer stop-reporting-task fa fa-stop"></div>'}}else{if(aK||aI.status.runStatus==="DISABLED"){if(aL&&aJ){aQ+='<div title="Edit" class="pointer edit-reporting-task fa fa-pencil"></div>'}if(aO&&aI.status.runStatus==="STOPPED"&&aI.status.validationStatus==="VALID"){aQ+='<div title="Start" class="pointer start-reporting-task fa fa-play"></div>'}if(aL&&aJ&&aI.component.multipleVersionsAvailable===true){aQ+='<div title="Change Version" class="pointer change-version-reporting-task fa fa-exchange"></div>'}if(aL&&aJ&&R.canModifyController()){aQ+='<div title="Remove" class="pointer delete-reporting-task fa fa-trash"></div>'}}}if(aL&&aJ&&aI.component.persistsState===true){aQ+='<div title="View State" class="pointer view-state-reporting-task fa fa-tasks"></div>'}if(K.isManagedAuthorizer()&&R.canAccessTenants()){aQ+='<div title="Access Policies" class="pointer edit-access-policies fa fa-key"></div>'}return aQ};var aC=[{id:"moreDetails",name:"&nbsp;",resizable:false,formatter:aG,sortable:true,width:100,maxWidth:100,toolTip:"Sorts based on presence of bulletins"},{id:"name",name:"Name",sortable:true,resizable:true,formatter:P},{id:"type",name:"Type",formatter:R.instanceTypeFormatter,sortable:true,resizable:true},{id:"bundle",name:"Bundle",formatter:R.instanceBundleFormatter,sortable:true,resizable:true},{id:"state",name:"Run Status",sortable:true,resizeable:true,formatter:aH}];aC.push({id:"actions",name:"&nbsp;",resizable:false,formatter:aF,sortable:false,width:115,maxWidth:115});var aE=new z.Data.DataView({inlineFilters:false});aE.setItems([]);I({columnId:"name",sortAsc:true},aE);var aD=new z.Grid("#reporting-tasks-table",aE,aC,p);aD.setSelectionModel(new z.RowSelectionModel());aD.registerPlugin(new z.AutoTooltips());aD.setSortColumn("name",true);aD.onSort.subscribe(function(aJ,aI){I({columnId:aI.sortCol.id,sortAsc:aI.sortAsc},aE)});aD.onClick.subscribe(function(aM,aJ){var aL=aq(aM.target);var aK=aE.getItem(aJ.row);if(aD.getColumns()[aJ.cell].id==="actions"){if(aL.hasClass("edit-reporting-task")){ab.showConfiguration(aK)}else{if(aL.hasClass("start-reporting-task")){ab.start(aK)}else{if(aL.hasClass("stop-reporting-task")){ab.stop(aK)}else{if(aL.hasClass("delete-reporting-task")){ab.promptToDeleteReportingTask(aK)}else{if(aL.hasClass("view-state-reporting-task")){var aI=aK.status.runStatus==="STOPPED"&&aK.status.activeThreadCount===0;aB.showState(aK,aI)}else{if(aL.hasClass("change-version-reporting-task")){V.promptForVersionChange(aK)}else{if(aL.hasClass("edit-access-policies")){L.showReportingTaskPolicy(aK);aq("#shell-close-button").click()}}}}}}}}else{if(aD.getColumns()[aJ.cell].id==="moreDetails"){if(aL.hasClass("view-reporting-task")){ab.showDetails(aK)}else{if(aL.hasClass("reporting-task-usage")){aq("#shell-close-button").click();o.showPage("../nifi-docs/documentation?"+aq.param({select:aK.component.type,group:aK.component.bundle.group,artifact:aK.component.bundle.artifact,version:aK.component.bundle.version})).done(function(){au.showSettings()})}}}}});aE.onRowCountChanged.subscribe(function(aJ,aI){aD.updateRowCount();aD.render()});aE.onRowsChanged.subscribe(function(aJ,aI){aD.invalidateRows(aI.rows);aD.render()});aE.syncGridSelection(aD,true);aq("#reporting-tasks-table").data("gridInstance",aD).on("mouseenter","div.slick-cell",function(aM){var aP=aq(this).find("div.has-comments");if(aP.length&&!aP.data("qtip")){var aN=aq(this).find("span.row-id").text();var aJ=aE.getItemById(aN);var aK=R.escapeHtml(aJ.component.comments);var aQ=R.formatNewLines(aK);if(R.isDefinedAndNotNull(aQ)){aP.qtip(aq.extend({},R.config.tooltipConfig,{content:aQ,position:{target:"mouse",viewport:aq("#shell-container"),adjust:{x:8,y:8,method:"flipinvert flipinvert"}}}))}}var aI=aq(this).find("div.has-errors");if(aI.length&&!aI.data("qtip")){var aN=aq(this).find("span.row-id").text();var aJ=aE.getItemById(aN);var aQ=R.formatUnorderedList(aJ.component.validationErrors);if(R.isDefinedAndNotNull(aQ)){aI.qtip(aq.extend({},R.config.tooltipConfig,{content:aQ,position:{target:"mouse",viewport:aq("#shell-container"),adjust:{x:8,y:8,method:"flipinvert flipinvert"}}}))}}var aO=aq(this).find("div.has-bulletins");if(aO.length&&!aO.data("qtip")){var aN=aq(this).find("span.row-id").text();var aJ=aE.getItemById(aN);var aL=R.getFormattedBulletins(aJ.bulletins);var aQ=R.formatUnorderedList(aL);if(R.isDefinedAndNotNull(aQ)){aO.qtip(aq.extend({},R.config.tooltipConfig,{content:aQ,position:{target:"mouse",viewport:aq("#shell-container"),adjust:{x:8,y:8,method:"flipinvert flipinvert"}}}))}}})};var C=function(){return aq("#flow-analysis-rule-type-filter").val()};var aj=function(){var aC=aq("#flow-analysis-rule-types-table").data("gridInstance");if(R.isDefinedAndNotNull(aC)){var aD=aC.getData();aD.setFilterArgs({searchString:C()});aD.refresh();aq("#new-flow-analysis-rule-dialog").modal("refreshButtons");if(aD.getLength()>0){w.choseFirstRow(aC)}}};var aa=function(){aq("#flow-analysis-rule-type-description").attr("title","").text("");aq("#flow-analysis-rule-type-name").attr("title","").text("");aq("#flow-analysis-rule-type-bundle").attr("title","").text("");aq("#selected-flow-analysis-rule-name").text("");aq("#selected-flow-analysis-rule-type").text("").removeData("bundle");aq("#flow-analysis-rule-description-container").hide()};var ah=function(){aa();var aC=aq("#flow-analysis-rule-types-table").data("gridInstance");aC.resetActiveCell()};var ay=function(aK,aF){var aI=M(aK,aF);var aE=true;if(aI){var aJ=aq("#flow-analysis-rule-tag-cloud").tagcloud("getSelectedTags");var aH=aJ.length>0;if(aH){aE=B(aJ,aK.tags)}}var aG=true;if(aI&&aE){var aC=aq("#flow-analysis-rule-bundle-group-combo").combo("getSelectedOption");if(R.isDefinedAndNotNull(aC)&&aC.value!==""){aG=(aK.bundle.group===aC.value)}}var aD=aI&&aE&&aG;if(aD===false&&aq("#selected-flow-analysis-rule-type").text()===aK.type){ah()}return aD};var m=function(){var aD=aq("#selected-flow-analysis-rule-type").text();var aC=aq("#selected-flow-analysis-rule-type").data("bundle");if(aD===""){Y.showOkDialog({headerText:"Settings",dialogContent:"The type of flow analysis rule to create must be selected."})}else{ae(aD,aC)}};var ae=function(aD,aE){var aF={revision:E.getRevision({revision:{version:0}}),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:{type:aD,bundle:aE}};var aC=aq.ajax({type:"POST",url:ac.urls.createFlowAnalysisRule,data:JSON.stringify(aF),dataType:"json",contentType:"application/json"}).done(function(aI){var aG=aq("#flow-analysis-rules-table").data("gridInstance");var aH=aG.getData();aH.addItem(aq.extend({type:"FlowAnalysisRule",bulletins:[]},aI));aH.reSort();aG.invalidate();var aJ=aH.getRowById(aI.id);w.choseRow(aG,aJ);aG.scrollRowIntoView(aJ)}).fail(Z.handleAjaxError);aq("#new-flow-analysis-rule-dialog").modal("hide");return aC};var ao=function(){var aE=[{id:"type",name:"Type",field:"label",formatter:R.typeFormatter,sortable:true,resizable:true},{id:"version",name:"Version",field:"version",formatter:R.typeVersionFormatter,sortable:true,resizable:true},{id:"tags",name:"Tags",field:"tags",sortable:true,resizable:true,formatter:R.genericValueFormatter}];var aD=new z.Data.DataView({inlineFilters:false});aD.setItems([]);aD.setFilterArgs({searchString:C()});aD.setFilter(ay);R.sortType({columnId:"type",sortAsc:true},aD);var aC=new z.Grid("#flow-analysis-rule-types-table",aD,aE,p);aC.setSelectionModel(new z.RowSelectionModel());aC.registerPlugin(new z.AutoTooltips());aC.setSortColumn("type",true);aC.onSort.subscribe(function(aI,aH){R.sortType({columnId:aH.sortCol.field,sortAsc:aH.sortAsc},aD)});aC.onSelectedRowsChanged.subscribe(function(aM,aK){if(aq.isArray(aK.rows)&&aK.rows.length===1){var aH=aK.rows[0];var aJ=aC.getDataItem(aH);if(R.isDefinedAndNotNull(aJ)){aq("#flow-analysis-rule-description-container").show();if(R.isBlank(aJ.description)){aq("#flow-analysis-rule-type-description").attr("title","").html('<span class="unset">No description specified</span>')}else{aq("#flow-analysis-rule-type-description").width(aq("#flow-analysis-rule-description-container").innerWidth()-1).html(aJ.description).ellipsis()}var aI=R.formatBundle(aJ.bundle);var aL=R.formatType(aJ);aq("#flow-analysis-rule-type-name").text(aL).attr("title",aL);aq("#flow-analysis-rule-type-bundle").text(aI).attr("title",aI);aq("#selected-flow-analysis-rule-name").text(aJ.label);aq("#selected-flow-analysis-rule-type").text(aJ.type).data("bundle",aJ.bundle);aq("#new-flow-analysis-rule-dialog").modal("refreshButtons")}}});aC.onDblClick.subscribe(function(aJ,aI){var aH=aC.getDataItem(aI.row);if(i(aH)){ae(aH.type,aH.bundle)}});aC.onViewportChanged.subscribe(function(aI,aH){R.cleanUpTooltips(aq("#flow-analysis-rule-types-table"),"div.view-usage-restriction")});aD.onRowCountChanged.subscribe(function(aI,aH){aC.updateRowCount();aC.render();aq("#displayed-flow-analysis-rule-types").text(aH.current)});aD.onRowsChanged.subscribe(function(aI,aH){aC.invalidateRows(aH.rows);aC.render()});aD.syncGridSelection(aC,true);aq("#flow-analysis-rule-types-table").data("gridInstance",aC).on("mouseenter","div.slick-cell",function(aK){var aL=aq(this).find("div.view-usage-restriction");if(aL.length&&!aL.data("qtip")){var aJ=aq(this).find("span.row-id").text();var aI=aD.getItemById(aJ);if(aI.restricted===true){var aM=aq("<div></div>");if(R.isBlank(aI.usageRestriction)){aM.append(aq('<p style="margin-bottom: 3px;"></p>').text("Requires the following permissions:"))}else{aM.append(aq('<p style="margin-bottom: 3px;"></p>').text(aI.usageRestriction+" Requires the following permissions:"))}var aH=[];if(R.isDefinedAndNotNull(aI.explicitRestrictions)){aq.each(aI.explicitRestrictions,function(aN,aP){var aO=aP.requiredPermission;aH.push("'"+aO.label+"' - "+R.escapeHtml(aP.explanation))})}else{aH.push("Access to restricted components regardless of restrictions.")}aM.append(R.formatUnorderedList(aH));aL.qtip(aq.extend({},R.config.tooltipConfig,{content:aM,position:{container:aq("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});var aG=R.getPolicyTypeListing("restricted-components");aq.ajax({type:"GET",url:ac.urls.flowAnalysisRuleTypes,dataType:"json"}).done(function(aI){var aN=0;var aK=[];var aH=new Set();var aM=new Map();var aL=new Map();aD.beginUpdate();aq.each(aI.flowAnalysisRuleTypes,function(aO,aP){if(aP.restricted===true){if(R.isDefinedAndNotNull(aP.explicitRestrictions)){aq.each(aP.explicitRestrictions,function(aQ,aS){var aR=aS.requiredPermission;if(!aL.has(aR.id)){aL.set(aR.id,aR.label)}if(!aM.has(aR.id)){aM.set(aR.id,[])}aM.get(aR.id).push({type:R.formatType(aP),bundle:R.formatBundle(aP.bundle),explanation:R.escapeHtml(aS.explanation)})})}else{if(!aL.has(aG.value)){aL.set(aG.value,aG.text)}if(!aM.has(aG.value)){aM.set(aG.value,[])}aM.get(aG.value).push({type:R.formatType(aP),bundle:R.formatBundle(aP.bundle),explanation:R.escapeHtml(aP.usageRestriction)})}}aH.add(aP.bundle.group);aD.addItem({id:aN++,label:R.substringAfterLast(aP.type,"."),type:aP.type,bundle:aP.bundle,description:R.escapeHtml(aP.description),restricted:aP.restricted,usageRestriction:R.escapeHtml(aP.usageRestriction),explicitRestrictions:aP.explicitRestrictions,tags:aP.tags.join(", ")});aq.each(aP.tags,function(aR,aQ){aK.push(aQ.toLowerCase())})});aD.endUpdate();aD.reSort();aC.invalidate();K.addComponentRestrictions(aM,aL);aq("#total-flow-analysis-rule-types, #displayed-flow-analysis-rule-types").text(aI.flowAnalysisRuleTypes.length);aq("#flow-analysis-rule-tag-cloud").tagcloud({tags:aK,select:aj,remove:aj});var aJ=[{text:"all groups",value:""}];aH.forEach(function(aO){aJ.push({text:aO,value:aO})});aq("#flow-analysis-rule-bundle-group-combo").combo({options:aJ,select:aj})}).fail(Z.handleAjaxError);var aF=[aq.ui.keyCode.UP,aq.ui.keyCode.PAGE_UP,aq.ui.keyCode.DOWN,aq.ui.keyCode.PAGE_DOWN];aq("#flow-analysis-rule-type-filter").off("keyup").on("keyup",function(aK){var aJ=aK.keyCode?aK.keyCode:aK.which;if(aq.inArray(aJ,aF)!==-1){return}if(aJ===aq.ui.keyCode.ENTER){var aH=aC.getSelectedRows();if(aH.length>0){var aI=aC.getDataItem(aH[0]);if(i(aI)){m()}}}else{aj()}});w.addKeydownListener("#flow-analysis-rule-type-filter",aC,aC.getData());aq("#new-flow-analysis-rule-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Add Flow Analysis Rule",buttons:[{buttonText:"Add",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},disabled:function(){var aH=aC.getSelectedRows();if(aH.length>0){var aI=aC.getDataItem(aH[0]);return i(aI)===false}else{return aC.getData().getLength()===0}},handler:{click:function(){m()}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){aq(this).modal("hide")}}}],handler:{close:function(){aa();aq("#flow-analysis-rule-type-filter").val("");aq("#flow-analysis-rule-tag-cloud").tagcloud("clearSelectedTags");aq("#flow-analysis-rule-bundle-group-combo").combo("setSelectedOption",{value:""});aj();var aH=aq("#flow-analysis-rule-types-table").data("gridInstance");aH.setSelectedRows([]);aH.resetActiveCell()},resize:function(){aq("#flow-analysis-rule-type-description").width(aq("#flow-analysis-rule-description-container").innerWidth()-1).text(aq("#flow-analysis-rule-type-description").attr("title")).ellipsis()}}})};var ar=function(){ao();var aE=function(aO,aJ,aN,aL,aI){if(!aI.permissions.canRead){return""}var aK='<div title="View Details" class="pointer view-flow-analysis-rule fa fa-info-circle"></div>';aK+='<div title="View Documentation" class="pointer flow-analysis-rule-usage fa fa-book"></div>';var aM=!R.isEmpty(aI.component.validationErrors);if(aM){aK+='<div class="pointer has-errors fa fa-warning" ></div>';aK+='<span class="hidden row-id">'+R.escapeHtml(aI.component.id)+"</span>"}return aK};var aH=function(aP,aJ,aO,aK,aI){var aN="",aL="";if(aI.status.validationStatus==="VALIDATING"){aN="validating fa fa-spin fa-circle-notch";aL="Validating"}else{if(aI.status.validationStatus==="INVALID"){aN="invalid fa fa-warning";aL="Invalid"}else{if(aI.status.runStatus==="DISABLED"){aN='disabled icon icon-enable-false"';aL="Disabled"}else{if(aI.status.runStatus==="ENABLED"){aN="enabled fa fa-flash";aL="Enabled"}}}}var aM='<div layout="row"><div class="'+aN+'"></div>';return aM+'<div class="status-text">'+aL+"</div></div>"};var aG=function(aR,aP,aM,aL,aI){var aQ="";var aJ=aI.permissions.canWrite;var aK=aI.permissions.canRead;var aO=aJ||(aI.operatePermissions&&aI.operatePermissions.canWrite);var aN=aI.status.runStatus==="DISABLED";if(aK){if(aJ&&aN){aQ+='<div class="pointer edit-flow-analysis-rule fa fa-gear" title="Configure"></div>'}else{aQ+='<div class="pointer view-flow-analysis-rule fa fa-gear" title="View Configuration"></div>'}}if(aO){if(aI.status.runStatus==="ENABLED"){aQ+='<div class="pointer disable-flow-analysis-rule icon icon-enable-false" title="Disable"></div>'}else{if(aN&&aI.status.validationStatus==="VALID"){aQ+='<div class="pointer enable-flow-analysis-rule fa fa-flash" title="Enable"></div>'}}}if(aN&&aK&&aJ&&aI.component.multipleVersionsAvailable===true){aQ+='<div title="Change Version" class="pointer change-version-flow-analysis-rule fa fa-exchange"></div>'}if(aN&&aK&&aJ&&R.canModifyController()){aQ+='<div title="Remove" class="pointer delete-flow-analysis-rule fa fa-trash"></div>'}if(aK&&aJ&&aI.component.persistsState===true){aQ+='<div title="View State" class="pointer view-state-flow-analysis-rule fa fa-tasks"></div>'}return aQ};var aD=[{id:"moreDetails",name:"&nbsp;",resizable:false,formatter:aE,sortable:true,width:90,maxWidth:90,toolTip:"Sorts based on presence of bulletins"},{id:"name",name:"Name",sortable:true,resizable:true,formatter:P},{id:"type",name:"Type",formatter:R.instanceTypeFormatter,sortable:true,resizable:true},{id:"bundle",name:"Bundle",formatter:R.instanceBundleFormatter,sortable:true,resizable:true},{id:"state",name:"Status",sortable:true,resizeable:true,formatter:aH}];aD.push({id:"actions",name:"&nbsp;",resizable:false,formatter:aG,sortable:false,width:115,maxWidth:115});var aF=new z.Data.DataView({inlineFilters:false});aF.setItems([]);I({columnId:"name",sortAsc:true},aF);var aC=new z.Grid("#flow-analysis-rules-table",aF,aD,p);aC.setSelectionModel(new z.RowSelectionModel());aC.registerPlugin(new z.AutoTooltips());aC.setSortColumn("name",true);aC.onSort.subscribe(function(aJ,aI){I({columnId:aI.sortCol.id,sortAsc:aI.sortAsc},aF)});aC.onClick.subscribe(function(aM,aJ){var aL=aq(aM.target);var aK=aF.getItem(aJ.row);if(aC.getColumns()[aJ.cell].id==="actions"){if(aL.hasClass("edit-flow-analysis-rule")){at.showConfiguration(aK)}else{if(aL.hasClass("view-flow-analysis-rule")){at.showDetails(aK)}else{if(aL.hasClass("enable-flow-analysis-rule")){at.enable(aK)}else{if(aL.hasClass("disable-flow-analysis-rule")){at.disable(aK)}else{if(aL.hasClass("delete-flow-analysis-rule")){at.promptToDeleteFlowAnalysisRule(aK)}else{if(aL.hasClass("view-state-flow-analysis-rule")){var aI=aK.status.runStatus==="DISABLED";aB.showState(aK,aI)}else{if(aL.hasClass("change-version-flow-analysis-rule")){V.promptForVersionChange(aK)}else{if(aL.hasClass("edit-access-policies")){L.showFlowAnalysisRulePolicy(aK);aq("#shell-close-button").click()}}}}}}}}}else{if(aC.getColumns()[aJ.cell].id==="moreDetails"){if(aL.hasClass("view-flow-analysis-rule")){at.showDetails(aK)}else{if(aL.hasClass("flow-analysis-rule-usage")){aq("#shell-close-button").click();o.showPage("../nifi-docs/documentation?"+aq.param({select:aK.component.type,group:aK.component.bundle.group,artifact:aK.component.bundle.artifact,version:aK.component.bundle.version})).done(function(){au.showSettings()})}}}}});aF.onRowCountChanged.subscribe(function(aJ,aI){aC.updateRowCount();aC.render()});aF.onRowsChanged.subscribe(function(aJ,aI){aC.invalidateRows(aI.rows);aC.render()});aF.syncGridSelection(aC,true);aq("#flow-analysis-rules-table").data("gridInstance",aC).on("mouseenter","div.slick-cell",function(aM){var aL=aq(this).find("div.has-errors");if(aL.length&&!aL.data("qtip")){var aI=aq(this).find("span.row-id").text();var aJ=aF.getItemById(aI);var aK=R.formatUnorderedList(aJ.component.validationErrors);if(R.isDefinedAndNotNull(aK)){aL.qtip(aq.extend({},R.config.tooltipConfig,{content:aK,position:{target:"mouse",viewport:aq("#shell-container"),adjust:{x:8,y:8,method:"flipinvert flipinvert"}}}))}}})};var g=function(){aq("#new-registry-client-dialog").modal({headerText:"Add Registry Client",buttons:[{buttonText:"Add",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){am()}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){aq(this).modal("hide")}}}]})};var J=function(){var aF=function(aM,aJ,aL,aK,aI){if(!aI.permissions.canRead){return'<span class="blank">'+R.escapeHtml(aI.id)+"</span>"}return R.escapeHtml(aI.component.description)};var aD=function(aN,aJ,aM,aL,aI){var aK="";if(R.canModifyController()){aK+='<div title="Edit" class="pointer edit-registry fa fa-pencil"></div>';aK+='<div title="Remove" class="pointer remove-registry fa fa-trash"></div>'}return aK};var aH=function(aP,aJ,aO,aL,aI){if(!aI.permissions.canRead){return""}var aK="";var aM=!R.isEmpty(aI.component.validationErrors);var aN=!R.isEmpty(aI.bulletins);if(aM){aK+='<div class="pointer has-errors fa fa-warning"></div>'}if(aN){aK+='<div class="has-bulletins fa fa-sticky-note-o"></div>'}if(aM||aN){aK+='<span class="hidden row-id">'+R.escapeHtml(aI.id)+"</span>"}return aK};var aG=[{id:"moreDetails",name:"&nbsp;",resizable:false,formatter:aH,sortable:true,width:90,maxWidth:90},{id:"name",name:"Name",field:"name",formatter:P,sortable:true,resizable:true},{id:"description",name:"Description",field:"description",formatter:aF,sortable:true,resizable:true},{id:"type",name:"Type",field:"type",formatter:R.instanceTypeFormatter,sortable:true,resizable:true},{id:"bundle",name:"Bundle",field:"bundle",formatter:R.instanceBundleFormatter,sortable:true,resizable:true}];aG.push({id:"actions",name:"&nbsp;",resizable:false,formatter:aD,sortable:false,width:90,maxWidth:90});var aE=new z.Data.DataView({inlineFilters:false});aE.setItems([]);I({columnId:"name",sortAsc:true},aE);var aC=new z.Grid("#registries-table",aE,aG,p);aC.setSelectionModel(new z.RowSelectionModel());aC.registerPlugin(new z.AutoTooltips());aC.setSortColumn("name",true);aC.onSort.subscribe(function(aJ,aI){I({columnId:aI.sortCol.id,sortAsc:aI.sortAsc},aE)});aq("#registries-table").data("gridInstance",aC).on("mouseenter","div.slick-cell",function(aL){var aJ=aq(this).find("div.has-errors");if(aJ.length&&!aJ.data("qtip")){var aK=aq(this).find("span.row-id").text();var aM=aE.getItemById(aK);var aI=R.formatUnorderedList(aM.component.validationErrors);if(R.isDefinedAndNotNull(aI)){aJ.qtip(aq.extend({},R.config.tooltipConfig,{content:aI,position:{target:"mouse",viewport:aq("#shell-container"),adjust:{x:8,y:8,method:"flipinvert flipinvert"}}}))}}});aC.onClick.subscribe(function(aK,aI){var aJ=aq(aK.target);var aL=aE.getItem(aI.row);if(aC.getColumns()[aI.cell].id==="actions"){if(aJ.hasClass("edit-registry")){D(aL)}else{if(aJ.hasClass("remove-registry")){ag(aL)}}}else{if(aC.getColumns()[aI.cell].id==="moreDetails"){}}});aE.onRowCountChanged.subscribe(function(aJ,aI){aC.updateRowCount();aC.render()});aE.onRowsChanged.subscribe(function(aJ,aI){aC.invalidateRows(aI.rows);aC.render()});aE.syncGridSelection(aC,true);aq("#registries-table").data("gridInstance",aC)};var h=function(){U();var aD=function(aO,aI,aN,aK,aH){if(!aH.permissions.canRead){return""}var aJ='<div title="View Details" class="pointer view-parameter-provider fa fa-info-circle"></div>';aJ+='<div title="View Documentation" class="pointer parameter-provider-usage fa fa-book"></div>';var aL=!R.isEmpty(aH.component.validationErrors);var aM=!R.isEmpty(aH.bulletins);if(aL){aJ+='<div class="pointer has-errors fa fa-warning" ></div>'}if(aM){aJ+='<div class="has-bulletins fa fa-sticky-note-o"></div>'}if(aL||aM){aJ+='<span class="hidden row-id">'+R.escapeHtml(aH.component.id)+"</span>"}return aJ};var aF=function(aQ,aO,aM,aL,aH){var aP="";var aI=aH.permissions.canWrite;var aJ=aH.permissions.canRead;var aN=aJ?!R.isEmpty(aH.component.validationErrors):null;var aK=true;if(aJ&&aH.component.referencingParameterContexts){(aH.component.referencingParameterContexts).every(function(aR){return aK=aR.permissions.canRead})}if(aJ&&aI){aP+='<div title="Edit" class="pointer edit-parameter-provider fa fa-pencil"></div>';if(aK&&!aN){aP+='<div title="Fetch Parameters" class="pointer fetch-parameter-provider fa fa-arrow-circle-down"></div>'}}if(aJ&&aI&&R.canModifyController()){aP+='<div title="Remove" class="pointer delete-parameter-provider fa fa-trash"></div>'}if(K.isManagedAuthorizer()&&R.canAccessTenants()){aP+='<div title="Access Policies" class="pointer edit-access-policies fa fa-key"></div>'}return aP};var aC=[{id:"moreDetails",name:"&nbsp;",resizable:false,formatter:aD,sortable:true,width:90,maxWidth:90,toolTip:"Sorts based on presence of bulletins"},{id:"name",name:"Name",sortable:true,resizable:true,formatter:P},{id:"type",name:"Type",formatter:R.instanceTypeFormatter,sortable:true,resizable:true},{id:"bundle",name:"Bundle",formatter:R.instanceBundleFormatter,sortable:true,resizable:true}];aC.push({id:"actions",name:"&nbsp;",resizable:false,formatter:aF,sortable:false,width:115,maxWidth:115});var aG=new z.Data.DataView({inlineFilters:false});aG.setItems([]);I({columnId:"name",sortAsc:true},aG);var aE=new z.Grid("#parameter-providers-table",aG,aC,p);aE.setSelectionModel(new z.RowSelectionModel());aE.registerPlugin(new z.AutoTooltips());aE.setSortColumn("name",true);aE.onSort.subscribe(function(aI,aH){I({columnId:aH.sortCol.id,sortAsc:aH.sortAsc},aG)});aE.onClick.subscribe(function(aK,aI){var aJ=aq(aK.target);var aH=aG.getItem(aI.row);if(aE.getColumns()[aI.cell].id==="actions"){if(aJ.hasClass("edit-parameter-provider")){r.showConfiguration(aH)}else{if(aJ.hasClass("fetch-parameter-provider")){r.showFetchDialog(aH)}else{if(aJ.hasClass("delete-parameter-provider")){r.promptToDeleteParameterProvider(aH)}else{if(aJ.hasClass("edit-access-policies")){L.showParameterProviderPolicy(aH);aq("#shell-close-button").click()}}}}}else{if(aE.getColumns()[aI.cell].id==="moreDetails"){if(aJ.hasClass("view-parameter-provider")){r.showDetails(aH)}else{if(aJ.hasClass("parameter-provider-usage")){aq("#shell-close-button").click();o.showPage("../nifi-docs/documentation?"+aq.param({select:aH.component.type,group:aH.component.bundle.group,artifact:aH.component.bundle.artifact,version:aH.component.bundle.version})).done(function(){au.showSettings()})}}}}});aG.onRowCountChanged.subscribe(function(aI,aH){aE.updateRowCount();aE.render()});aG.onRowsChanged.subscribe(function(aI,aH){aE.invalidateRows(aH.rows);aE.render()});aG.syncGridSelection(aE,true);aq("#parameter-providers-table").data("gridInstance",aE).on("mouseenter","div.slick-cell",function(aO){var aM=aq(this).find("div.has-errors");if(aM.length&&!aM.data("qtip")){var aI=aq(this).find("span.row-id").text();var aL=aG.getItemById(aI);var aK=R.formatUnorderedList(aL.component.validationErrors);if(R.isDefinedAndNotNull(aK)){aM.qtip(aq.extend({},R.config.tooltipConfig,{content:aK,position:{target:"mouse",viewport:aq("#shell-container"),adjust:{x:8,y:8,method:"flipinvert flipinvert"}}}))}}var aJ=aq(this).find("div.has-bulletins");if(aJ.length&&!aJ.data("qtip")){var aI=aq(this).find("span.row-id").text();var aH=aG.getItemById(aI);var aN=R.getFormattedBulletins(aH.bulletins);var aK=R.formatUnorderedList(aN);if(R.isDefinedAndNotNull(aK)){aJ.qtip(aq.extend({},R.config.tooltipConfig,{content:aK,position:{target:"mouse",viewport:aq("#shell-container"),adjust:{x:8,y:8,method:"flipinvert flipinvert"}}}))}}})};var D=function(aC){f(aC.id).done(function(aD){var aE=aD.component.properties;var aF=aD.component.descriptors;aq("#registry-id-config").text(aD.id);aq("#registry-name-config").val(aD.component.name);aq("#registry-type-config").text(aD.component.type);aq("#registry-description-config").val(aD.component.description);aq("#registry-configuration-dialog").modal("setHeaderText","Edit Registry Client").modal("setButtonModel",[{buttonText:"Update",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){v(aD.id)}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){aq(this).modal("hide")}}}]).modal("show");aq("#registry-properties").propertytable("clear");aq("#registry-properties").propertytable("loadProperties",aE,aF);aq("#registry-configuration-dialog").data("registryDetails",aD)})};var ag=function(aC){Y.showYesNoDialog({headerText:"Delete Registry",dialogContent:"Delete registry '"+R.escapeHtml(aC.component.name)+"'?",yesHandler:function(){e(aC)}})};var e=function(aD){var aC=E.getRevision(aD);aq.ajax({type:"DELETE",url:aD.uri+"?"+aq.param({version:aC.version,clientId:aC.clientId,disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged()}),dataType:"json"}).done(function(aF){var aE=aq("#registries-table").data("gridInstance");var aG=aE.getData();aG.deleteItem(aD.id);H()}).fail(Z.handleAjaxError)};var ai=function(){var aC=function(){aq("#read-only-maximum-timer-driven-thread-count-field").addClass("unset").text("Unauthorized")};var aH=function(aL){if(aL){aq("#general-settings div.editable").show();aq("#general-settings div.read-only").hide();aq("#settings-save").show()}else{aq("#general-settings div.editable").hide();aq("#general-settings div.read-only").show();aq("#settings-save").hide()}};var aG=aq.Deferred(function(aL){aq.ajax({type:"GET",url:ac.urls.controllerConfig,dataType:"json"}).done(function(aM){if(aM.permissions.canWrite){aq("#maximum-timer-driven-thread-count-field").removeClass("unset").val(aM.component.maxTimerDrivenThreadCount);aH(true);aq("#settings-save").off("click").on("click",function(){N(aM.revision.version)})}else{if(aM.permissions.canRead){aq("#read-only-maximum-timer-driven-thread-count-field").removeClass("unset").text(aM.component.maxTimerDrivenThreadCount)}else{aC()}aH(false)}aL.resolve()}).fail(function(aO,aM,aN){if(aO.status===403){aC();aH(false);aL.resolve()}else{aL.reject(aO,aM,aN)}})}).promise();var aE=ac.urls.api+"/flow/controller/controller-services";var aJ=G.loadControllerServices(aE,ak());var aI=x();var aK=T();var aF=A();var aD=b();return aq.when(aG,aJ,aI,aI,aF,aD).done(function(aN,aM){var aL=aM[0];aq("#settings-last-refreshed").text(aL.currentTime)}).fail(Z.handleAjaxError)};var x=function(){return aq.ajax({type:"GET",url:ac.urls.reportingTasks,dataType:"json"}).done(function(aC){var aG=[];aq.each(aC.reportingTasks,function(aI,aH){aG.push(aq.extend({type:"ReportingTask",bulletins:[]},aH))});var aE=aq("#reporting-tasks-table");R.cleanUpTooltips(aE,"div.has-comments");R.cleanUpTooltips(aE,"div.has-errors");R.cleanUpTooltips(aE,"div.has-bulletins");var aD=aE.data("gridInstance");var aF=aD.getData();aF.setItems(aG);aF.reSort();aD.invalidate()})};var T=function(){return aq.ajax({type:"GET",url:ac.urls.flowAnalysisRules,dataType:"json"}).done(function(aD){var aG=[];aq.each(aD.flowAnalysisRules,function(aI,aH){aG.push(aq.extend({type:"FlowAnalysisRule",bulletins:[]},aH))});var aF=aq("#flow-analysis-rules-table");R.cleanUpTooltips(aF,"div.has-errors");R.cleanUpTooltips(aF,"div.has-bulletins");var aC=aF.data("gridInstance");var aE=aC.getData();aE.setItems(aG);aE.reSort();aC.invalidate()})};var A=function(){return aq.ajax({type:"GET",url:ac.urls.registries,dataType:"json"}).done(function(aC){var aD=[];aq.each(aC.registries,function(aG,aH){aD.push(aq.extend({type:"Registry"},aH))});var aE=aq("#registries-table").data("gridInstance");var aF=aE.getData();aF.setItems(aD);aF.reSort();aE.invalidate()})};var b=function(){return aq.ajax({type:"GET",url:ac.urls.parameterProviders,dataType:"json"}).done(function(aC){var aF=[];aq.each(aC.parameterProviders,function(aH,aI){aF.push(aq.extend({type:"ParameterProvider",bulletins:[]},aI))});var aE=aq("#parameter-providers-table");R.cleanUpTooltips(aE,"div.has-errors");R.cleanUpTooltips(aE,"div.has-bulletins");var aD=aE.data("gridInstance");var aG=aD.getData();aG.setItems(aF);aG.reSort();aD.invalidate()})};var n=function(){return aq.ajax({type:"GET",url:ac.urls.registryTypes,dataType:"json"}).done(function(aC){var aD=[];aC.flowRegistryClientTypes.forEach(function(aE){aD.push({text:R.substringAfterLast(aE.type,".")+" ("+aE.bundle.version+")",value:aE.type,description:aE.description||""})});aq("#new-registry-type-combo").combo({options:aD})})};var aw=function(){var aC=aq("#registry-configuration-dialog").data("registryDetails");if(aq("#registry-name-config").val()!==aC.component.name){return true}if(aq("#registry-description-config").val()!==aC.component.description){return true}return aq("#registry-properties").propertytable("isSaveRequired")};var F=function(){return aq.Deferred(function(aC){aq("#registry-properties").propertytable("saveRow");if(aw()){Y.showYesNoDialog({headerText:"Save",dialogContent:"Save changes before going to this Controller Service?",noHandler:function(){aC.resolve()},yesHandler:function(){var aD=aq("#registry-configuration-dialog").data("registryDetails");v(aD.id).done(function(){aC.resolve()}).fail(function(){aC.reject()})}})}else{aC.resolve()}}).promise()};var O=function(aD,aC){var aE=aq("#registry-configuration-dialog").data("registryDetails");return aq.ajax({type:"GET",url:aE.uri+"/descriptors",data:{propertyName:aD,sensitive:aC},dataType:"json"}).fail(Z.handleAjaxError)};var av=function(aC){o.showContent("#settings").done(function(){W()});aq("#settings-tabs").find(aC?'[name="'+aC+'"]':".selected-tab").click();au.resetTableSize()};var W=function(){aq("#settings-save").mouseout()};var a=function(aE){var aC=aq("#registries-table").data("gridInstance");var aD=aC.getData();aD.updateItem(aE.id,aq.extend({type:"Registry"},aE))};var f=function(aF){var aC=aq("#registries-table").data("gridInstance");var aD=aC.getData();var aE=aD.getItemById(aF);return aq.ajax({type:"GET",url:aE.uri,dataType:"json"}).done(function(aG){a(aG)}).fail(Z.handleAjaxError)};var au={init:function(){aq("#settings-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"General",tabContentId:"general-settings-tab-content"},{name:"Management Controller Services",tabContentId:"controller-services-tab-content"},{name:"Reporting Tasks",tabContentId:"reporting-tasks-tab-content"},{name:"Flow Analysis Rules",tabContentId:"flow-analysis-rules-tab-content"},{name:"Registry Clients",tabContentId:"registries-tab-content"},{name:"Parameter Providers",tabContentId:"parameter-providers-tab-content"}],select:function(){var aC=aq(this).text();if(aC==="General"){aq("#controller-cs-availability").hide();aq("#new-service-or-task").hide();aq("#settings-save").show()}else{var aD=false;if(R.isDefinedAndNotNull(R.currentUser)){aD=R.currentUser.controllerPermissions.canWrite===true}if(aD){aq("#new-service-or-task").show();aq("div.controller-settings-table").css("top","32px");aq("#new-service-or-task").attr("title",function(){if(aC==="Management Controller Services"){aq("#settings-save").hide();return"Create a new controller level controller service"}else{if(aC==="Reporting Tasks"){aq("#settings-save").hide();return"Create a new reporting task"}else{if(aC==="Flow Analysis Rules"){aq("#settings-save").hide();return"Create a Flow Analysis Rule"}else{if(aC==="Registry Clients"){aq("#settings-save").hide();return"Register a new registry client"}else{if(aC==="Parameter Providers"){aq("#settings-save").hide();return"Add a new parameter provider"}}}}}})}else{aq("#new-service-or-task").hide();aq("div.controller-settings-table").css("top","0")}if(aC==="Management Controller Services"){aq("#controller-cs-availability").show()}else{if(aC==="Reporting Tasks"||aC==="Flow Analysis Rules"||aC==="Registry Clients"||aC==="Parameter Providers"){aq("#controller-cs-availability").hide()}}au.resetTableSize()}}});aq("#settings-refresh-button").click(function(){ai()});aq("#new-service-or-task").on("click",function(){var aG=aq("#settings-tabs li.selected-tab").text();if(aG==="Management Controller Services"){var aF=ac.urls.api+"/controller/controller-services";G.promptNewControllerService(aF,ak())}else{if(aG==="Reporting Tasks"){aq("#new-reporting-task-dialog").modal("show");var aI=aq("#reporting-task-types-table").data("gridInstance");if(R.isDefinedAndNotNull(aI)){var aD=aI.getData();aI.resizeCanvas();if(aD.getLength()>0){w.choseFirstRow(aI)}}aq("#reporting-task-type-filter").focus()}else{if(aG==="Flow Analysis Rules"){aq("#new-flow-analysis-rule-dialog").modal("show");var aC=aq("#flow-analysis-rule-types-table").data("gridInstance");if(R.isDefinedAndNotNull(aC)){var aH=aC.getData();aC.resizeCanvas();if(aH.getLength()>0){w.choseFirstRow(aC)}}aq("#flow-analysis-rule-type-filter").focus()}else{if(aG==="Registry Clients"){aq("#new-registry-name").val("");aq("#new-registry-description").val("");n().done(function(){aq("#new-registry-client-dialog").modal("show");aq("#new-registry-name").focus()})}else{if(aG==="Parameter Providers"){aq("#new-parameter-provider-dialog").modal("show");var aJ=aq("#parameter-provider-types-table").data("gridInstance");if(R.isDefinedAndNotNull(aJ)){var aE=aJ.getData();aJ.resizeCanvas();if(aE.getLength()>0){w.choseFirstRow(aJ)}}aq("#parameter-provider-type-filter").focus()}}}}}});aq("#registry-properties").propertytable({readOnly:false,supportsGoTo:true,dialogContainer:"#new-registry-property-container",descriptorDeferred:O,controllerServiceCreatedDeferred:function(aD){var aC=ac.urls.api+"/flow/controller/controller-services";return G.loadControllerServices(aC,aq("#controller-services-table"))},goToServiceDeferred:F});aq("#registry-configuration-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"Settings",tabContentId:"registry-configuration-settings-tab-content"},{name:"Properties",tabContentId:"registry-configuration-properties-tab-content"}],select:function(){var aC=aq(this).text();if(aC==="Properties"){aq("#registry-properties").propertytable("resetTableSize")}}});aq("#registry-configuration-dialog").modal({scrollableContentStyle:"scrollable",handler:{close:function(){aq("#registry-id-config").text("");aq("#registry-name-config").val("");aq("#registry-type-config").val("");aq("#registry-description-config").val("")}}});j();G.init(ak(),au.showSettings);an();ar();J();g();h()},reloadRegistry:function(aC){return f(aC)},resetTableSize:function(){G.resetTableSize(ak());var aF=aq("#reporting-tasks-table").data("gridInstance");if(R.isDefinedAndNotNull(aF)){aF.resizeCanvas()}var aC=aq("#flow-analysis-rules-table").data("gridInstance");if(R.isDefinedAndNotNull(aC)){aC.resizeCanvas()}var aE=aq("#parameter-providers-table").data("gridInstance");if(R.isDefinedAndNotNull(aE)){aE.resizeCanvas()}var aD=aq("#registries-table").data("gridInstance");if(R.isDefinedAndNotNull(aD)){aD.resizeCanvas()}},showSettings:function(aC){return ai().done(function(){av(aC)})},loadSettings:function(){return ai()},selectControllerService:function(aC){var aD=ak().data("gridInstance");var aE=aD.getData();var aF=aE.getRowById(aC);w.choseRow(aD,aF);aD.scrollRowIntoView(aF);aq("#settings-tabs").find("li:eq(1)").click()},selectReportingTask:function(aC){var aF=aq("#reporting-tasks-table").data("gridInstance");var aD=aF.getData();var aE=aD.getRowById(aC);w.choseRow(aF,aE);aF.scrollRowIntoView(aE);aq("#settings-tabs").find("li:eq(2)").click()},selectFlowAnalysisRule:function(aF){var aC=aq("#flow-analysis-rules-table").data("gridInstance");var aD=aC.getData();var aE=aD.getRowById(aF);w.choseRow(aC,aE);aC.scrollRowIntoView(aE);aq("#settings-tabs").find("li:eq(3)").click()},setBulletins:function(aE,aC){if(aq("#controller-services-table").data("gridInstance")){G.setBulletins(ak(),aE)}var aD=aq("#reporting-tasks-table").data("gridInstance");var aG=aD.getData();aG.beginUpdate();if(!R.isEmpty(aC)){var aH=new Map(aC.map(function(aI){return[aI.sourceId,aI]}));aH.forEach(function(aI,aJ){var aK=aG.getItemById(aJ);if(R.isDefinedAndNotNull(aK)){aG.updateItem(aJ,aq.extend(aK,{bulletins:aI}))}})}else{var aF=aG.getItems();aq.each(aF,function(aI,aJ){aG.updateItem(aJ.id,aq.extend(aJ,{bulletins:[]}))})}aG.endUpdate()}};return au}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","d3","nf.ErrorHandler","nf.Common","nf.Dialog","nf.Storage","nf.Client","nf.ProcessGroup","nf.Shell","nf.CanvasUtils"],function(h,k,j,f,g,i,l,c,d,e){return(nf.ProcessGroupConfiguration=b(h,k,j,f,g,i,l,c,d,e))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ProcessGroupConfiguration=b(require("jquery"),require("d3"),require("nf.ErrorHandler"),require("nf.Common"),require("nf.Dialog"),require("nf.Storage"),require("nf.Client"),require("nf.ProcessGroup"),require("nf.Shell"),require("nf.CanvasUtils")))}else{nf.ProcessGroupConfiguration=b(a.$,a.d3,a.nf.ErrorHandler,a.nf.Common,a.nf.Dialog,a.nf.Storage,a.nf.Client,a.nf.ProcessGroup,a.nf.Shell,a.nf.CanvasUtils)}}}(this,function(e,t,g,i,k,f,u,h,r,o){var d;var m;var b;var s={urls:{api:"../nifi-api",parameterContexts:"../nifi-api/flow/parameter-contexts"}};var l=function(){};var c=function(){return e("#process-group-controller-services-table")};var a=function(v,x){var y;if(e("#parameter-contexts-recursive").hasClass("checkbox-unchecked")){y="DIRECT_CHILDREN"}else{y="ALL_DESCENDANTS"}var w={revision:u.getRevision({revision:{version:v}}),disconnectedNodeAcknowledged:f.isDisconnectionAcknowledged(),processGroupUpdateStrategy:y,component:{id:x,name:e("#process-group-name").val(),comments:e("#process-group-comments").val(),parameterContext:{id:e("#process-group-parameter-context-combo").combo("getSelectedOption").value},executionEngine:e("#process-group-execution-engine-combo").combo("getSelectedOption").value,maxConcurrentTasks:e("#process-group-max-concurrent-tasks").val(),statelessFlowTimeout:e("#process-group-stateless-flow-timeout").val(),flowfileConcurrency:e("#process-group-flowfile-concurrency-combo").combo("getSelectedOption").value,flowfileOutboundPolicy:e("#process-group-outbound-policy-combo").combo("getSelectedOption").value,defaultFlowFileExpiration:e("#process-group-default-flowfile-expiration").val(),defaultBackPressureObjectThreshold:e("#process-group-default-back-pressure-object-threshold").val(),defaultBackPressureDataSizeThreshold:e("#process-group-default-back-pressure-data-size-threshold").val(),logFileSuffix:e("#process-group-log-file-suffix").val()}};e.ajax({type:"PUT",data:JSON.stringify(w),url:s.urls.api+"/process-groups/"+encodeURIComponent(x),dataType:"json",contentType:"application/json"}).done(function(A){if(A.permissions.canRead&&A.component.parentGroupId===o.getGroupId()){h.set(A)}k.showOkDialog({headerText:"Process Group Configuration",dialogContent:"Process group configuration successfully saved."});e("#process-group-configuration-save").off("click").on("click",function(){a(A.revision.version,x)});var z=s.urls.api+"/flow/process-groups/"+encodeURIComponent(x)+"/controller-services";e.ajax({type:"GET",url:z,dataType:"json",data:{uiOnly:true}}).done(function(B){var D=c();i.cleanUpTooltips(D,"div.has-errors");var C=D.data("gridInstance");var E=C.getData();e.each(B.controllerServices,function(G,F){E.updateItem(F.id,F)})});o.reload()}).fail(g.handleConfigurationUpdateAjaxError)};var n=function(x){var A=function(){e("#read-only-process-group-name").text("Unauthorized");e("#read-only-process-group-comments").text("Unauthorized");e("#read-only-process-group-execution-engine").text("Unauthorized");e("#read-only-process-group-max-concurrent-tasks").text("Unauthorized");e("#read-only-process-group-stateless-flow-timeout").text("Unauthorized");e("#read-only-process-group-default-flowfile-expiration").text("Unauthorized");e("#read-only-process-group-default-back-pressure-object-threshold").text("Unauthorized");e("#read-only-process-group-default-back-pressure-data-size-threshold").text("Unauthorized")};var z=function(C){if(C){e("#process-group-configuration div.editable").show();e("#process-group-configuration div.read-only").hide();e("#process-group-configuration-save").show()}else{e("#process-group-configuration div.editable").hide();e("#process-group-configuration div.read-only").show();e("#process-group-configuration-save").hide()}};e("#process-group-id").text(x);e("#process-group-configuration-refresh-button").off("click").on("click",function(){n(x)});e("#add-process-group-configuration-controller-service").off("click").on("click",function(){var D=e("#process-group-configuration-tabs li.selected-tab").text();if(D==="Controller Services"){var C=s.urls.api+"/process-groups/"+encodeURIComponent(x)+"/controller-services";d.promptNewControllerService(C,c())}});var y=e.Deferred(function(C){e.ajax({type:"GET",url:s.urls.api+"/process-groups/"+encodeURIComponent(x),dataType:"json",data:{uiOnly:true}}).done(function(D){e("#process-group-configuration").data("process-group",D);var G=D.component;if(D.permissions.canWrite){e("#process-group-name").removeClass("unset").val(G.name);e("#process-group-comments").removeClass("unset").val(G.comments);e("#process-group-execution-engine-combo").removeClass("unset").combo({options:[{text:"Inherited",value:"INHERITED",description:"Use whichever Execution Engine the parent Process Group is configured to use."},{text:"Standard",value:"STANDARD",description:"Use the Standard NiFi Execution Engine. See the User Guide for additional details."},{text:"Stateless",value:"STATELESS",description:"Run the dataflow using the Stateless Execution Engine. See the User Guide for additional detials."}],selectedOption:{value:G.executionEngine},select:function(I){if(I.value==="STATELESS"){e("#stateless-group-options").show()}else{e("#stateless-group-options").hide()}}});e("#process-group-max-concurrent-tasks").removeClass("unset").val(G.maxConcurrentTasks);e("#process-group-stateless-flow-timeout").removeClass("unset").val(G.statelessFlowTimeout);e("#process-group-flowfile-concurrency-combo").removeClass("unset").combo({options:[{text:"Single FlowFile Per Node",value:"SINGLE_FLOWFILE_PER_NODE",description:"Only a single FlowFile is to be allowed to enter the Process Group at a time on each node in the cluster. While that FlowFile may be split into many or spawn many children, no additional FlowFiles will be allowed to enter the Process Group through a Local Input Port until the previous FlowFile - and all of its child/descendent FlowFiles - have been processed."},{text:"Single Batch Per Node",value:"SINGLE_BATCH_PER_NODE",description:"When an Input Port pulls a FlowFile into the Process Group, FlowFiles will continue to be ingested into the Process Group until all input queues have been emptied. At that point, no additional FlowFiles will be allowed to enter the Process Group through a Local Input Port until the entire batch of FlowFiles has been processed."},{text:"Unbounded",value:"UNBOUNDED",description:"The number of FlowFiles that can be processed concurrently is unbounded."}],selectedOption:{value:G.flowfileConcurrency}});e("#process-group-outbound-policy-combo").removeClass("unset").combo({options:[{text:"Stream When Available",value:"STREAM_WHEN_AVAILABLE",description:"FlowFiles that are queued up to be transferred out of a Process Group by an Output Port will be transferred out of the Process Group as soon as they are available."},{text:"Batch Output",value:"BATCH_OUTPUT",description:"FlowFiles that are queued up to be transferred out of a Process Group by an Output Port will remain queued until all FlowFiles in the Process Group are ready to be transferred out of the group. The FlowFiles will then be transferred out of the group. This setting will be ignored if the FlowFile Concurrency is Unbounded."}],selectedOption:{value:G.flowfileOutboundPolicy}});e("#process-group-default-flowfile-expiration").removeClass("unset").val(G.defaultFlowFileExpiration);e("#process-group-default-back-pressure-object-threshold").removeClass("unset").val(G.defaultBackPressureObjectThreshold);e("#process-group-default-back-pressure-data-size-threshold").removeClass("unset").val(G.defaultBackPressureDataSizeThreshold);e("#process-group-log-file-suffix").removeClass("unset").val(G.logFileSuffix);e("#process-group-configuration-header-text").text(G.name+" Configuration");z(true);e("#process-group-configuration-save").off("click").on("click",function(){a(D.revision.version,D.id)})}else{if(D.permissions.canRead){e("#read-only-process-group-name").text(G.name);e("#read-only-process-group-comments").text(G.comments);var E;if(G.executionEngine=="INHERITED"){E="Inherited"}else{if(G.executionEngine=="STANDARD"){E="Standard"}else{if(G.executionEngine=="STATELESS"){E="Stateless"}}}e("#read-only-process-group-execution-engine").text(E);e("#read-only-process-group-max-concurrent-tasks").text(G.maxConcurrentTasks);e("#read-only-process-group-stateless-flow-timeout").text(G.maxConcurrentTasks);var H;if(G.flowfileConcurrency=="UNBOUNDED"){H="Unbounded"}else{if(G.flowfileConcurrency=="SINGLE_FLOWFILE_PER_NODE"){H="Single FlowFile Per Node"}else{if(G.flowfileConcurrency=="SINGLE_BATCH_PER_NODE"){H="Single Batch Per Node"}else{H="Unknown"}}}e("#read-only-process-group-flowfile-concurrency").text(H);var F=G.flowfileOutboundPolicy=="BATCH_OUTPUT"?"Batch Output":"Stream When Available";e("#read-only-process-group-outbound-policy").text(F);e("#process-group-configuration-header-text").text(G.name+" Configuration");e("#process-group-default-flowfile-expiration").text(G.defaultFlowFileExpiration);e("#process-group-default-back-pressure-object-threshold").text(G.defaultBackPressureObjectThreshold);e("#process-group-default-back-pressure-data-size-threshold").text(G.defaultBackPressureDataSizeThreshold);e("#read-only-process-group-default-flowfile-expiration").text(G.defaultFlowFileExpiration);e("#read-only-process-group-default-back-pressure-object-threshold").text(G.defaultBackPressureObjectThreshold);e("#read-only-process-group-default-back-pressure-data-size-threshold").text(G.defaultBackPressureDataSizeThreshold);e("#read-only-process-group-log-file-suffix").text(G.logFileSuffix)}else{A()}z(false)}C.resolve(D)}).fail(function(G,D,E){if(G.status===403){var F;if(x===o.getGroupId()){F={permissions:{canRead:false,canWrite:o.canWriteCurrentGroup()}}}else{F=h.get(x)}e("#process-group-configuration").data("process-group",F);A();z(false);C.resolve(F)}else{C.reject(G,D,E)}})}).promise();var v=s.urls.api+"/flow/process-groups/"+encodeURIComponent(x)+"/controller-services";var w=d.loadControllerServices(v,c());var B=e.ajax({type:"GET",url:s.urls.parameterContexts,dataType:"json"});return e.when(y,w,B).done(function(F,I,D){var J=I[0];var K=D[0];e("#process-group-configuration-last-refreshed").text(J.currentTime);var E=K.parameterContexts;var L=[{text:"No parameter context",value:null}];var C=i.sortParameterContextsAlphabeticallyBasedOnAuthorization(E);C.forEach(function(N){var M;if(N.permissions.canRead){M={text:N.component.name,value:N.id,description:N.component.description}}else{M={disabled:true,text:N.id,value:N.id}}L.push(M)});var H={text:"Create new parameter context...",value:undefined,optionClass:"unset"};if(i.canModifyParameterContexts()){L.push(H)}var G={options:L,select:function(M){var N=this;if(typeof M.value==="undefined"){e("#parameter-context-dialog").modal("setHeaderText","Add Parameter Context").modal("setButtonModel",[{buttonText:"Apply",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},disabled:function(){if(e("#parameter-context-name").val()!==""){return false}return true},handler:{click:function(){m.addParameterContext(function(P){L.pop();var O={text:P.component.name,value:P.component.id,description:P.component.description};L.push(O);if(i.canModifyParameterContexts()){L.push(H)}G.selectedOption={value:P.component.id};N.combo("destroy").combo(G)})}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){e(this).modal("hide")}}}]).modal("show");if(e("#parameter-context-dialog").hasClass("read-only")){e("#parameter-context-dialog").removeClass("read-only");e("#parameter-context-dialog").addClass("edit-mode")}if(!e("#parameter-context-id-setting").hasClass("hidden")){e("#parameter-context-id-setting").addClass("hidden")}e("#parameter-context-name").focus()}}};if(i.isDefinedAndNotNull(F.parameterContext)){G.selectedOption={value:F.parameterContext.id}}e("#process-group-parameter-context-combo").combo("destroy").combo(G);e("#parameter-contexts-recursive").removeClass().addClass("nf-checkbox checkbox-unchecked")}).fail(g.handleAjaxError)};var p=function(){r.showContent("#process-group-configuration").done(function(){q()});e("#process-group-configuration-tabs").find(".selected-tab").click();j.resetTableSize()};var q=function(){e("#process-group-configuration").removeData("process-group");e("#process-group-configuration-save").mouseout();e("#process-group-id").text("");e("#process-group-name").val("");e("#process-group-comments").val("");e("#process-group-execution-engine").val("INHERITED");e("#process-group-max-concurrent-tasks").val("1");e("#process-group-stateless-flow-timeout").val("1 min");e("#process-group-default-flowfile-expiration").val("");e("#process-group-default-back-pressure-object-threshold").val("");e("#process-group-default-back-pressure-data-size-threshold").val("");e("#process-group-configuration-header-text").text("Process Group Configuration")};var j={init:function(w,v){d=w;m=v;e("#process-group-configuration-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"General",tabContentId:"general-process-group-configuration-tab-content"},{name:"Controller Services",tabContentId:"process-group-controller-services-tab-content"}],select:function(){var y=e("#process-group-configuration").data("process-group");var z=i.isDefinedAndNotNull(y)?y.permissions.canWrite:false;var x=e(this).text();if(x==="General"){e("#flow-cs-availability").hide();e("#add-process-group-configuration-controller-service").hide();if(z){e("#process-group-configuration-save").show()}else{e("#process-group-configuration-save").hide()}}else{e("#flow-cs-availability").show();e("#process-group-configuration-save").hide();if(z){e("#add-process-group-configuration-controller-service").show();e("#process-group-controller-services-tab-content").css("top","32px")}else{e("#add-process-group-configuration-controller-service").hide();e("#process-group-controller-services-tab-content").css("top","0")}j.resetTableSize()}}});l();d.init(c())},resetTableSize:function(){d.resetTableSize(c())},showConfiguration:function(v){return n(v).done(p)},loadConfiguration:function(v){return n(v)},selectControllerService:function(v){var w=c().data("gridInstance");var x=w.getData();var y=x.getRowById(v);w.setSelectedRows([y]);w.scrollRowIntoView(y);e("#process-group-configuration-tabs").find("li:eq(1)").click()}};return j}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.ErrorHandler"],function(c,d,e){return(nf.ConnectionDetails=b(c,d,e))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ConnectionDetails=b(require("jquery"),require("nf.Common"),require("nf.ErrorHandler")))}else{nf.ConnectionDetails=b(a.$,a.nf.Common,a.nf.ErrorHandler)}}}(this,function(d,b,g){var j=function(o,q,p){if(p.type==="PROCESSOR"){return k(o,q,p)}else{if(p.type==="FUNNEL"){return l(o,q,p)}else{if(p.type==="REMOTE_OUTPUT_PORT"){return f(o,q,p)}else{return n(o,q,p)}}}};var k=function(o,q,p){return d.Deferred(function(r){d.ajax({type:"GET",url:"../nifi-api/processors/"+encodeURIComponent(p.id),dataType:"json"}).done(function(s){var t=s.component;var u=d('<div class="label"></div>').text(t.name).addClass("ellipsis").attr("title",t.name);var v=d("<div></div>").text(b.substringAfterLast(t.type,".")).addClass("ellipsis").attr("title",b.substringAfterLast(t.type,"."));d("#read-only-connection-source-label").text("From processor");d("#read-only-connection-source").append(u).append(v);d("#read-only-connection-source-group-name").text(q);r.resolve()}).fail(function(w,s,t){if(w.status===403){var u=d('<div class="label"></div>').text(p.name).addClass("ellipsis").attr("title",p.name);var v=d("<div></div>").text("Processor").addClass("ellipsis").attr("title","Processor");d("#read-only-connection-source-label").text("From processor");d("#read-only-connection-source").append(u).append(v);d("#read-only-connection-source-group-name").text(q);r.resolve()}else{r.reject(w,s,t)}})}).promise()};var l=function(o,q,p){return d.Deferred(function(r){d("#read-only-connection-source-label").text("From funnel");d("#read-only-connection-source").text("funnel").attr("title","funnel");d("#read-only-connection-source-group-name").text(q);r.resolve()}).promise()};var f=function(o,q,p){return d.Deferred(function(r){d.ajax({type:"GET",url:"../nifi-api/remote-process-groups/"+encodeURIComponent(p.groupId),dataType:"json"}).done(function(s){var t=s.component;d("#read-only-connection-source-label").text("From output");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(t.name);d("#read-only-connection-source-group div.setting-name").text("Within Remote Group");d("#read-only-connection-remote-source-url").text(t.targetUri).show();r.resolve()}).fail(function(u,s,t){if(u.status===403){d("#read-only-connection-source-label").text("From output");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(p.groupId);d("#read-only-connection-source-group div.setting-name").text("Within Remote Group");r.resolve()}else{r.reject(u,s,t)}})}).promise()};var n=function(o,q,p){return d.Deferred(function(r){if(o===p.groupId){d("#read-only-connection-source-label").text("From input");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(q);r.resolve()}else{d.ajax({type:"GET",url:"../nifi-api/process-groups/"+encodeURIComponent(p.groupId),dataType:"json"}).done(function(s){var t=s.component;d("#read-only-connection-source-label").text("From output");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(t.name);r.resolve()}).fail(function(u,s,t){if(u.status===403){d("#read-only-connection-source-label").text("From output");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(p.groupId);r.resolve()}else{r.reject(u,s,t)}})}}).promise()};var e=function(p,q,o){if(o.type==="PROCESSOR"){return a(p,q,o)}else{if(o.type==="FUNNEL"){return m(p,q,o)}else{if(o.type==="REMOTE_INPUT_PORT"){return i(p,q,o)}else{return c(p,q,o)}}}};var a=function(p,q,o){return d.Deferred(function(r){d.ajax({type:"GET",url:"../nifi-api/processors/"+encodeURIComponent(o.id),dataType:"json"}).done(function(s){var t=s.component;var u=d('<div class="label"></div>').text(t.name).addClass("ellipsis").attr("title",t.name);var v=d("<div></div>").text(b.substringAfterLast(t.type,".")).addClass("ellipsis").attr("title",b.substringAfterLast(t.type,"."));d("#read-only-connection-target-label").text("To processor");d("#read-only-connection-target").append(u).append(v);d("#read-only-connection-target-group-name").text(q);r.resolve()}).fail(function(w,s,t){if(w.status===403){var u=d('<div class="label"></div>').text(o.name).addClass("ellipsis").attr("title",o.name);var v=d("<div></div>").text("Processor").addClass("ellipsis").attr("title","Processor");d("#read-only-connection-target-label").text("To processor");d("#read-only-connection-target").append(u).append(v);d("#read-only-connection-target-group-name").text(q);r.resolve()}else{r.reject(w,s,t)}})}).promise()};var m=function(p,q,o){return d.Deferred(function(r){d("#read-only-connection-target-label").text("To funnel");d("#read-only-connection-target").text("funnel").attr("title","funnel");d("#read-only-connection-target-group-name").text(q);r.resolve()}).promise()};var i=function(p,q,o){return d.Deferred(function(r){d.ajax({type:"GET",url:"../nifi-api/remote-process-groups/"+encodeURIComponent(o.groupId),dataType:"json"}).done(function(s){var t=s.component;d("#read-only-connection-target-label").text("To input");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(t.name);d("#read-only-connection-target-group div.setting-name").text("Within Remote Group");d("#read-only-connection-remote-target-url").text(t.targetUri).show();r.resolve()}).fail(function(u,s,t){if(u.status===403){d("#read-only-connection-target-label").text("To input");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(o.groupId);d("#read-only-connection-target-group div.setting-name").text("Within Remote Group");r.resolve()}else{r.reject(u,s,t)}})}).promise()};var c=function(p,q,o){return d.Deferred(function(r){if(p===o.groupId){d("#read-only-connection-target-label").text("To output");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(q);r.resolve()}else{d.ajax({type:"GET",url:"../nifi-api/process-groups/"+encodeURIComponent(o.groupId),dataType:"json"}).done(function(s){var t=s.component;d("#read-only-connection-target-label").text("To input");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(t.name);r.resolve()}).fail(function(u,s,t){if(u.status===403){d("#read-only-connection-target-label").text("To input");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(o.groupId);r.resolve()}else{r.reject(u,s,t)}})}}).promise()};var h=function(o){d('<div class="available-relationship-container"></div>').append(d('<div class="relationship-name"></div>').text(o)).appendTo("#read-only-relationship-names")};return{init:function(){d("#connection-details-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"Details",tabContentId:"read-only-connection-details-tab-content"},{name:"Settings",tabContentId:"read-only-connection-settings-tab-content"}]});d("#connection-details").modal({headerText:"Connection Details",scrollableContentStyle:"scrollable",buttons:[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){d("#connection-details").modal("hide")}}}],handler:{close:function(){d("#read-only-relationship-names").empty();b.clearField("read-only-connection-name");b.clearField("read-only-connection-id");d("#read-only-connection-source-label").text("");d("#read-only-connection-source").empty();d("#read-only-connection-source-group div.setting-name").text("Within Group");d("#read-only-connection-source-group-name").text("");d("#read-only-connection-remote-source-url").text("").hide();d("#read-only-connection-target-label").text("");d("#read-only-connection-target").empty();d("#read-only-connection-target-group div.setting-name").text("Within Group");d("#read-only-connection-target-group-name").text("");d("#read-only-connection-remote-target-url").text("").hide();d("#read-only-relationship-names").css("border-width","0").empty();b.clearField("read-only-flow-file-expiration");b.clearField("read-only-back-pressure-object-threshold");b.clearField("read-only-back-pressure-data-size-threshold");b.clearField("read-only-load-balance-strategy");b.clearField("read-only-load-balance-partition-attribute");b.clearField("read-only-load-balance-compression");d("#read-only-prioritizers").empty()},open:function(){b.toggleScrollable(d("#"+this.find(".tab-container").attr("id")+"-content").get(0))}}})},showDetails:function(p,r){var q=d.ajax({type:"GET",url:"../nifi-api/flow/process-groups/"+encodeURIComponent(p),dataType:"json"});var o=d.ajax({type:"GET",url:"../nifi-api/connections/"+encodeURIComponent(r),dataType:"json"});d.when(q,o).done(function(w,u){var v=w[0];var x=u[0];if(x.permissions.canRead){var t=x.component;var z=v.permissions.canRead?v.processGroupFlow.breadcrumb.breadcrumb.name:v.processGroupFlow.id;var y=j(v.id,z,t.source);var s=e(v.id,z,t.destination);d.when(y,s).done(function(){var B=t.availableRelationships;var A=t.selectedRelationships;if(b.isDefinedAndNotNull(B)||b.isDefinedAndNotNull(A)){d.each(B,function(G,F){h(F)});d.each(A,function(H,F){if(d.inArray(F,B)===-1){var I=h(F);d(I).children("div.relationship-name").addClass("undefined")}var G=d("#read-only-relationship-names").children("div");d.each(G.children("div.relationship-name"),function(K,J){var L=d(J);if(L.text()===F){L.css("font-weight","bold")}})});d("#selected-relationship-text").show();d("#read-only-relationship-names-container").show()}else{d("#selected-relationship-text").hide();d("#read-only-relationship-names-container").hide()}b.populateField("read-only-connection-name",t.name);b.populateField("read-only-connection-id",t.id);b.populateField("read-only-flow-file-expiration",t.flowFileExpiration);b.populateField("read-only-back-pressure-object-threshold",t.backPressureObjectThreshold);b.populateField("read-only-back-pressure-data-size-threshold",t.backPressureDataSizeThreshold);b.populateField("read-only-load-balance-strategy",b.getComboOptionText(b.loadBalanceStrategyOptions,t.loadBalanceStrategy));b.populateField("read-only-load-balance-partition-attribute",t.loadBalancePartitionAttribute);b.populateField("read-only-load-balance-compression",b.getComboOptionText(b.loadBalanceCompressionOptions,t.loadBalanceCompression));if(t.loadBalanceStrategy==="PARTITION_BY_ATTRIBUTE"){d("#read-only-load-balance-partition-attribute-setting").show()}else{d("#read-only-load-balance-partition-attribute-setting").hide()}if(t.loadBalanceStrategy==="DO_NOT_LOAD_BALANCE"){d("#read-only-load-balance-compression-setting").hide()}else{d("#read-only-load-balance-compression-setting").show()}if(b.isDefinedAndNotNull(t.prioritizers)&&t.prioritizers.length>0){var E=d("<ol></ol>").css("list-style","decimal inside none");d.each(t.prioritizers,function(F,G){E.append(d("<li></li>").text(b.substringAfterLast(G,".")))});d("#read-only-prioritizers").append(E)}else{var C=d('<span class="unset">No value set</span>');d("#read-only-prioritizers").append(C)}d("#connection-details-tabs").find("li:first").click();d("#connection-details").modal("show");var D=d("#read-only-relationship-names");if(D.is(":visible")&&D.get(0).scrollHeight>Math.round(D.innerHeight())){D.css("border-width","1px")}}).fail(g.handleAjaxError)}}).fail(g.handleAjaxError)}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","d3","nf.Common","nf.Dialog","nf.ErrorHandler"],function(e,c,f,d,g){return(nf.StatusHistory=b(e,c,f,d,g))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.StatusHistory=b(require("jquery"),require("d3"),require("nf.Common"),require("nf.Dialog"),require("nf.ErrorHandler")))}else{nf.StatusHistory=b(a.$,a.d3,a.nf.Common,a.nf.Dialog,a.nf.ErrorHandler)}}}(this,function(e,y,i,t,g){var x={nifiInstanceId:"nifi-instance-id",nifiInstanceLabel:"NiFi",type:{processor:"Processor",inputPort:"Input Port",outputPort:"Output Port",processGroup:"Process Group",remoteProcessGroup:"Remote Process Group",connection:"Connection",funnel:"Funnel",template:"Template",label:"Label",node:"Node"},urls:{api:"../nifi-api"}};var w={DURATION:function(A){return i.formatDuration(A)},COUNT:function(A){if(A%1===0){return i.formatInteger(A)}else{return i.formatFloat(A)}},DATA_SIZE:function(A){return i.formatDataSize(A)},FRACTION:function(A){return i.formatFloat(A/1000000)}};var o=null;var c=null;var r=null;var d=null;var l=function(C,G,E,B,F){e("#status-history-last-refreshed").text(E.generated);var A={groupId:C,id:G,type:B,instances:[]};var D=E.fieldDescriptors;A.details=E.componentDetails;A.selectedDescriptor=i.isUndefined(F)?D[0]:F;if(i.isDefinedAndNotNull(E.aggregateSnapshots)&&E.aggregateSnapshots.length>1){A.instances.push({id:x.nifiInstanceId,label:x.nifiInstanceLabel,snapshots:E.aggregateSnapshots})}else{k();return}e.each(E.nodeSnapshots,function(I,H){if(i.isDefinedAndNotNull(H.statusSnapshots)&&H.statusSnapshots.length>1){A.instances.push({id:H.nodeId,label:H.address+":"+H.apiPort,snapshots:H.statusSnapshots})}});if(A.instances.length>0){e("#status-history-dialog").data("status-history",A);s(A,D)}else{k()}};var h=function(C){e("#status-history-last-refreshed").text(C.generated);var A={type:"Node",instances:[]};var B=C.fieldDescriptors;A.details=C.componentDetails;A.selectedDescriptor=B[0];if(i.isDefinedAndNotNull(C.aggregateSnapshots)&&C.aggregateSnapshots.length>1){A.instances.push({id:x.nifiInstanceId,label:x.nifiInstanceLabel,snapshots:C.aggregateSnapshots})}else{k();return}e.each(C.nodeSnapshots,function(E,D){if(i.isDefinedAndNotNull(D.statusSnapshots)&&D.statusSnapshots.length>1){A.instances.push({id:D.nodeId,label:D.address+":"+D.apiPort,snapshots:D.statusSnapshots})}});if(A.instances.length>0){e("#status-history-dialog").data("status-history",A);s(A,B)}else{k()}};var k=function(){t.showOkDialog({headerText:"Status History",dialogContent:"Insufficient history, please try again later."})};var s=function(A,B){if(d===null){d={}}e.each(A.instances,function(D,C){C.snapshots.forEach(function(G){var F=new Date();var E=F.getTimezoneOffset()*60*1000;G.timestamp=new Date(G.timestamp+E+o)})});n(B,A.selectedDescriptor)};var n=function(C,B){var A=[];e.each(C,function(D,E){A.push({text:E.label,value:E.field,description:i.escapeHtml(E.description)})});e("#status-history-metric-combo").combo({selectedOption:{value:B.field},options:A,select:function(E){var F=null;e.each(C,function(G,H){if(E.value===H.field){F=H;return false}});if(F!==null){if(r===null||r.field!==F.field){c=null}r=F;var D=e("#status-history-dialog").data("status-history");D.selectedDescriptor=F;e("#status-history-dialog").data("status-history",D);m()}}});e("#status-history-dialog").modal("show")};var a=function(){return e("#status-history-chart-container").parent().outerHeight()-e("#status-history-chart-control-container").outerHeight()-parseInt(e("#status-history-chart-control-container").css("margin-top"),10)};var z=function(){return e("body").height()-e("#status-history-chart-control-container").outerHeight()-e("#status-history-refresh-container").outerHeight()-parseInt(e("#status-history-chart-control-container").css("margin-top"),10)-parseInt(e(".dialog-content").css("top"))-parseInt(e(".dialog-content").css("bottom"))};var v=function(){return e("body").width()-e("#status-history-details").innerWidth()-parseInt(e("#status-history-dialog").css("left"),10)-parseInt(e(".dialog-content").css("left"))-parseInt(e(".dialog-content").css("right"))};var m=function(){var ai=e("#status-history-dialog");if(ai.is(":visible")){var ab=ai.data("status-history");var ah=ab.selectedDescriptor;e("#status-history-details").empty();var D=p("Status History");Object.entries(ab.details).forEach(function(aw,ax){j(D,aw,ax)});var F={top:15,right:20,bottom:25,left:75};var Y=y.scaleOrdinal(y.schemeCategory10);var C=[];e.each(ab.instances,function(ax,aw){C.push(aw.label)});Y.domain(C);var at=[];e.each(ab.instances,function(ax,aw){if(i.isUndefinedOrNull(d[aw.id])){d[aw.id]=true}at.push({id:aw.id,label:aw.label,values:e.map(aw.snapshots,function(ay){return{timestamp:ay.timestamp,value:ay.statusMetrics[ah.field]}}),visible:d[aw.id]===true})});var P=function(aw){if(aw.getMilliseconds()){return y.timeFormat(":%S.%L")(aw)}else{if(aw.getSeconds()){return y.timeFormat(":%S")(aw)}else{if(aw.getMinutes()||aw.getHours()){return y.timeFormat("%H:%M")(aw)}else{if(aw.getDay()&&aw.getDate()!==1){return y.timeFormat("%a %d")(aw)}else{if(aw.getDate()!==1){return y.timeFormat("%b %d")(aw)}else{if(aw.getMonth()){return y.timeFormat("%B")(aw)}else{return y.timeFormat("%Y")(aw)}}}}}}};var O=e("#status-history-chart-container").empty();if(O.hasClass("ui-resizable")){O.resizable("destroy");O.removeAttr("style")}O.height(a());var A=O.outerWidth()-F.left-F.right;var B=O.outerHeight()-F.top-F.bottom;W=e("#status-history-container").width();if(A>W){A=W}an=z();if(B>an){B=an}var af=y.scaleTime().range([0,A]);var V=y.axisBottom(af).ticks(5).tickFormat(P);var ae=y.scaleLinear().range([B,0]);var G=y.axisLeft(ae).tickFormat(w[ah.formatter]);var H=y.line().curve(y.curveMonotoneX).x(function(aw){return af(aw.timestamp)}).y(function(aw){return ae(aw.value)});var N=y.select("#status-history-chart-container").append("svg").attr("style","pointer-events: none;").attr("width",O.parent().width()).attr("height",O.innerHeight());var I=N.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",A).attr("height",B);var av=N.append("g").attr("transform","translate("+F.left+", "+F.top+")");var E=y.min(at,function(aw){return y.min(aw.values,function(ax){return ax.timestamp})});var L=y.max(at,function(aw){return y.max(aw.values,function(ax){return ax.timestamp})});j(D,"Start",i.formatDateTime(E));j(D,"End",i.formatDateTime(L));af.domain([E,L]);ae.domain([q(at),u(at)]);av.append("g").attr("class","x axis").attr("transform","translate(0, "+B+")").call(V);av.append("g").attr("class","y axis").call(G).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").attr("text-anchor","end").text(ah.label);var ac=av.selectAll(".status").data(at).enter().append("g").attr("clip-path","url(#clip)").attr("class","status");ac.append("path").attr("class",function(aw){return"chart-line chart-line-"+aw.id}).attr("d",function(aw){return H(aw.values)}).attr("stroke",function(aw){return Y(aw.label)}).classed("hidden",function(aw){return aw.visible===false}).append("title").text(function(aw){return aw.label});ac.each(function(aw){var ax=y.select(this).append("g").attr("class",function(){return"mark-group mark-group-"+aw.id}).classed("hidden",function(ay){return ay.visible===false});ax.selectAll("circle.mark").data(aw.values).enter().append("circle").attr("style","pointer-events: all;").attr("class","mark").attr("cx",function(ay){return af(ay.timestamp)}).attr("cy",function(ay){return ae(ay.value)}).attr("fill",function(){return Y(aw.label)}).attr("r",1.5).append("title").text(function(ay){return aw.label+" -- "+w[ah.formatter](ay.value)})});N.attr("width",O.parent().width()).attr("height",O.innerHeight());I.attr("width",A).attr("height",B);av.select(".x.axis").attr("transform","translate(0, "+B+")");var U=e("#status-history-chart-control-container").empty();var S=U.innerHeight()-F.top-F.bottom;var al=y.scaleTime().range([0,A]);var K=y.axisBottom(al).ticks(5).tickFormat(P);var ap=y.scaleLinear().range([S,0]);var aj=y.axisLeft(ap).tickValues(ae.domain()).tickFormat(w[ah.formatter]);var R=y.line().curve(y.curveMonotoneX).x(function(aw){return al(aw.timestamp)}).y(function(aw){return ap(aw.value)});var ag=y.select("#status-history-chart-control-container").append("svg").attr("width",O.parent().width()).attr("height",S+F.top+F.bottom);var X=ag.append("g").attr("transform","translate("+F.left+", "+F.top+")");al.domain(af.domain());ap.domain(ae.domain());X.append("g").attr("class","x axis").attr("transform","translate(0, "+S+")").call(K);X.append("g").attr("class","y axis").call(aj);var au=X.selectAll(".status").data(at).enter().append("g").attr("class","status");au.append("path").attr("class",function(aw){return"chart-line chart-line-"+aw.id}).attr("d",function(aw){return R(aw.values)}).attr("stroke",function(aw){return Y(aw.label)}).classed("hidden",function(aw){return d[aw.id]===false}).append("title").text(function(aw){return aw.label});var M=function(){var aB=e.map(at,function(aH){var aF=af.domain();var aG=ae.domain();var aI=e.extend({},aH);return e.extend(aI,{values:e.grep(aH.values,function(aJ){return aJ.timestamp.getTime()>=aF[0].getTime()&&aJ.timestamp.getTime()<=aF[1].getTime()&&aJ.value>=aG[0]&&aJ.value<=aG[1]})})});var aw=e.grep(aB,function(aF){return aF.id!==x.nifiInstanceId&&aF.visible&&aF.values.length>0});var aA=aw.length===0?"NA":w[ah.formatter](q(aw));var az=aw.length===0?"NA":w[ah.formatter](f(aw));var ax=aw.length===0?"NA":w[ah.formatter](u(aw));e("#node-aggregate-statistics").text(aA+" / "+ax+" / "+az);var aD=e.grep(aB,function(aF){return aF.id===x.nifiInstanceId&&aF.visible&&aF.values.length>0});var aE=aD.length===0?"NA":w[ah.formatter](q(aD));var aC=aD.length===0?"NA":w[ah.formatter](f(aD));var ay=aD.length===0?"NA":w[ah.formatter](u(aD));e("#cluster-aggregate-statistics").text(aE+" / "+ay+" / "+aC)};var ar=function(aw,ax){af.domain(aw);ae.domain(ax);ac.selectAll(".chart-line").attr("d",function(ay){return H(ay.values)});ac.selectAll("circle.mark").attr("cx",function(ay){return af(ay.timestamp)}).attr("cy",function(ay){return ae(ay.value)}).attr("r",function(){return y.brushSelection(Q.node())===null?1.5:4});av.select(".x.axis").call(V);av.select(".y.axis").call(G)};var J=function(){c=y.brushSelection(Q.node());var ax,aw;if(c===null){var ay=e.grep(at,function(az){return az.visible});if(ay.length===0){aw=ap.domain()}else{aw=[y.min(ay,function(az){return y.min(az.values,function(aA){return aA.value})}),y.max(ay,function(az){return y.max(az.values,function(aA){return aA.value})})]}ax=al.domain()}else{ax=[c[0][0],c[1][0]].map(al.invert,al);aw=[c[1][1],c[0][1]].map(ap.invert,ap)}ar(ax,aw);M()};var am=y.brush().extent([[al.range()[0],ap.range()[1]],[al.range()[1],ap.range()[0]]]).on("brush",J);var Q=X.append("g").attr("class","brush").on("click",J).call(am);if(i.isDefinedAndNotNull(c)){am=am.move(Q,c)}X.select("rect.selection").attr("style","pointer-events: all;").on("dblclick",function(){if(c!==null){var aw=ap.range();am.move(Q,[[c[0][0],aw[1]],[c[1][0],aw[0]]])}});var ad=e.grep(at,function(aw){return aw.id!==x.nifiInstanceId}).sort(function(ax,aw){return ax.label<aw.label?-1:ax.label>aw.label?1:0});var aq=function(ax,aw){var az=e("<div></div>").addClass("legend-label nf-checkbox-label").css("color",Y(aw.label)).text(aw.label).ellipsis();var ay=e('<div class="nf-checkbox"></div>').on("click",function(){var aA=y.selectAll("path.chart-line-"+aw.id);var aC=y.select("g.mark-group-"+aw.id);var aB=aC.classed("hidden");aA.classed("hidden",function(){return !aB});aC.classed("hidden",function(){return !aB});aw.visible=aB;d[aw.id]=aw.visible;J()}).addClass(aw.visible?"checkbox-checked":"checkbox-unchecked");e('<div class="legend-entry"></div>').append(ay).append(az).on("mouseenter",function(){y.selectAll("path.chart-line-"+aw.id).classed("over",true)}).on("mouseleave",function(){y.selectAll("path.chart-line-"+aw.id).classed("over",false)}).appendTo(ax)};var aa=e.grep(at,function(aw){return aw.id===x.nifiInstanceId});var ak=p("NiFi");j(ak,"Min / Max / Mean","","cluster-aggregate-statistics");aq(ak,aa[0]);if(ad.length>0){var Z=p("Nodes");j(Z,"Min / Max / Mean","","node-aggregate-statistics");e.each(ad,function(ax,aw){aq(Z,aw)})}J();var W,an,T,ao;O.append('<div class="ui-resizable-handle ui-resizable-se"></div>').resizable({minWidth:425,minHeight:150,handles:{se:".ui-resizable-se"},resize:function(ay,ax){ao=e("#status-history-dialog");var aw={};if(i.isDefinedAndNotNull(ao.data("nf-dialog"))){aw=ao.data("nf-dialog")}aw["min-width"]=(ao.width()/e(window).width())*100+"%";aw["min-height"]=(ao.height()/e(window).height())*100+"%";aw.responsive["fullscreen-width"]=ao.outerWidth()+"px";aw.responsive["fullscreen-height"]=ao.outerHeight()+"px";W=v();if(ax.helper.width()>W){ax.helper.width(W);aw.responsive["fullscreen-width"]=e(window).width()+"px";aw["min-width"]="100%"}an=z();if(ax.helper.height()>an){ax.helper.height(an);aw.responsive["fullscreen-height"]=e(window).height()+"px";aw["min-height"]="100%"}T=a();if(ax.helper.height()<T){ax.helper.height(T)}aw["min-width"]=(parseInt(aw["min-width"],10)>=100)?"100%":aw["min-width"];aw["min-height"]=(parseInt(aw["min-height"],10)>=100)?"100%":aw["min-height"];ao.data("nfDialog",aw);ao.css("min-width",(O.outerWidth()+e("#status-history-details").outerWidth()+40));ao.css("min-height",(O.outerHeight()+e("#status-history-refresh-container").outerHeight()+e("#status-history-chart-control-container").outerHeight()+e(".dialog-buttons").outerHeight()+e(".dialog-header").outerHeight()+40+5));ao.center()},stop:m})}};var q=function(A){return y.min(A,function(B){return y.min(B.values,function(C){return C.value})})};var u=function(A){return y.max(A,function(B){return y.max(B.values,function(C){return C.value})})};var f=function(B){var C=0;var A=y.sum(B,function(D){C+=D.values.length;return y.sum(D.values,function(E){return E.value})});return A/C};var p=function(B){var A=e('<div class="status-history-detail"></div>').appendTo("#status-history-details");e('<div class="detail-container-label"></div>').text(B).appendTo(A);return e("<div></div>").appendTo(A)};var j=function(B,D,E,F){var C=e('<div class="detail-item"></div>').appendTo(B);e('<div class="setting-name"></div>').text(D).appendTo(C);var A=e('<div class="setting-field"></div>').text(E).appendTo(C);if(i.isDefinedAndNotNull(F)){A.attr("id",F)}};var b={init:function(A){o=A;e("#status-history-refresh-button").click(function(){var B=e("#status-history-dialog").data("status-history");if(B!==null){if(B.type===x.type.processor){b.showProcessorChart(B.groupId,B.id,B.selectedDescriptor)}else{if(B.type===x.type.processGroup){b.showProcessGroupChart(B.groupId,B.id,B.selectedDescriptor)}else{if(B.type===x.type.remoteProcessGroup){b.showRemoteProcessGroupChart(B.groupId,B.id,B.selectedDescriptor)}else{if(B.type===x.type.node){b.showNodeChart()}else{b.showConnectionChart(B.groupId,B.id,B.selectedDescriptor)}}}}}});e("#status-history-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Status History",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){this.modal("hide")}}}],handler:{close:function(){e("#status-history-dialog").removeData("status-history");e("#status-history-chart-container").empty();e("#status-history-chart-control-container").empty();e("#status-history-details").empty();c=null;r=null;d=null},open:m}});e(window).on("resize",function(B){if(B.target===window){m()}i.toggleScrollable(e("#status-history-details").get(0))})},showConnectionChart:function(A,B,C){e.ajax({type:"GET",url:x.urls.api+"/flow/connections/"+encodeURIComponent(B)+"/status/history",dataType:"json"}).done(function(D){l(A,B,D.statusHistory,x.type.connection,C)}).fail(g.handleAjaxError)},showProcessorChart:function(A,C,B){e.ajax({type:"GET",url:x.urls.api+"/flow/processors/"+encodeURIComponent(C)+"/status/history",dataType:"json"}).done(function(D){l(A,C,D.statusHistory,x.type.processor,B)}).fail(g.handleAjaxError)},showNodeChart:function(){e.ajax({type:"GET",url:x.urls.api+"/controller/status/history",dataType:"json"}).done(function(A){h(A.statusHistory)}).fail(g.handleAjaxError)},showProcessGroupChart:function(B,A,C){e.ajax({type:"GET",url:x.urls.api+"/flow/process-groups/"+encodeURIComponent(A)+"/status/history",dataType:"json"}).done(function(D){l(B,A,D.statusHistory,x.type.processGroup,C)}).fail(g.handleAjaxError)},showRemoteProcessGroupChart:function(B,A,C){e.ajax({type:"GET",url:x.urls.api+"/flow/remote-process-groups/"+encodeURIComponent(A)+"/status/history",dataType:"json"}).done(function(D){l(B,A,D.statusHistory,x.type.remoteProcessGroup,C)}).fail(g.handleAjaxError)}};return b}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["angular"],function(c){return(nf.ng.Bridge=b(c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.Bridge=b(require("angular")))}else{nf.ng.Bridge=b(a.angular)}}}(this,function(a){function b(){this.rootScope;this.injector}b.prototype={constructor:b,call:function(e,d){var h=e.split(".");var i=this.rootScope;a.forEach(h,function(j){i=i[j]});var f=d.split(".");d=this.rootScope;a.forEach(f,function(j){d=d[j]});var g=Array.prototype.slice.call(arguments,2);var c=d.apply(i,g);if(c){return c}},get:function(c){var d=c.split(".");var e=this.rootScope;a.forEach(d,function(f){e=e[f]});return e},digest:function(){this.rootScope.$digest()}};return new b()}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","Slick","nf.Common","nf.ErrorHandler","nf.StatusHistory","nf.ProcessorDetails","nf.ConnectionDetails","nf.ng.Bridge","lodash"],function(e,c,d,h,i,g,k,f,j){return(nf.SummaryTable=b(e,c,d,h,i,g,k,f,j))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.SummaryTable=b(require("jquery"),require("Slick"),require("nf.Common"),require("nf.ErrorHandler"),require("nf.StatusHistory"),require("nf.ProcessorDetails"),require("nf.ConnectionDetails"),require("nf.ng.Bridge"),require("lodash")))}else{nf.SummaryTable=b(a.$,a.Slick,a.nf.Common,a.nf.ErrorHandler,a.nf.StatusHistory,a.nf.ProcessorDetails,a.nf.ConnectionDetails,a.nf.ng.Bridge,a._)}}}(this,function(f,z,j,i,c,s,r,I,G){var E={urls:{api:"../nifi-api",status:"../nifi-api/flow/process-groups/root/status",systemDiagnostics:"../nifi-api/system-diagnostics",flowConfig:"../nifi-api/flow/config"}};var d=false;var A="&nbsp;&nbsp;|&nbsp;&nbsp;";var H=function(K,J){if(top!==window){if(j.isDefinedAndNotNull(parent.nf)&&j.isDefinedAndNotNull(parent.nf.CanvasUtils)&&j.isDefinedAndNotNull(parent.nf.Shell)){parent.nf.CanvasUtils.showComponent(K,J);parent.$("#shell-close-button").click()}}};var p=function(X,U,R,O,K){var T=G.get(K,"predictions.predictedMillisUntilBytesBackpressure",-1);var Q=G.get(K,"predictions.predictedMillisUntilCountBackpressure",-1);var L=G.get(K,"percentUseCount",0);var P=G.get(K,"percentUseBytes",0);var W=[{label:"object",timeToBackPressure:Q},{label:"size",timeToBackPressure:T},];var V=[{label:"object",percent:L},{label:"size",percent:P}];var S=G.maxBy(V,"percent");if(S.percent>=100){return"now ("+S.label+")"}var J=W.filter(function(Y){return Y.timeToBackPressure>=0});if(G.isEmpty(J)){return"NA"}var M=G.minBy(J,"timeToBackPressure");var N=j.formatPredictedDuration(M.timeToBackPressure);return j.escapeHtml(N)+" ("+M.label+")"};var t={id:"backpressurePrediction",field:"backpressurePrediction",name:"Estimated Time to Back Pressure",sortable:true,defaultSortAsc:false,formatter:p,resize:true,toolTip:"Estimated Time to Back Pressure"};var w=function(aA){f("#summary-filter").keyup(function(){F()});f("#summary-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"Processors",tabContentId:"processor-summary-tab-content"},{name:"Input Ports",tabContentId:"input-port-summary-tab-content"},{name:"Output Ports",tabContentId:"output-port-summary-tab-content"},{name:"Remote Process Groups",tabContentId:"remote-process-group-summary-tab-content"},{name:"Connections",tabContentId:"connection-summary-tab-content"},{name:"Process Groups",tabContentId:"process-group-summary-tab-content"}],select:function(){var bn=f(this).text();if(bn==="Processors"){f("#summary-filter-status-dropdown").show();f("#summary-filter-primary-node-container").show();var bm=f("#processor-summary-table").data("gridInstance");if(j.isDefinedAndNotNull(bm)){bm.resizeCanvas();f("#displayed-items").text(j.formatInteger(bm.getData().getLength()));f("#total-items").text(j.formatInteger(bm.getData().getLength()))}f("#summary-filter-type").combo({options:[{text:"by name",value:"name"},{text:"by type",value:"type"}],select:function(bs){F()}});f("#summary-filter-status-dropdown").combo({options:[{text:"All Statuses",value:"all-statuses"},{text:"Running",value:"Running"},{text:"Stopped",value:"Stopped"},{text:"Validating",value:"Validating"},{text:"Disabled",value:"Disabled"},{text:"Invalid",value:"Invalid"}],select:function(bs){F()}});f("#summary-filter-primary-node").on("change",function(bt,bs){d=bs.isChecked;F()})}else{if(bn==="Connections"){f("#summary-filter-status-dropdown").hide();f("#summary-filter-primary-node-container").hide();o();var bl=f("#connection-summary-table").data("gridInstance");if(j.isDefinedAndNotNull(bl)){bl.resizeCanvas();f("#displayed-items").text(j.formatInteger(bl.getData().getLength()));f("#total-items").text(j.formatInteger(bl.getData().getLength()))}f("#summary-filter-type").combo({options:[{text:"by source",value:"sourceName"},{text:"by name",value:"name"},{text:"by destination",value:"destinationName"}],select:function(bs){F()}})}else{if(bn==="Input Ports"){f("#summary-filter-status-dropdown").show();f("#summary-filter-primary-node-container").hide();o();var br=f("#input-port-summary-table").data("gridInstance");if(j.isDefinedAndNotNull(br)){br.resizeCanvas();f("#displayed-items").text(j.formatInteger(br.getData().getLength()));f("#total-items").text(j.formatInteger(br.getData().getLength()))}f("#summary-filter-type").combo({options:[{text:"by name",value:"name"}],select:function(bs){F()}})}else{if(bn==="Output Ports"){f("#summary-filter-status-dropdown").show();f("#summary-filter-primary-node-container").hide();o();var bq=f("#output-port-summary-table").data("gridInstance");if(j.isDefinedAndNotNull(bq)){bq.resizeCanvas();f("#displayed-items").text(j.formatInteger(bq.getData().getLength()));f("#total-items").text(j.formatInteger(bq.getData().getLength()))}f("#summary-filter-type").combo({options:[{text:"by name",value:"name"}],select:function(bs){F()}})}else{if(bn==="Remote Process Groups"){f("#summary-filter-status-dropdown").hide();f("#summary-filter-primary-node-container").hide();o();var bp=f("#remote-process-group-summary-table").data("gridInstance");if(j.isDefinedAndNotNull(bp)){bp.resizeCanvas();f("#displayed-items").text(j.formatInteger(bp.getData().getLength()));f("#total-items").text(j.formatInteger(bp.getData().getLength()))}f("#summary-filter-type").combo({options:[{text:"by name",value:"name"},{text:"by uri",value:"targetUri"}],select:function(bs){F()}})}else{f("#summary-filter-status-dropdown").hide();f("#summary-filter-primary-node-container").hide();o();var bo=f("#process-group-summary-table").data("gridInstance");if(j.isDefinedAndNotNull(bo)){bo.resizeCanvas();f("#displayed-items").text(j.formatInteger(bo.getData().getLength()));f("#total-items").text(j.formatInteger(bo.getData().getLength()))}f("#summary-filter-type").combo({options:[{text:"by name",value:"name"}],select:function(bs){F()}})}}}}}f("#summary-filter").val("");F()}});var aO=function(bq,bm,bp,bo,bl){var bn='<div title="View Processor Details" class="pointer show-processor-details fa fa-info-circle"></div>';if(!j.isEmpty(bl.bulletins)){bn+='<div class="has-bulletins fa fa-sticky-note-o"></div><span class="hidden row-id">'+j.escapeHtml(bl.id)+"</span>"}return bn};var aG=function(bq,bm,bp,bo,bl){var bn="";if(aA&&bl.executionNode==="PRIMARY"){bn+='<div class="is-primary-icon" title="This component is only scheduled to execute on the Primary Node">P</div>'}bn+=j.escapeHtml(bp);return bn};var aL=function(bp,bm,bo,bn,bl){return j.escapeHtml(bl.read)+A+j.escapeHtml(bl.written)};var aj=function(bp,bm,bo,bn,bl){return j.formatInteger(bl.tasks)+A+j.escapeHtml(bl.tasksDuration)};var J=function(bp,bm,bo,bn,bl){return j.formatValue(bo)};var bk=function(bt,br,bq,bn,bl){var bo="";var bp="";if(bl.terminatedThreadCount>0){bo="("+bl.activeThreadCount+A+bl.terminatedThreadCount+")";bp="Threads: (Active / Terminated)"}else{if(bl.activeThreadCount>0){bo="("+bl.activeThreadCount+")";bp="Active Threads"}}var bm;switch(bq.toLowerCase()){case"running":bm="fa fa-play running";break;case"stopped":bm="fa fa-stop stopped";break;case"enabled":bm="fa fa-flash enabled";break;case"disabled":bm="icon icon-enable-false disabled";break;case"validating":bm="fa fa-spin fa-circle-notch validating";break;case"invalid":bm="fa fa-warning invalid";break;default:bm=""}var bs='<div layout="row"><div class="'+bm+'"></div><div class="status-text">'+j.escapeHtml(bq)+'</div><div style="float: left; margin-left: 4px;" title="'+bp+'">'+j.escapeHtml(bo)+"</div></div>";return bs};var bd={id:"name",field:"name",name:"Name",formatter:aG,sortable:true,resizable:true};var a3={id:"runStatus",field:"runStatus",name:"Run Status",formatter:bk,sortable:true};var aD={id:"input",field:"input",name:'<span class="input-title">In</span>&nbsp;(<span class="input-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:j.genericValueFormatter};var aK={id:"io",field:"io",name:'<span class="read-title">Read</span>'+A+'<span class="written-title">Write</span>&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Data size in the last 5 min",formatter:aL,sortable:true,defaultSortAsc:false,resizable:true};var bf={id:"output",field:"output",name:'<span class="output-title">Out</span>&nbsp;(<span class="output-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:j.genericValueFormatter};var aI={id:"tasks",field:"tasks",name:'<span class="tasks-title">Tasks</span>'+A+'<span class="time-title">Time</span>&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / duration in the last 5 min",formatter:aj,sortable:true,defaultSortAsc:false,resizable:true};var aN=[{id:"moreDetails",field:"moreDetails",name:"&nbsp;",resizable:false,formatter:aO,sortable:true,width:50,maxWidth:50,toolTip:"Sorts based on presence of bulletins"},bd,{id:"type",field:"type",name:"Type",sortable:true,resizable:true,formatter:j.genericValueFormatter},{id:"parentGroup",field:"parentProcessGroupName",name:"Process Group",sortable:true,resizable:true,formatter:j.genericValueFormatter,toolTip:"Parent Process Group name"},a3,aD,aK,bf,aI];var a7=(top!==window);if(aA||a7||j.SUPPORTS_SVG){var bb=function(bq,bm,bp,bo,bl){var bn="";if(a7){bn+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Processor in '+j.escapeHtml(bl.processGroupNamePath)+'"></div>'}if(j.SUPPORTS_SVG){bn+='<div class="pointer show-processor-status-history fa fa-area-chart" title="View Status History"></div>'}if(aA){bn+='<div class="pointer show-cluster-processor-summary fa fa-cubes" title="View Processor Details"></div>'}return bn};aN.push({id:"actions",name:"&nbsp;",formatter:bb,resizable:false,sortable:false,width:75,maxWidth:75})}var aE={autosizeColsMode:z.GridAutosizeColsMode.LegacyForceFit,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aP=new z.Data.DataView({inlineFilters:false});aP.setItems([]);aP.setFilterArgs({searchString:"",property:"name"});aP.setFilter(m);C("processor-summary-table",{columnId:"name",sortAsc:true},aP);var bh=new z.Grid("#processor-summary-table",aP,aN,aE);bh.setSelectionModel(new z.RowSelectionModel());bh.registerPlugin(new z.AutoTooltips());bh.setSortColumn("name",true);bh.onSort.subscribe(function(bm,bl){C("processor-summary-table",{columnId:bl.sortCol.field,sortAsc:bl.sortAsc},aP)});bh.onClick.subscribe(function(bo,bl){var bn=f(bo.target);var bm=aP.getItem(bl.row);if(bh.getColumns()[bl.cell].id==="actions"){if(bn.hasClass("go-to")){H(bm.groupId,bm.id)}else{if(bn.hasClass("show-processor-status-history")){c.showProcessorChart(bm.groupId,bm.id)}else{if(bn.hasClass("show-cluster-processor-summary")){n(bm.groupId,bm.id);f("#summary-loading-container").hide();f("#cluster-processor-summary-dialog").modal("show");T.resizeCanvas()}}}}else{if(bh.getColumns()[bl.cell].id==="moreDetails"){if(bn.hasClass("show-processor-details")){s.showDetails(bm.groupId,bm.id)}}}});aP.onRowCountChanged.subscribe(function(bm,bl){bh.updateRowCount();bh.render();if(f("#processor-summary-table").is(":visible")){f("#displayed-items").text(j.formatInteger(bl.current))}});aP.onRowsChanged.subscribe(function(bm,bl){bh.invalidateRows(bl.rows);bh.render()});f("#processor-summary-table").data("gridInstance",bh).on("mouseenter","div.slick-cell",function(bp){var bm=f(this).find("div.has-bulletins");if(bm.length&&!bm.data("qtip")){var bq=f(this).find("span.row-id").text();var bl=aP.getItemById(bq);var bo=j.getFormattedBulletins(bl.bulletins);var bn=j.formatUnorderedList(bo);if(j.isDefinedAndNotNull(bn)){bm.qtip(f.extend({},j.config.tooltipConfig,{content:bn,position:{container:f("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});f("#cluster-processor-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Processor Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){f("#cluster-processor-id").text("");f("#cluster-processor-name").text("");this.modal("hide")}}}],handler:{close:function(){f("#summary-loading-container").show()}}});f("#cluster-processor-refresh-button").click(function(){n(f("#cluster-processor-group-id").text(),f("#cluster-processor-id").text())});var S=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:j.genericValueFormatter},a3,aD,aK,bf,aI];var ba={autosizeColsMode:z.GridAutosizeColsMode.LegacyForceFit,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aY=new z.Data.DataView({inlineFilters:false});aY.setItems([]);C("cluster-processor-summary-table",{columnId:"node",sortAsc:true},aY);var T=new z.Grid("#cluster-processor-summary-table",aY,S,ba);T.setSelectionModel(new z.RowSelectionModel());T.registerPlugin(new z.AutoTooltips());T.setSortColumn("node",true);T.onSort.subscribe(function(bm,bl){C("cluster-processor-summary-table",{columnId:bl.sortCol.field,sortAsc:bl.sortAsc},aY)});aY.onRowCountChanged.subscribe(function(bm,bl){T.updateRowCount();T.render()});aY.onRowsChanged.subscribe(function(bm,bl){T.invalidateRows(bl.rows);T.render()});f("#cluster-processor-summary-table").data("gridInstance",T);var aV=function(bp,bm,bo,bn,bl){return'<div class="pointer show-connection-details fa fa-info-circle" title="View Connection Details"></div>'};var be=function(bl){return G.isNumber(bl)&&bl>=0?G.clamp(bl,0,100)+"%":"NA"};var aa=function(br,bn,bq,bo,bm){var bl="NA";if(j.isDefinedAndNotNull(bm.percentUseCount)){bl=be(bm.percentUseCount)}var bp="NA";if(j.isDefinedAndNotNull(bm.percentUseBytes)){bp=be(bm.percentUseBytes)}return j.escapeHtml(bl)+A+j.escapeHtml(bp)};var a5={id:"queued",field:"queued",name:'<span class="queued-title">Queue</span>&nbsp;(<span class="queued-size-title">Size</span>)',sortable:true,defaultSortAsc:false,resize:true,formatter:j.genericValueFormatter};var Z={id:"backpressure",field:"backpressure",name:'Threshold %: <span class="backpressure-object-title">Queue</span>&nbsp;&nbsp;|&nbsp;&nbsp;<span class="backpressure-data-size-title">Size</span>',sortable:true,defaultSortAsc:false,formatter:aa,resize:true};var aB=[{id:"moreDetails",name:"&nbsp;",sortable:false,resizable:false,formatter:aV,width:50,maxWidth:50},{id:"name",field:"name",name:"Name",sortable:true,resizable:true,formatter:J},a5,Z,t,aD,{id:"sourceName",field:"sourceName",name:"From Source",sortable:true,resizable:true,formatter:j.genericValueFormatter},bf,{id:"destinationName",field:"destinationName",name:"To Destination",sortable:true,resizable:true,formatter:j.genericValueFormatter}];if(aA||a7||j.SUPPORTS_SVG){var M=function(bq,bm,bp,bo,bl){var bn="";if(a7){bn+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Connection"></div>'}if(j.SUPPORTS_SVG){bn+='<div class="pointer show-connection-status-history fa fa-area-chart" title="View Status History"></div>'}if(aA){bn+='<div class="pointer show-cluster-connection-summary fa fa-cubes" title="View Connection Details"></div>'}return bn};aB.push({id:"actions",name:"&nbsp;",formatter:M,resizable:false,sortable:false,width:75,maxWidth:75})}var ah={autosizeColsMode:z.GridAutosizeColsMode.LegacyForceFit,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var at=new z.Data.DataView({inlineFilters:false});at.setItems([]);at.setFilterArgs({searchString:"",property:"sourceName"});at.setFilter(m);C("connection-summary-table",{columnId:"sourceName",sortAsc:true},at);var aS=new z.Grid("#connection-summary-table",at,aB,ah);aS.setSelectionModel(new z.RowSelectionModel());aS.registerPlugin(new z.AutoTooltips());aS.setSortColumn("sourceName",true);aS.onSort.subscribe(function(bm,bl){C("connection-summary-table",{columnId:bl.sortCol.field,sortAsc:bl.sortAsc},at)});aS.onClick.subscribe(function(bo,bl){var bn=f(bo.target);var bm=at.getItem(bl.row);if(aS.getColumns()[bl.cell].id==="actions"){if(bn.hasClass("go-to")){H(bm.groupId,bm.id)}else{if(bn.hasClass("show-connection-status-history")){c.showConnectionChart(bm.groupId,bm.id)}else{if(bn.hasClass("show-cluster-connection-summary")){b(bm.groupId,bm.id);f("#summary-loading-container").hide();f("#cluster-connection-summary-dialog").modal("show");ap.resizeCanvas()}}}}else{if(aS.getColumns()[bl.cell].id==="moreDetails"){if(bn.hasClass("show-connection-details")){r.showDetails(bm.groupId,bm.id)}}}});at.onRowCountChanged.subscribe(function(bm,bl){aS.updateRowCount();aS.render();if(f("#connection-summary-table").is(":visible")){f("#displayed-items").text(j.formatInteger(bl.current))}});at.onRowsChanged.subscribe(function(bm,bl){aS.invalidateRows(bl.rows);aS.render()});f("#connection-summary-table").data("gridInstance",aS);f("#cluster-connection-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Connection Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){f("#cluster-connection-id").text("");f("#cluster-connection-name").text("");this.modal("hide")}}}],handler:{close:function(){f("#summary-loading-container").show()}}});f("#cluster-connection-refresh-button").click(function(){b(f("#cluster-connection-group-id").text(),f("#cluster-connection-id").text())});var V=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:j.genericValueFormatter},a5,Z,t,aD,bf];var O={autosizeColsMode:z.GridAutosizeColsMode.LegacyForceFit,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var L=new z.Data.DataView({inlineFilters:false});L.setItems([]);C("cluster-connection-summary-table",{columnId:"node",sortAsc:true},L);var ap=new z.Grid("#cluster-connection-summary-table",L,V,O);ap.setSelectionModel(new z.RowSelectionModel());ap.registerPlugin(new z.AutoTooltips());ap.setSortColumn("node",true);ap.onSort.subscribe(function(bm,bl){C("cluster-connection-summary-table",{columnId:bl.sortCol.field,sortAsc:bl.sortAsc},L)});L.onRowCountChanged.subscribe(function(bm,bl){ap.updateRowCount();ap.render()});L.onRowsChanged.subscribe(function(bm,bl){ap.invalidateRows(bl.rows);ap.render()});f("#cluster-connection-summary-table").data("gridInstance",ap);var Y=function(bq,bm,bp,bo,bl){var bn="";if(!j.isEmpty(bl.bulletins)){bn+='<div class="has-bulletins fa fa-sticky-note-o" style="margin-left: 5px; float: left;"></div><span class="hidden row-id">'+j.escapeHtml(bl.id)+"</span>"}return bn};var aT={id:"moreDetails",field:"moreDetails",name:"&nbsp;",resizable:false,formatter:Y,sortable:true,width:50,maxWidth:50,toolTip:"Sorts based on presence of bulletins"};var al={id:"transferred",field:"transferred",name:'<span class="transferred-title">Transferred</span>&nbsp;(<span class="transferred-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size transferred to and from connections in the last 5 min",resizable:true,defaultSortAsc:false,sortable:true,formatter:j.genericValueFormatter};var ai={id:"sent",field:"sent",name:'<span class="sent-title">Sent</span>&nbsp;(<span class="sent-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:j.genericValueFormatter};var aQ={id:"received",field:"received",name:'<span class="received-title">Received</span>&nbsp;(<span class="received-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:j.genericValueFormatter};var a4=function(br,bm,bq,bn,bl){var bp,bo;switch(bq){case"UP_TO_DATE":bp="fa fa-check up-to-date";bo="Up to date";break;case"LOCALLY_MODIFIED":bp="fa fa-asterisk locally-modified";bo="Locally modified";break;case"STALE":bp="fa fa-arrow-circle-up stale";bo="Stale";break;case"LOCALLY_MODIFIED_AND_STALE":bp="fa fa-exclamation-circle locally-modified-and-stale";bo="Locally modified and stale";break;case"SYNC_FAILURE":bp="fa fa-question sync-failure";bo="Sync failure";break;default:bp="";bo=""}return'<div layout="row"><div class="'+bp+'"></div><div class="status-text">'+bo+"</div></div>"};var ad;var bg=function(){return f.ajax({type:"GET",url:E.urls.status,dataType:"json"}).done(function(bl){ad=bl.processGroupStatus})};var a6={};var aM=function(){bg().then(function(){a6.taskDuration=ad.aggregateSnapshot.processingNanos;a6.threadCount=ad.aggregateSnapshot.activeThreadCount})};aM();var N=function(bm,bn){var bl=0;if(bn!=undefined&&bn>0){bl=Math.round((bm/bn)*100)}return bl};var R=function(bp,bm,bo,bn,bl){return j.formatDuration(Math.round(bl.processingNanos/1000000))+"&nbsp;&nbsp;("+j.formatValue(N(bl.processingNanos,a6.taskDuration))+"%)"};var aZ=function(bp,bm,bo,bn,bl){return j.formatValue(bl.activeThreadCount)+"&nbsp;&nbsp;("+j.formatValue(N(bl.activeThreadCount,a6.threadCount))+"%)"};var W=[aT,{id:"name",field:"name",name:"Name",sortable:true,resizable:true,formatter:J},{id:"versionedFlowState",field:"versionedFlowState",name:"Version State",sortable:true,resizable:true,formatter:a4},al,aD,aK,bf,ai,aQ,{id:"activeThreads",field:"activeThreads",name:'<span class="thread-count-title">Active Threads</span>&nbsp;(<span class="thread-count-percentage-title">%</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Total active thread count within ProcessGroup (% of total active thread count compared to overall active thread count in root ProcessGroup) in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:aZ},{id:"taskDuration",field:"taskDuration",name:'<span class="duration-title">Total Task Duration</span>&nbsp;(<span class="duration-percentage-title">%</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Total task duration within ProcessGroup (% of total task duration compared to overall task duration in root ProcessGroup) in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:R}];if(aA||a7||j.SUPPORTS_SVG){var bc=function(bq,bm,bp,bo,bl){var bn="";if(a7&&bl.groupId!==null){bn+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Process Group"></div>'}if(j.SUPPORTS_SVG){bn+='<div class="pointer show-process-group-status-history fa fa-area-chart" title="View Status History"></div>'}if(aA){bn+='<div class="pointer show-cluster-process-group-summary fa fa-cubes" title="View Process Group Details"></div>'}return bn};W.push({id:"actions",name:"&nbsp;",formatter:bc,resizable:false,sortable:false,width:75,maxWidth:75})}var an={autosizeColsMode:z.GridAutosizeColsMode.LegacyForceFit,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aC=new z.Data.DataView({inlineFilters:false});aC.setItems([]);aC.setFilterArgs({searchString:"",property:"name"});aC.setFilter(m);C("process-group-summary-table",{columnId:"name",sortAsc:true},aC);var a1=new z.Grid("#process-group-summary-table",aC,W,an);a1.setSelectionModel(new z.RowSelectionModel());a1.registerPlugin(new z.AutoTooltips());a1.setSortColumn("name",true);a1.onSort.subscribe(function(bm,bl){C("process-group-summary-table",{columnId:bl.sortCol.field,sortAsc:bl.sortAsc},aC)});a1.onClick.subscribe(function(bo,bl){var bn=f(bo.target);var bm=aC.getItem(bl.row);if(a1.getColumns()[bl.cell].id==="actions"){if(bn.hasClass("go-to")){if(j.isDefinedAndNotNull(parent.nf)&&j.isDefinedAndNotNull(parent.nf.ProcessGroup)&&j.isDefinedAndNotNull(parent.nf.Shell)){parent.nf.ProcessGroup.enterGroup(bm.id);parent.$("#shell-close-button").click()}}else{if(bn.hasClass("show-process-group-status-history")){c.showProcessGroupChart(bm.groupId,bm.id)}else{if(bn.hasClass("show-cluster-process-group-summary")){q(bm.id);f("#summary-loading-container").hide();f("#cluster-process-group-summary-dialog").modal("show");af.resizeCanvas()}}}}});aC.onRowCountChanged.subscribe(function(bm,bl){a1.updateRowCount();a1.render();if(f("#process-group-summary-table").is(":visible")){f("#displayed-items").text(j.formatInteger(bl.current))}});aC.onRowsChanged.subscribe(function(bm,bl){a1.invalidateRows(bl.rows);a1.render()});f("#process-group-summary-table").data("gridInstance",a1).on("mouseenter","div.slick-cell",function(bq){var bn=f(this).find("div.has-bulletins");if(bn.length&&!bn.data("qtip")){var bl=f(this).find("span.row-id").text();var bm=aC.getItemById(bl);var bp=j.getFormattedBulletins(bm.bulletins);var bo=j.formatUnorderedList(bp);if(j.isDefinedAndNotNull(bo)){bn.qtip(f.extend({},j.config.tooltipConfig,{content:bo,position:{container:f("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});f("#refresh-button").click(function(){aM()});f("#cluster-process-group-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Process Group Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){f("#cluster-process-group-id").text("");f("#cluster-process-group-name").text("");this.modal("hide")}}}],handler:{close:function(){f("#summary-loading-container").show()}}});f("#cluster-process-group-refresh-button").click(function(){q(f("#cluster-process-group-id").text())});var au=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:j.genericValueFormatter},al,aD,aK,bf,ai,aQ];var aJ={autosizeColsMode:z.GridAutosizeColsMode.LegacyForceFit,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var a9=new z.Data.DataView({inlineFilters:false});a9.setItems([]);C("cluster-processor-summary-table",{columnId:"node",sortAsc:true},a9);var af=new z.Grid("#cluster-process-group-summary-table",a9,au,aJ);af.setSelectionModel(new z.RowSelectionModel());af.registerPlugin(new z.AutoTooltips());af.setSortColumn("node",true);af.onSort.subscribe(function(bm,bl){C("cluster-process-group-summary-table",{columnId:bl.sortCol.field,sortAsc:bl.sortAsc},a9)});a9.onRowCountChanged.subscribe(function(bm,bl){af.updateRowCount();af.render()});a9.onRowsChanged.subscribe(function(bm,bl){af.invalidateRows(bl.rows);af.render()});f("#cluster-process-group-summary-table").data("gridInstance",af);var bj=[aT,bd,a3,bf];if(aA||a7){var ax=function(bq,bm,bp,bo,bl){var bn="";if(a7){bn+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Input Port"></div>'}if(aA){bn+='<div class="pointer show-cluster-input-port-summary fa fa-cubes" title="View Input Port Details"></div>'}return bn};bj.push({id:"actions",name:"&nbsp;",formatter:ax,resizable:false,sortable:false,width:75,maxWidth:75})}var ar={autosizeColsMode:z.GridAutosizeColsMode.LegacyForceFit,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var P=new z.Data.DataView({inlineFilters:false});P.setItems([]);P.setFilterArgs({searchString:"",property:"name"});P.setFilter(m);C("input-port-summary-table",{columnId:"name",sortAsc:true},P);var aq=new z.Grid("#input-port-summary-table",P,bj,ar);aq.setSelectionModel(new z.RowSelectionModel());aq.registerPlugin(new z.AutoTooltips());aq.setSortColumn("name",true);aq.onSort.subscribe(function(bm,bl){C("input-port-summary-table",{columnId:bl.sortCol.field,sortAsc:bl.sortAsc},P)});aq.onClick.subscribe(function(bo,bl){var bn=f(bo.target);var bm=P.getItem(bl.row);if(aq.getColumns()[bl.cell].id==="actions"){if(bn.hasClass("go-to")){H(bm.groupId,bm.id)}else{if(bn.hasClass("show-cluster-input-port-summary")){x(bm.groupId,bm.id);f("#summary-loading-container").hide();f("#cluster-input-port-summary-dialog").modal("show");aF.resizeCanvas()}}}});P.onRowCountChanged.subscribe(function(bm,bl){aq.updateRowCount();aq.render();if(f("#input-port-summary-table").is(":visible")){f("#display-items").text(j.formatInteger(bl.current))}});P.onRowsChanged.subscribe(function(bm,bl){aq.invalidateRows(bl.rows);aq.render()});f("#input-port-summary-table").data("gridInstance",aq).on("mouseenter","div.slick-cell",function(bq){var bn=f(this).find("div.has-bulletins");if(bn.length&&!bn.data("qtip")){var bl=f(this).find("span.row-id").text();var bm=P.getItemById(bl);var bp=j.getFormattedBulletins(bm.bulletins);var bo=j.formatUnorderedList(bp);if(j.isDefinedAndNotNull(bo)){bn.qtip(f.extend({},j.config.tooltipConfig,{content:bo,position:{container:f("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});f("#cluster-input-port-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Input Port Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){f("#cluster-input-port-id").text("");f("#cluster-input-port-name").text("");this.modal("hide")}}}],handler:{close:function(){f("#summary-loading-container").show()}}});f("#cluster-input-port-refresh-button").click(function(){x(f("#cluster-input-port-group-id").text(),f("#cluster-input-port-id").text())});var am=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:j.genericValueFormatter},a3,bf];var a0={autosizeColsMode:z.GridAutosizeColsMode.LegacyForceFit,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var ac=new z.Data.DataView({inlineFilters:false});ac.setItems([]);C("cluster-input-port-summary-table",{columnId:"node",sortAsc:true},ac);var aF=new z.Grid("#cluster-input-port-summary-table",ac,am,a0);aF.setSelectionModel(new z.RowSelectionModel());aF.registerPlugin(new z.AutoTooltips());aF.setSortColumn("node",true);aF.onSort.subscribe(function(bm,bl){C("cluster-input-port-summary-table",{columnId:bl.sortCol.field,sortAsc:bl.sortAsc},ac)});ac.onRowCountChanged.subscribe(function(bm,bl){aF.updateRowCount();aF.render()});ac.onRowsChanged.subscribe(function(bm,bl){aF.invalidateRows(bl.rows);aF.render()});f("#cluster-input-port-summary-table").data("gridInstance",aF);var aH=[aT,bd,a3,aD];if(aA||a7){var aU=function(bq,bm,bp,bo,bl){var bn="";if(a7){bn+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Output Port"></div>'}if(aA){bn+='<div class="pointer show-cluster-output-port-summary fa fa-cubes" title="View Output Port Details"></div>'}return bn};aH.push({id:"actions",name:"&nbsp;",formatter:aU,resizable:false,sortable:false,width:75,maxWidth:75})}var ay={autosizeColsMode:z.GridAutosizeColsMode.LegacyForceFit,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var K=new z.Data.DataView({inlineFilters:false});K.setItems([]);K.setFilterArgs({searchString:"",property:"name"});K.setFilter(m);C("output-port-summary-table",{columnId:"name",sortAsc:true},K);var ao=new z.Grid("#output-port-summary-table",K,aH,ay);ao.setSelectionModel(new z.RowSelectionModel());ao.registerPlugin(new z.AutoTooltips());ao.setSortColumn("name",true);ao.onSort.subscribe(function(bm,bl){C("output-port-summary-table",{columnId:bl.sortCol.field,sortAsc:bl.sortAsc},K)});ao.onClick.subscribe(function(bo,bl){var bn=f(bo.target);var bm=K.getItem(bl.row);if(ao.getColumns()[bl.cell].id==="actions"){if(bn.hasClass("go-to")){H(bm.groupId,bm.id)}else{if(bn.hasClass("show-cluster-output-port-summary")){l(bm.groupId,bm.id);f("#summary-loading-container").hide();f("#cluster-output-port-summary-dialog").modal("show");bi.resizeCanvas()}}}});K.onRowCountChanged.subscribe(function(bm,bl){ao.updateRowCount();ao.render();if(f("#output-port-summary-table").is(":visible")){f("#display-items").text(j.formatInteger(bl.current))}});K.onRowsChanged.subscribe(function(bm,bl){ao.invalidateRows(bl.rows);ao.render()});f("#output-port-summary-table").data("gridInstance",ao).on("mouseenter","div.slick-cell",function(bq){var bn=f(this).find("div.has-bulletins");if(bn.length&&!bn.data("qtip")){var bl=f(this).find("span.row-id").text();var bm=K.getItemById(bl);var bp=j.getFormattedBulletins(bm.bulletins);var bo=j.formatUnorderedList(bp);if(j.isDefinedAndNotNull(bo)){bn.qtip(f.extend({},j.config.tooltipConfig,{content:bo,position:{container:f("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});f("#cluster-output-port-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Output Port Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){f("#cluster-output-port-id").text("");f("#cluster-output-port-name").text("");this.modal("hide")}}}],handler:{close:function(){f("#summary-loading-container").show()}}});f("#cluster-output-port-refresh-button").click(function(){l(f("#cluster-output-port-group-id").text(),f("#cluster-output-port-id").text())});var ab=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:j.genericValueFormatter},a3,aD];var av={autosizeColsMode:z.GridAutosizeColsMode.LegacyForceFit,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aR=new z.Data.DataView({inlineFilters:false});aR.setItems([]);C("cluster-output-port-summary-table",{columnId:"node",sortAsc:true},aR);var bi=new z.Grid("#cluster-output-port-summary-table",aR,ab,av);bi.setSelectionModel(new z.RowSelectionModel());bi.registerPlugin(new z.AutoTooltips());bi.setSortColumn("node",true);bi.onSort.subscribe(function(bm,bl){C("cluster-output-port-summary-table",{columnId:bl.sortCol.field,sortAsc:bl.sortAsc},aR)});aR.onRowCountChanged.subscribe(function(bm,bl){bi.updateRowCount();bi.render()});aR.onRowsChanged.subscribe(function(bm,bl){bi.invalidateRows(bl.rows);bi.render()});f("#cluster-output-port-summary-table").data("gridInstance",bi);var ag=function(bt,br,bq,bo,bl){var bp="";if(j.isDefinedAndNotNull(bl.activeThreadCount)&&bl.activeThreadCount>0){bp="("+j.escapeHtml(bl.activeThreadCount)+")"}var bs="invalid fa fa-warning";var bm="Invalid";if(bq==="Transmitting"){bs="transmitting fa fa-bullseye";bm=bq}else{bs="not-transmitting icon icon-transmit-false";bm="Not Transmitting"}var bn='<div layout="row"><div class="'+bs+'"></div>';return bn+'<div class="status-text">'+bm+'</div><div style="float: left; margin-left: 4px;">'+j.escapeHtml(bp)+"</div></div>"};var ak={id:"transmissionStatus",field:"transmissionStatus",name:"Transmitting",formatter:ag,sortable:true,resizable:true};var a2={id:"targetUri",field:"targetUri",name:"Target URI",sortable:true,resizable:true,formatter:j.genericValueFormatter};var aw=[{id:"moreDetails",field:"moreDetails",name:"&nbsp;",resizable:false,formatter:Y,sortable:true,width:50,maxWidth:50,toolTip:"Sorts based on presence of bulletins"},bd,a2,ak,ai,aQ];if(aA||a7||j.SUPPORTS_SVG){var X=function(bq,bm,bp,bo,bl){var bn="";if(a7){bn+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Process Group"></div>'}if(j.SUPPORTS_SVG){bn+='<div class="pointer show-remote-process-group-status-history fa fa-area-chart" title="View Status History"></div>'}if(aA){bn+='<div class="pointer show-cluster-remote-process-group-summary fa fa-cubes" title="View Remote Process Group Details"></div>'}return bn};aw.push({id:"actions",name:"&nbsp;",formatter:X,resizable:false,sortable:false,width:75,maxWidth:75})}var aX={autosizeColsMode:z.GridAutosizeColsMode.LegacyForceFit,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var a8=new z.Data.DataView({inlineFilters:false});a8.setItems([]);a8.setFilterArgs({searchString:"",property:"name"});a8.setFilter(m);C("remote-process-group-summary-table",{columnId:"name",sortAsc:true},a8);var ae=new z.Grid("#remote-process-group-summary-table",a8,aw,aX);ae.setSelectionModel(new z.RowSelectionModel());ae.registerPlugin(new z.AutoTooltips());ae.setSortColumn("name",true);ae.onSort.subscribe(function(bm,bl){C("remote-process-group-summary-table",{columnId:bl.sortCol.field,sortAsc:bl.sortAsc},a8)});ae.onClick.subscribe(function(bo,bl){var bn=f(bo.target);var bm=a8.getItem(bl.row);if(ae.getColumns()[bl.cell].id==="actions"){if(bn.hasClass("go-to")){H(bm.groupId,bm.id)}else{if(bn.hasClass("show-remote-process-group-status-history")){c.showRemoteProcessGroupChart(bm.groupId,bm.id)}else{if(bn.hasClass("show-cluster-remote-process-group-summary")){g(bm.groupId,bm.id);f("#summary-loading-container").hide();f("#cluster-remote-process-group-summary-dialog").modal("show");az.resizeCanvas()}}}}});a8.onRowCountChanged.subscribe(function(bm,bl){ae.updateRowCount();ae.render();if(f("#remote-process-group-summary-table").is(":visible")){f("#displayed-items").text(j.formatInteger(bl.current))}});a8.onRowsChanged.subscribe(function(bm,bl){ae.invalidateRows(bl.rows);ae.render()});f("#remote-process-group-summary-table").data("gridInstance",ae).on("mouseenter","div.slick-cell",function(bq){var bn=f(this).find("div.has-bulletins");if(bn.length&&!bn.data("qtip")){var bl=f(this).find("span.row-id").text();var bm=a8.getItemById(bl);var bp=j.getFormattedBulletins(bm.bulletins);var bo=j.formatUnorderedList(bp);if(j.isDefinedAndNotNull(bo)){bn.qtip(f.extend({},j.config.tooltipConfig,{content:bo,position:{container:f("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});f("#cluster-remote-process-group-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Remote Process Group Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){f("#cluster-remote-process-group-id").text("");f("#cluster-remote-process-group-name").text("");this.modal("hide")}}}],handler:{close:function(){f("#summary-loading-container").show()}}});f("#cluster-remote-process-group-refresh-button").click(function(){g(f("#cluster-remote-process-group-group-id").text(),f("#cluster-remote-process-group-id").text())});var aW=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:j.genericValueFormatter},a2,ak,ai,aQ];var Q={autosizeColsMode:z.GridAutosizeColsMode.LegacyForceFit,enableTextSelectionOnCells:true,enableCellNavigation:false,enableColumnReorder:false,autoEdit:false,rowHeight:24};var U=new z.Data.DataView({inlineFilters:false});U.setItems([]);C("cluster-remote-process-group-summary-table",{columnId:"node",sortAsc:true},U);var az=new z.Grid("#cluster-remote-process-group-summary-table",U,aW,Q);az.setSelectionModel(new z.RowSelectionModel());az.registerPlugin(new z.AutoTooltips());az.setSortColumn("node",true);az.onSort.subscribe(function(bm,bl){C("cluster-remote-process-group-summary-table",{columnId:bl.sortCol.field,sortAsc:bl.sortAsc},U)});U.onRowCountChanged.subscribe(function(bm,bl){az.updateRowCount();az.render()});U.onRowsChanged.subscribe(function(bm,bl){az.invalidateRows(bl.rows);az.render()});f("#cluster-remote-process-group-summary-table").data("gridInstance",az);f("#system-diagnostics-link").click(function(){v().done(function(){f("#summary-loading-container").hide();f("#system-diagnostics-dialog").modal("show")})});f("#system-diagnostics-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"JVM",tabContentId:"jvm-tab-content"},{name:"System",tabContentId:"system-tab-content"},{name:"Version",tabContentId:"version-tab-content"}]});f("#system-diagnostics-dialog").modal({scrollableContentStyle:"scrollable",headerText:"System Diagnostics",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){this.modal("hide")}}}],handler:{close:function(){f("#summary-loading-container").show()},open:function(){j.toggleScrollable(f("#"+this.find(".tab-container").attr("id")+"-content").get(0))}}});f("#system-diagnostics-refresh-button").click(function(){v()});f("#total-items").text("0")};var a={};var D=function(K){var J=Math.max(G.get(K,"percentUseBytes",0),G.get(K,"percentUseCount",0));if(J>=100){return 0}var L=G.get(K,"predictions.predictedMillisUntilBytesBackpressure",-1);var M=G.get(K,"predictions.predictedMillisUntilCountBackpressure",-1);if(L<0){return M<0?Number.MAX_VALUE:M}else{if(M<0){return L}}return Math.min(L,M)};var C=function(L,J,M){if(j.isUndefined(a[L])){a[L]={}}var K=function(am,al){if(J.columnId==="moreDetails"){var ah=0;if(!j.isEmpty(am.bulletins)){ah=am.bulletins.length}var Q=0;if(!j.isEmpty(al.bulletins)){Q=al.bulletins.length}return ah-Q}else{if(J.columnId==="runStatus"||J.columnId==="transmissionStatus"){var ab=j.isDefinedAndNotNull(am[J.columnId])?am[J.columnId]:"";var Z=j.isDefinedAndNotNull(al[J.columnId])?al[J.columnId]:"";if(ab===Z){return am.activeThreadCount-al.activeThreadCount}else{return ab===Z?0:ab>Z?1:-1}}else{if(J.columnId==="queued"){var ao=a[L].count%4;if(ao<2){f("#"+L+" span.queued-title").addClass("sorted");var ap=j.parseCount(am.queuedCount);var O=j.parseCount(al.queuedCount);return ap-O}else{f("#"+L+" span.queued-size-title").addClass("sorted");var N=j.parseSize(am.queuedSize);var V=j.parseSize(al.queuedSize);return N-V}}else{if(J.columnId==="backpressure"){var ao=a[L].count%4;if(ao<2){f("#"+L+" span.backpressure-object-title").addClass("sorted");var U=j.isDefinedAndNotNull(am.percentUseCount)?am.percentUseCount:-1;var W=j.isDefinedAndNotNull(al.percentUseCount)?al.percentUseCount:-1;return U-W}else{f("#"+L+" span.backpressure-data-size-title").addClass("sorted");var af=j.isDefinedAndNotNull(am.percentUseBytes)?am.percentUseBytes:-1;var an=j.isDefinedAndNotNull(al.percentUseBytes)?al.percentUseBytes:-1;return af-an}}else{if(J.columnId==="backpressurePrediction"){var R=D(am);var ag=D(al);return R-ag}else{if(J.columnId==="sent"||J.columnId==="received"||J.columnId==="input"||J.columnId==="output"||J.columnId==="transferred"){var ae=am[J.columnId].split(/\(([^)]+)\)/);var aj=al[J.columnId].split(/\(([^)]+)\)/);var ao=a[L].count%4;if(ao<2){f("#"+L+" span."+J.columnId+"-title").addClass("sorted");var T=j.parseCount(ae[0]);var X=j.parseCount(aj[0]);return T-X}else{f("#"+L+" span."+J.columnId+"-size-title").addClass("sorted");var aa=j.parseSize(ae[1]);var S=j.parseSize(aj[1]);return aa-S}}else{if(J.columnId==="io"){var ao=a[L].count%4;if(ao<2){f("#"+L+" span.read-title").addClass("sorted");var ar=j.parseSize(am.read);var ak=j.parseSize(al.read);return ar-ak}else{f("#"+L+" span.written-title").addClass("sorted");var Y=j.parseSize(am.written);var aq=j.parseSize(al.written);return Y-aq}}else{if(J.columnId==="tasks"){var ao=a[L].count%4;if(ao<2){f("#"+L+" span.tasks-title").addClass("sorted");var ad=j.parseCount(am.tasks);var ai=j.parseCount(al.tasks);return ad-ai}else{f("#"+L+" span.time-title").addClass("sorted");var P=j.parseDuration(am.tasksDuration);var ac=j.parseDuration(al.tasksDuration);return P-ac}}else{var ab=j.isDefinedAndNotNull(am[J.columnId])?am[J.columnId]:"";var Z=j.isDefinedAndNotNull(al[J.columnId])?al[J.columnId]:"";return ab===Z?0:ab>Z?1:-1}}}}}}}}};f("#"+L+" span.queued-title").removeClass("sorted");f("#"+L+" span.queued-size-title").removeClass("sorted");f("#"+L+" span.backpressure-object-title").removeClass("sorted");f("#"+L+" span.backpressure-data-size-title").removeClass("sorted");f("#"+L+" span.backpressure-prediction-object-title").removeClass("sorted");f("#"+L+" span.backpressure-prediction-data-size-title").removeClass("sorted");f("#"+L+" span.backpressure-prediction-time-title").removeClass("sorted");f("#"+L+" span.input-title").removeClass("sorted");f("#"+L+" span.input-size-title").removeClass("sorted");f("#"+L+" span.output-title").removeClass("sorted");f("#"+L+" span.output-size-title").removeClass("sorted");f("#"+L+" span.read-title").removeClass("sorted");f("#"+L+" span.written-title").removeClass("sorted");f("#"+L+" span.time-title").removeClass("sorted");f("#"+L+" span.tasks-title").removeClass("sorted");f("#"+L+" span.sent-title").removeClass("sorted");f("#"+L+" span.sent-size-title").removeClass("sorted");f("#"+L+" span.received-title").removeClass("sorted");f("#"+L+" span.received-size-title").removeClass("sorted");f("#"+L+" span.transferred-title").removeClass("sorted");f("#"+L+" span.transferred-size-title").removeClass("sorted");f("#"+L+" span.thread-count-title").removeClass("sorted");f("#"+L+" span.thread-count-percentage-title").removeClass("sorted");f("#"+L+" span.duration-title").removeClass("sorted");f("#"+L+" span.duration-percentage-title").removeClass("sorted");if(a[L].prevColumn!==J.columnId){a[L].count=0}else{a[L].count++}M.sort(K,J.sortAsc);a[L].prevColumn=J.columnId};var m=function(K,J){if(J.showOnlyPrimaryNode){if(K.executionNode!=="PRIMARY"){return false}}if(J.filterByStatus&&J.filterByStatus!=="all-statuses"){if(K.runStatus!==J.filterByStatus){return false}}if(J.searchString===""){return true}try{var M=new RegExp(J.searchString,"i")}catch(L){return false}return K[J.property].search(M)>=0};var o=function(){var J=f("#summary-filter-primary-node").hasClass("checkbox-checked");if(J){f("#summary-filter-primary-node").removeClass("checkbox-checked").addClass("checkbox-unchecked")}d=false};var v=function(){var K=E.urls.systemDiagnostics;var J={};if(!j.isNull(h)){J.clusterNodeId=h}if(!f.isEmptyObject(J)){K+="?"+f.param(J)}return f.ajax({type:"GET",url:K,dataType:"json"}).done(function(P){var U=P.systemDiagnostics;var N=U.aggregateSnapshot;f("#max-heap").text(N.maxHeap);f("#total-heap").text(N.totalHeap);f("#used-heap").text(N.usedHeap);f("#free-heap").text(N.freeHeap);if(j.isDefinedAndNotNull(N.heapUtilization)){f("#utilization-heap").text("("+N.heapUtilization+")")}else{f("#utilization-heap").text("")}f("#max-non-heap").text(N.maxNonHeap);f("#total-non-heap").text(N.totalNonHeap);f("#used-non-heap").text(N.usedNonHeap);f("#free-non-heap").text(N.freeNonHeap);if(j.isDefinedAndNotNull(N.nonHeapUtilization)){f("#utilization-non-heap").text("("+N.nonHeapUtilization+")")}else{f("#utilization-non-heap").text("")}var T=f("#garbage-collection-table tbody").empty();if(j.isDefinedAndNotNull(N.garbageCollection)){var O=N.garbageCollection.sort(function(Z,Y){return Z.name===Y.name?0:Z.name>Y.name?1:-1});f.each(O,function(Z,Y){u(T,Y)})}f("#uptime").text(N.uptime);f("#available-processors").text(N.availableProcessors);if(j.isDefinedAndNotNull(N.processorLoadAverage)){f("#processor-load-average").text(j.formatFloat(N.processorLoadAverage))}else{f("#processor-load-average").html(j.formatValue(N.processorLoadAverage))}var V=f("#flow-file-repository-storage-usage-container").empty();e(V,N.flowFileRepositoryStorageUsage);var R=f("#content-repository-storage-usage-container").empty();if(j.isDefinedAndNotNull(N.contentRepositoryStorageUsage)){var S=N.contentRepositoryStorageUsage.sort(function(Z,Y){return Z.identifier===Y.identifier?0:Z.identifier>Y.identifier?1:-1});f.each(S,function(Y,Z){e(R,Z)})}var X=f("#provenance-repository-storage-usage-container").empty();if(j.isDefinedAndNotNull(N.provenanceRepositoryStorageUsage)){var M=N.provenanceRepositoryStorageUsage.sort(function(Z,Y){return Z.identifier===Y.identifier?0:Z.identifier>Y.identifier?1:-1});f.each(M,function(Z,Y){e(X,Y)})}var Q={"#version-nifi":N.versionInfo.niFiVersion,"#version-build-tag":N.versionInfo.buildTag,"#version-build-timestamp":N.versionInfo.buildTimestamp,"#version-build-branch":N.versionInfo.buildBranch,"#version-build-revision":N.versionInfo.buildRevision,"#version-java-version":N.versionInfo.javaVersion,"#version-java-vendor":N.versionInfo.javaVendor,"#version-os-name":N.versionInfo.osName,"#version-os-version":N.versionInfo.osVersion,"#version-os-arch":N.versionInfo.osArchitecture};for(var L in Q){var W=Q[L];if(W){f(L).text(W)}else{f(L).text("(not available)").addClass("unset")}}f("#system-diagnostics-last-refreshed").text(N.statsLastRefreshed)}).fail(i.handleAjaxError)};var u=function(K,J){var M=f("<tr></tr>").appendTo(K);f('<td class="setting-name"></td>').text(J.name+":").appendTo(M);var L=f("<tr></tr>").appendTo(K);f("<td></td>").append(f("<b></b>").text(J.collectionCount+" times ("+J.collectionTime+")")).appendTo(L);f("<tr></tr>").text(" ").appendTo(K)};var e=function(K,N){var M=parseInt(N.totalSpaceBytes,10);var L=parseInt(N.usedSpaceBytes,10);var P=f('<div class="storage-usage"></div>').appendTo(K);var O=f('<div class="storage-identifier setting-name"></div>');O.text("Usage:");if(j.isDefinedAndNotNull(N.identifier)){O.text("Usage for "+N.identifier+":")}O.appendTo(P);(I.injector.get("$compile")(f('<md-progress-linear class="md-hue-2" md-mode="determinate" value="'+(L/M)*100+'" aria-label="FlowFile Repository Storage Usage"></md-progress-linear>'))(I.rootScope)).appendTo(P);var J=f('<div class="storage-usage-details"></div>').text(" ("+N.usedSpace+" of "+N.totalSpace+")").prepend(f("<b></b>").text(Math.round((L/M)*100)+"%"));f('<div class="storage-usage-header"></div>').append(J).append('<div class="clear"></div>').appendTo(P)};var B=function(){return f("#summary-filter").val()};var y=function(Q,P,K,O,N,M,L,J){f.each(L.processorStatusSnapshots,function(S,R){var T=R.processorStatusSnapshot;T.parentProcessGroupName=L.name;T.processGroupNamePath=J.reduce(function(U,V){return U+"/"+V.name},"");Q.push(T)});f.each(L.connectionStatusSnapshots,function(R,S){P.push(S.connectionStatusSnapshot)});f.each(L.inputPortStatusSnapshots,function(R,S){O.push(S.portStatusSnapshot)});f.each(L.outputPortStatusSnapshots,function(R,S){N.push(S.portStatusSnapshot)});f.each(L.remoteProcessGroupStatusSnapshots,function(R,S){M.push(S.remoteProcessGroupStatusSnapshot)});K.push(L);f.each(L.processGroupStatusSnapshots,function(R,S){var T=S.processGroupStatusSnapshot;y(Q,P,K,O,N,M,T,k(J,T))})};var k=function(J,L){var K=J.slice();K.push(L);return K};var F=function(){var J;if(f("#processor-summary-table").is(":visible")){J=f("#processor-summary-table").data("gridInstance")}else{if(f("#connection-summary-table").is(":visible")){J=f("#connection-summary-table").data("gridInstance")}else{if(f("#input-port-summary-table").is(":visible")){J=f("#input-port-summary-table").data("gridInstance")}else{if(f("#output-port-summary-table").is(":visible")){J=f("#output-port-summary-table").data("gridInstance")}else{if(f("#process-group-summary-table").is(":visible")){J=f("#process-group-summary-table").data("gridInstance")}else{if(f("#remote-process-group-summary-table").is(":visible")){J=f("#remote-process-group-summary-table").data("gridInstance")}}}}}}if(j.isDefinedAndNotNull(J)){var K=J.getData();K.setFilterArgs({searchString:B(),property:f("#summary-filter-type").combo("getSelectedOption").value,filterByStatus:f("#summary-filter-status-dropdown").combo("getSelectedOption").value,showOnlyPrimaryNode:d});K.refresh()}};var n=function(J,K){f.ajax({type:"GET",url:E.urls.api+"/flow/processors/"+encodeURIComponent(K)+"/status",data:{nodewise:true},dataType:"json"}).done(function(L){if(j.isDefinedAndNotNull(L.processorStatus)){var P=L.processorStatus;var N=f("#cluster-processor-summary-table").data("gridInstance");var O=N.getData();var M=[];f.each(P.nodeSnapshots,function(S,Q){var R=Q.statusSnapshot;M.push({id:Q.nodeId,node:Q.address+":"+Q.apiPort,runStatus:R.runStatus,activeThreadCount:R.activeThreadCount,terminatedThreadCount:R.terminatedThreadCount,input:R.input,read:R.read,written:R.written,output:R.output,tasks:R.tasks,tasksDuration:R.tasksDuration})});O.setItems(M);O.reSort();N.invalidate();f("#cluster-processor-name").text(P.name).ellipsis();f("#cluster-processor-type").text(P.aggregateSnapshot.type).ellipsis();f("#cluster-processor-id").text(P.id);f("#cluster-processor-group-id").text(P.groupId);f("#cluster-processor-summary-last-refreshed").text(P.statsLastRefreshed)}}).fail(i.handleAjaxError)};var b=function(J,K){f.ajax({type:"GET",url:E.urls.api+"/flow/connections/"+encodeURIComponent(K)+"/status",data:{nodewise:true},dataType:"json"}).done(function(Q){if(j.isDefinedAndNotNull(Q.connectionStatus)){var P=Q.connectionStatus;var S=f("#cluster-connection-summary-table").data("gridInstance");var O=S.getData();var U=[];f.each(P.nodeSnapshots,function(X,V){var W=V.statusSnapshot;U.push({id:V.nodeId,node:V.address+":"+V.apiPort,input:W.input,queued:W.queued,queuedCount:W.queuedCount,queuedSize:W.queuedSize,percentUseCount:W.percentUseCount,percentUseBytes:W.percentUseBytes,predictions:W.predictions,output:W.output})});var T=G.some(U,function(V){return G.isNil(V.predictions)});var N=S.getColumns();if(T){var M=N.filter(function(V){return V.id!==t.id});S.setColumns(M)}else{var R=N.findIndex(function(V){return V.id===t.id});if(R<0){var L=N.findIndex(function(V){return V.id==="backpressure"});if(L<0){N.push(t)}else{N.splice(L+1,0,t)}S.setColumns(N)}}O.setItems(U);O.reSort();S.invalidate();f("#cluster-connection-name").text(P.name).ellipsis();f("#cluster-connection-type").text("Connection").ellipsis();f("#cluster-connection-id").text(P.id);f("#cluster-connection-group-id").text(P.groupId);f("#cluster-connection-summary-last-refreshed").text(P.statsLastRefreshed)}}).fail(i.handleAjaxError)};var q=function(J){f.ajax({type:"GET",url:E.urls.api+"/flow/process-groups/"+encodeURIComponent(J)+"/status",data:{nodewise:true,recursive:false},dataType:"json"}).done(function(M){if(j.isDefinedAndNotNull(M.processGroupStatus)){var O=M.processGroupStatus;var K=f("#cluster-process-group-summary-table").data("gridInstance");var N=K.getData();var L=[];f.each(O.nodeSnapshots,function(R,P){var Q=P.statusSnapshot;L.push({id:P.nodeId,node:P.address+":"+P.apiPort,activeThreadCount:Q.activeThreadCount,transferred:Q.transferred,input:Q.input,queued:Q.queued,queuedCount:Q.queuedCount,queuedSize:Q.queuedSize,output:Q.output,read:Q.read,written:Q.written,sent:Q.sent,received:Q.received})});N.setItems(L);N.reSort();K.invalidate();f("#cluster-process-group-name").text(O.name).ellipsis();f("#cluster-process-group-type").text("Process Group").ellipsis();f("#cluster-process-group-id").text(O.id);f("#cluster-process-group-summary-last-refreshed").text(O.statsLastRefreshed)}}).fail(i.handleAjaxError)};var x=function(J,K){f.ajax({type:"GET",url:E.urls.api+"/flow/input-ports/"+encodeURIComponent(K)+"/status",data:{nodewise:true},dataType:"json"}).done(function(M){if(j.isDefinedAndNotNull(M.portStatus)){var N=M.portStatus;var L=f("#cluster-input-port-summary-table").data("gridInstance");var O=L.getData();var P=[];f.each(N.nodeSnapshots,function(S,Q){var R=Q.statusSnapshot;P.push({id:Q.nodeId,node:Q.address+":"+Q.apiPort,runStatus:R.runStatus,activeThreadCount:R.activeThreadCount,output:R.output})});O.setItems(P);O.reSort();L.invalidate();f("#cluster-input-port-name").text(N.name).ellipsis();f("#cluster-input-port-type").text("Input Port").ellipsis();f("#cluster-input-port-id").text(N.id);f("#cluster-input-port-group-id").text(N.groupId);f("#cluster-input-port-summary-last-refreshed").text(N.statsLastRefreshed)}}).fail(i.handleAjaxError)};var l=function(J,K){f.ajax({type:"GET",url:E.urls.api+"/flow/output-ports/"+encodeURIComponent(K)+"/status",data:{nodewise:true},dataType:"json"}).done(function(M){if(j.isDefinedAndNotNull(M.portStatus)){var L=M.portStatus;var N=f("#cluster-output-port-summary-table").data("gridInstance");var P=N.getData();var O=[];f.each(L.nodeSnapshots,function(S,Q){var R=Q.statusSnapshot;O.push({id:Q.nodeId,node:Q.address+":"+Q.apiPort,runStatus:R.runStatus,activeThreadCount:R.activeThreadCount,input:R.input})});P.setItems(O);P.reSort();N.invalidate();f("#cluster-output-port-name").text(L.name).ellipsis();f("#cluster-output-port-type").text("Output Port").ellipsis();f("#cluster-output-port-id").text(L.id);f("#cluster-output-port-group-id").text(L.groupId);f("#cluster-output-port-summary-last-refreshed").text(L.statsLastRefreshed)}}).fail(i.handleAjaxError)};var g=function(K,J){f.ajax({type:"GET",url:E.urls.api+"/flow/remote-process-groups/"+encodeURIComponent(J)+"/status",data:{nodewise:true},dataType:"json"}).done(function(M){if(j.isDefinedAndNotNull(M.remoteProcessGroupStatus)){var P=M.remoteProcessGroupStatus;var N=f("#cluster-remote-process-group-summary-table").data("gridInstance");var O=N.getData();var L=[];f.each(P.nodeSnapshots,function(S,Q){var R=Q.statusSnapshot;L.push({id:Q.nodeId,node:Q.address+":"+Q.apiPort,targetUri:R.targetUri,transmissionStatus:R.transmissionStatus,sent:R.sent,received:R.received,activeThreadCount:R.activeThreadCount})});O.setItems(L);O.reSort();N.invalidate();f("#cluster-remote-process-group-name").text(P.name).ellipsis();f("#cluster-remote-process-group-type").text("Remote Process Group").ellipsis();f("#cluster-remote-process-group-id").text(P.id);f("#cluster-remote-process-group-group-id").text(P.groupId);f("#cluster-remote-process-group-summary-last-refreshed").text(P.statsLastRefreshed)}}).fail(i.handleAjaxError)};var h=null;return{init:function(J){return f.Deferred(function(K){var L=f.ajax({type:"GET",url:E.urls.flowConfig,dataType:"json"}).done(function(N){var M=N.flowConfiguration;c.init(M.timeOffset);s.init({supportsGoTo:false,supportsStatusBar:false});r.init();w(J);K.resolve()}).fail(function(){K.reject()})}).promise()},setClusterNodeId:function(J){h=J},resetTableSize:function(){var O=f("#processor-summary-table");if(O.is(":visible")){var S=O.data("gridInstance");if(j.isDefinedAndNotNull(S)){S.resizeCanvas()}}var R=f("#connection-summary-table");if(R.is(":visible")){var N=R.data("gridInstance");if(j.isDefinedAndNotNull(N)){N.resizeCanvas()}}var J=f("#process-group-summary-table");if(J.is(":visible")){var P=J.data("gridInstance");if(j.isDefinedAndNotNull(P)){P.resizeCanvas()}}var U=f("#input-port-summary-table");if(U.is(":visible")){var T=U.data("gridInstance");if(j.isDefinedAndNotNull(T)){T.resizeCanvas()}}var L=f("#output-port-summary-table");if(L.is(":visible")){var Q=L.data("gridInstance");if(j.isDefinedAndNotNull(Q)){Q.resizeCanvas()}}var M=f("#remote-process-group-summary-table");if(M.is(":visible")){var K=M.data("gridInstance");if(j.isDefinedAndNotNull(K)){K.resizeCanvas()}}},loadSummaryTable:function(){var J=E.urls.status;var K={};if(!j.isNull(h)){K.clusterNodeId=h}if(!f.isEmptyObject(K)){J+="?"+f.param(K)}return f.ajax({type:"GET",url:J,data:{recursive:true},dataType:"json"}).done(function(L){var ad=L.processGroupStatus;var R=ad.aggregateSnapshot;if(j.isDefinedAndNotNull(R)){var W=f("#processor-summary-table");j.cleanUpTooltips(W,"div.has-bulletins");var U=W.data("gridInstance");var S=U.getData();var P=f("#connection-summary-table").data("gridInstance");var N=P.getData();var M=f("#process-group-summary-table");j.cleanUpTooltips(M,"div.has-bulletins");var X=M.data("gridInstance");var V=X.getData();var an=f("#input-port-summary-table");j.cleanUpTooltips(an,"div.has-bulletins");var al=an.data("gridInstance");var ak=al.getData();var ao=f("#output-port-summary-table");j.cleanUpTooltips(ao,"div.has-bulletins");var aa=ao.data("gridInstance");var Y=aa.getData();var ac=f("#remote-process-group-summary-table");j.cleanUpTooltips(ac,"div.has-bulletins");var ag=ac.data("gridInstance");var af=ag.getData();var am=[];var aj=[];var T=[];var ae=[];var ap=[];var Q=[];y(am,aj,T,ae,ap,Q,R,[R]);var ah=G.some(aj,function(aq){return G.isNil(aq.predictions)});var O=P.getColumns();if(ah){var ab=O.filter(function(aq){return aq.id!==t.id});P.setColumns(ab)}else{var ai=O.findIndex(function(aq){return aq.id===t.id});if(ai<0){var Z=O.findIndex(function(aq){return aq.id==="backpressure"});if(Z<0){O.push(t)}else{O.splice(Z+1,0,t)}P.setColumns(O)}}S.setItems(am);S.reSort();U.invalidate();N.setItems(aj);N.reSort();P.invalidate();V.setItems(T);V.reSort();X.invalidate();ak.setItems(ae);ak.reSort();al.invalidate();Y.setItems(ap);Y.reSort();aa.invalidate();af.setItems(Q);af.reSort();ag.invalidate();f("#summary-last-refreshed").text(ad.statsLastRefreshed);if(f("#processor-summary-table").is(":visible")){f("#total-items").text(j.formatInteger(am.length))}else{if(f("#connection-summary-table").is(":visible")){f("#total-items").text(j.formatInteger(aj.length))}else{if(f("#input-port-summary-table").is(":visible")){f("#total-items").text(j.formatInteger(ae.length))}else{if(f("#output-port-summary-table").is(":visible")){f("#total-items").text(j.formatInteger(ap.length))}else{if(f("#process-group-summary-table").is(":visible")){f("#total-items").text(j.formatInteger(T.length))}else{f("#total-items").text(j.formatInteger(Q.length))}}}}}}else{f("#total-items").text("0")}}).fail(i.handleAjaxError)}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.Dialog","nf.SummaryTable"],function(d,e,c,f){return(nf.ClusterSearch=b(d,e,c,f))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ClusterSearch=b(require("jquery"),require("nf.Common"),require("nf.Dialog"),require("nf.SummaryTable")))}else{nf.ClusterSearch=b(a.$,a.nf.Common,a.nf.Dialog,a.nf.SummaryTable)}}}(this,function(c,d,b,e){var a={search:"Search nodes",urls:{clusterSearch:"../nifi-api/flow/cluster/search-results"}};return{init:function(){c("#view-single-node-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Select node",buttons:[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){var f=c("#cluster-search-field").val();c.ajax({type:"GET",data:{q:f},dataType:"json",url:a.urls.clusterSearch}).done(function(g){var i=g.nodeResults;var h=function(k){e.setClusterNodeId(k.id);e.loadSummaryTable();c("#summary-header-text").text(k.address+" Summary")};if(!c.isArray(i)||i.length===0){b.showOkDialog({headerText:"Cluster Search",dialogContent:"No nodes match '"+d.escapeHtml(f)+"'."})}else{if(i.length>1){var j=false;c.each(i,function(l,k){if(k.address===f){h(k);j=true;return false}});if(j){c("#view-single-node-dialog").modal("hide")}else{b.showOkDialog({headerText:"Cluster Search",dialogContent:"More than one node matches '"+d.escapeHtml(f)+"'."})}}else{if(i.length===1){h(i[0]);c("#view-single-node-dialog").modal("hide")}}}})}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){this.modal("hide")}}}],handler:{close:function(){c("#cluster-search-field").val(a.search).addClass("search-nodes").clusterSearchAutocomplete("reset")}}});c.widget("nf.clusterSearchAutocomplete",c.ui.autocomplete,{reset:function(){this.term=null},_create:function(){this._super();this.widget().menu("option","items","> :not(.search-no-matches)")},_normalize:function(g){var f=[];f.push(g);return f},_renderMenu:function(h,f){var i=f[0];var g=this;c.each(i.nodeResults,function(j,k){g._renderItem(h,{label:k.address,value:k.address})});if(h.children().length===0){h.append('<li class="unset search-no-matches">No nodes matched the search terms</li>')}},_resizeMenu:function(){var f=this.menu.element;f.width(c("#cluster-search-field").outerWidth()-2)},_renderItem:function(g,f){var h=c("<a></a>").text(f.label);return c("<li></li>").data("ui-autocomplete-item",f).append(h).appendTo(g)}});c("#cluster-search-field").clusterSearchAutocomplete({minLength:0,appendTo:"#search-cluster-results",position:{my:"left top",at:"left bottom",offset:"0 1"},source:function(g,f){c.ajax({type:"GET",data:{q:g.term},dataType:"json",url:a.urls.clusterSearch}).done(function(h){f(h)})}}).focus(function(){if(c(this).val()===a.search){c(this).val("").removeClass("search-nodes")}}).val(a.search).addClass("search-nodes");c("#view-single-node-link").click(function(){c("#view-single-node-dialog").modal("show");c("#cluster-search-field").focus()});c("#view-cluster-link").click(function(){e.setClusterNodeId(null);e.loadSummaryTable();c("#summary-header-text").text("NiFi Summary")});c("#view-options-container").show()}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define([],function(){return(nf.ng.ServiceProvider=b())})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.ServiceProvider=b())}else{nf.ng.ServiceProvider=b()}}}(this,function(){return function(){function a(){}a.prototype={constructor:a,register:function(c,b){this[c]=b},remove:function(b){delete this[b]}};return new a()}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["nf.ng.Bridge","nf.Common","nf.CanvasUtils","nf.ClusterSummary","nf.Actions"],function(e,f,g,c,d){return(nf.ng.AppCtrl=b(e,f,g,c,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.AppCtrl=b(require("nf.ng.Bridge"),require("nf.CanvasUtils"),require("nf.Common"),require("nf.ClusterSummary"),require("nf.Actions")))}else{nf.ng.AppCtrl=b(a.nf.ng.Bridge,a.nf.CanvasUtils,a.nf.Common,a.nf.ClusterSummary,a.nf.Actions)}}}(this,function(c,d,e,a,b){return function(g,i){function f(j){this.nf={Common:e,ClusterSummary:a,Actions:b,CanvasUtils:d,};this.serviceProvider=j}f.prototype={constructor:f};var h=new f(i);g.appCtrl=h;c.rootScope=g}}));
(function(a,b){if(typeof define==="function"&&define.amd){define([],function(){return(nf.ng.AppConfig=b())})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.AppConfig=b())}else{nf.ng.AppConfig=b()}}}(this,function(){return function(a,b){b.debugInfoEnabled(false);a.definePalette("basePalette",{"50":"728E9B","100":"728E9B","200":"004849","300":"775351","400":"728E9B","500":"728E9B","600":"728E9B","700":"728E9B","800":"728E9B","900":"rgba(249,250,251,0.97)",A100:"728E9B",A200:"728E9B",A400:"728E9B",A700:"728E9B",contrastDefaultColor:"light",contrastDarkColors:["A100"],contrastLightColors:undefined});a.definePalette("tintPalette",{"50":"728E9B","100":"728E9B","200":"CCDADB","300":"728E9B","400":"AABBC3","500":"728E9B","600":"C7D2D7","700":"728E9B","800":"E3E8EB","900":"728E9B",A100:"728E9B",A200:"728E9B",A400:"728E9B",A700:"728E9B",contrastDefaultColor:"light",contrastDarkColors:["A100"],contrastLightColors:undefined});a.definePalette("warnPalette",{"50":"BA554A","100":"BA554A","200":"BA554A","300":"BA554A","400":"BA554A","500":"BA554A","600":"BA554A","700":"BA554A","800":"BA554A","900":"BA554A",A100:"BA554A",A200:"BA554A",A400:"BA554A",A700:"BA554A",contrastDefaultColor:"light",contrastDarkColors:["A100"],contrastLightColors:undefined});a.theme("default").primaryPalette("basePalette",{"default":"500","hue-1":"200","hue-2":"300","hue-3":"900"}).accentPalette("tintPalette",{"default":"200","hue-1":"400","hue-2":"600","hue-3":"800"}).warnPalette("warnPalette",{"default":"500"})}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","angular","nf.Common","nf.ClusterSummary","nf.ClusterSearch","nf.ng.AppConfig","nf.ng.AppCtrl","nf.ng.ServiceProvider","nf.ng.Bridge","nf.ErrorHandler","nf.Storage","nf.SummaryTable"],function(f,l,e,k,n,o,j,d,c,h,i,g,m){return(nf.Summary=b(f,l,e,k,n,o,j,d,h,i,g,m))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Summary=b(require("jquery"),require("angular"),require("nf.Common"),require("nf.ClusterSummary"),require("nf.ClusterSearch"),require("nf.ng.AppConfig"),require("nf.ng.AppCtrl"),require("nf.ng.ServiceProvider"),require("nf.ng.Bridge"),require("nf.ErrorHandler"),require("nf.Storage"),require("nf.SummaryTable")))}else{nf.Summary=b(a.$,a.angular,a.nf.Common,a.nf.ClusterSummary,a.nf.ClusterSearch,a.nf.ng.AppConfig,a.nf.ng.AppCtrl,a.nf.ng.ServiceProvider,a.nf.ng.Bridge,a.nf.ErrorHandler,a.nf.Storage,a.nf.SummaryTable)}}}(this,function(e,m,d,k,o,p,j,c,g,i,f,n){e(document).ready(function(){var q=m.module("ngSummaryApp",["ngResource","ngRoute","ngMaterial","ngMessages"]);p.$inject=["$mdThemingProvider","$compileProvider"];j.$inject=["$scope","serviceProvider"];c.$inject=[];q.config(p);q.controller("ngSummaryAppCtrl",j);q.service("serviceProvider",c);g.injector=m.bootstrap(e("body"),["ngSummaryApp"],{strictDi:true});k.loadClusterSummary().done(function(){h.init()})});var b={urls:{banners:"../nifi-api/flow/banners",about:"../nifi-api/flow/about",clusterSummary:"../nifi-api/flow/cluster/summary"}};var l=function(){return e.Deferred(function(q){e.ajax({type:"GET",url:b.urls.clusterSummary}).done(function(r){n.init(r.clusterSummary.connectedToCluster).done(function(){if(r.clusterSummary.connectedToCluster){o.init()}q.resolve()}).fail(function(){q.reject()})}).fail(i.handleAjaxError)}).promise()};var a=function(){e("#refresh-button").click(function(){k.loadClusterSummary().done(function(){n.loadSummaryTable()})});return e.Deferred(function(q){if(top===window){e.ajax({type:"GET",url:b.urls.banners,dataType:"json"}).done(function(v){if(d.isDefinedAndNotNull(v.banners)){if(d.isDefinedAndNotNull(v.banners.headerText)&&v.banners.headerText!==""){var s=e("#banner-header").text(v.banners.headerText).show();var u=function(w){var x=e("#"+w);x.css("top",(parseInt(s.css("height"),10)+parseInt(x.css("top"),10))+"px")};u("summary")}if(d.isDefinedAndNotNull(v.banners.footerText)&&v.banners.footerText!==""){var r=e("#banner-footer").text(v.banners.footerText).show();var t=function(w){var x=e("#"+w);x.css("bottom",parseInt(r.css("height"),10)+"px")};t("summary")}}q.resolve()}).fail(function(t,r,s){i.handleAjaxError(t,r,s);q.reject()})}else{q.resolve()}}).promise()};var h={init:function(){f.init();l().done(function(){n.loadSummaryTable().done(function(){a().done(function(){var q=function(){if(top===window){e("body").css({height:e(window).height()+"px",width:e(window).width()+"px"});e("#summary").css("margin",40);e("div.summary-table").css("bottom",127);e("#flow-summary-refresh-container").css({position:"absolute",bottom:"0px",margin:"40px"})}n.resetTableSize()};e.ajax({type:"GET",url:b.urls.about,dataType:"json"}).done(function(s){var r=s.about;var t=r.title+" Summary";document.title=t;e("#status-header-text").text(t);q()}).fail(i.handleAjaxError);e(window).on("resize",function(y){q();var r=e(".dialog");for(var w=0,x=r.length;w<x;w++){if(e(r[w]).is(":visible")){setTimeout(function(A){A.modal("resize")},50,e(r[w]))}}var z=e('*[class*="slickgrid_"]');for(var v=0,x=z.length;v<x;v++){if(e(z[v]).is(":visible")){setTimeout(function(A){A.data("gridInstance").resizeCanvas()},50,e(z[v]))}}var t=e(".tab-container");var s=[];for(var u=0,x=t.length;u<x;u++){if(e(t[u]).is(":visible")){s.push(e("#"+e(t[u]).attr("id")+"-content"))}}e.each(s,function(A,B){d.toggleScrollable(B.get(0))})})})})})}};return h}));
